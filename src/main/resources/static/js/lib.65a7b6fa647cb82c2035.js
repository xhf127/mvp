(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,n){"use strict";(function(e){var n,r,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */r="undefined"!=typeof window?window:void 0,i=function(r,i){var o=[],s=r.document,l=Object.getPrototypeOf,u=o.slice,d=o.concat,c=o.push,f=o.indexOf,h={},p=h.toString,g=h.hasOwnProperty,v=g.toString,m=v.call(Object),y={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_=function(e){return null!=e&&e===e.window},w={type:!0,src:!0,noModule:!0};function E(e,t,n){var r,i=(t=t||s).createElement("script");if(i.text=e,n)for(r in w)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function T(e){return null==e?e+"":"object"===(void 0===e?"undefined":a(e))||"function"==typeof e?h[p.call(e)]||"object":void 0===e?"undefined":a(e)}var x=function e(t,n){return new e.fn.init(t,n)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function C(e){var t=!!e&&"length"in e&&e.length,n=T(e);return!b(e)&&!_(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},x.extend=x.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},l=1,u=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[l]||{},l++),"object"===(void 0===s?"undefined":a(s))||b(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(t in e)n=s[t],s!==(r=e[t])&&(d&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&x.isPlainObject(n)?n:{},s[t]=x.extend(d,o,r)):void 0!==r&&(s[t]=r));return s},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e)||(t=l(e))&&("function"!=typeof(n=g.call(t,"constructor")&&t.constructor)||v.call(n)!==m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){E(e)},each:function(e,t){var n,r=0;if(C(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?x.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:f.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(C(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return d.apply([],o)},guid:1,support:y}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=o[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var O=
/*!
  * Sizzle CSS Selector Engine v2.3.3
  * https://sizzlejs.com/
  *
  * Copyright jQuery Foundation and other contributors
  * Released under the MIT license
  * http://jquery.org/license
  *
  * Date: 2016-08-08
  */
function(e){var t,n,r,i,a,o,s,l,u,d,c,f,h,p,g,v,m,y,b,_="sizzle"+1*new Date,w=e.document,E=0,T=0,x=oe(),S=oe(),C=oe(),O=function(e,t){return e===t&&(c=!0),0},P={}.hasOwnProperty,I=[],M=I.pop,A=I.push,L=I.push,D=I.slice,k=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+R+"*("+N+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+R+"*\\]",B=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",H=new RegExp(R+"+","g"),F=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),V=new RegExp("^"+R+"*,"+R+"*"),z=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),W=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),q=new RegExp(B),G=new RegExp("^"+N+"$"),$={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){f()},ie=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(I=D.call(w.childNodes),w.childNodes),I[w.childNodes.length].nodeType}catch(e){L={apply:I.length?function(e,t){A.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,i){var a,s,u,d,c,p,m,y=t&&t.ownerDocument,E=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==E&&9!==E&&11!==E)return r;if(!i&&((t?t.ownerDocument||t:w)!==h&&f(t),t=t||h,g)){if(11!==E&&(c=X.exec(e)))if(a=c[1]){if(9===E){if(!(u=t.getElementById(a)))return r;if(u.id===a)return r.push(u),r}else if(y&&(u=y.getElementById(a))&&b(t,u)&&u.id===a)return r.push(u),r}else{if(c[2])return L.apply(r,t.getElementsByTagName(e)),r;if((a=c[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!C[e+" "]&&(!v||!v.test(e))){if(1!==E)y=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((d=t.getAttribute("id"))?d=d.replace(te,ne):t.setAttribute("id",d=_),s=(p=o(e)).length;s--;)p[s]="#"+d+" "+me(p[s]);m=p.join(","),y=Q.test(e)&&ge(t.parentNode)||t}if(m)try{return L.apply(r,y.querySelectorAll(m)),r}catch(e){}finally{d===_&&t.removeAttribute("id")}}}return l(e.replace(F,"$1"),t,r,i)}function oe(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[_]=!0,e}function le(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function de(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se(function(t){return t=+t,se(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ae.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:w;return o!==h&&9===o.nodeType&&o.documentElement?(p=(h=o).documentElement,g=!a(h),w!==h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=K.test(h.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=_,!h.getElementsByName||!h.getElementsByName(_).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=K.test(h.querySelectorAll))&&(le(function(e){p.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+R+"*(?:value|"+j+")"),e.querySelectorAll("[id~="+_+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||v.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",B)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=K.test(p.compareDocumentPosition),b=t||K.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===h||e.ownerDocument===w&&b(w,e)?-1:t===h||t.ownerDocument===w&&b(w,t)?1:d?k(d,e)-k(d,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e===h?-1:t===h?1:i?-1:a?1:d?k(d,e)-k(d,t):0;if(i===a)return de(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?de(o[r],s[r]):o[r]===w?-1:s[r]===w?1:0},h):h},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&f(e),t=t.replace(W,"='$1']"),n.matchesSelector&&g&&!C[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ae(t,h,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==h&&f(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==h&&f(e);var i=r.attrHandle[t.toLowerCase()],a=i&&P.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==a?a:n.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.escape=function(e){return(e+"").replace(te,ne)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],i=0,a=0;if(c=!n.detectDuplicates,d=!n.sortStable&&e.slice(0),e.sort(O),c){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return d=null,e},i=ae.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:se,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ae.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,d,c,f,h,p,g=a!==o?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(v){if(a){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?v.firstChild:v.lastChild],o&&y){for(b=(h=(u=(d=(c=(f=v)[_]||(f[_]={}))[f.uniqueID]||(c[f.uniqueID]={}))[e]||[])[0]===E&&u[1])&&u[2],f=h&&v.childNodes[h];f=++h&&f&&f[g]||(b=h=0)||p.pop();)if(1===f.nodeType&&++b&&f===t){d[e]=[E,h,b];break}}else if(y&&(b=h=(u=(d=(c=(f=t)[_]||(f[_]={}))[f.uniqueID]||(c[f.uniqueID]={}))[e]||[])[0]===E&&u[1]),!1===b)for(;(f=++h&&f&&f[g]||(b=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++b||(y&&((d=(c=f[_]||(f[_]={}))[f.uniqueID]||(c[f.uniqueID]={}))[e]=[E,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[_]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=k(e,a[o])]=!(n[r]=a[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(F,"$1"));return r[_]?se(function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return ae(e,t).length>0}}),contains:se(function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return G.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ve(){}function me(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=T++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,l){var u,d,c,f=[E,s];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(d=(c=t[_]||(t[_]={}))[t.uniqueID]||(c[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=d[a])&&u[0]===E&&u[1]===s)return f[2]=u[2];if(d[a]=f,f[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,i){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),u&&t.push(s)));return o}function we(e,t,n,r,i,a){return r&&!r[_]&&(r=we(r)),i&&!i[_]&&(i=we(i,a)),se(function(a,o,s,l){var u,d,c,f=[],h=[],p=o.length,g=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ae(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!a&&t?g:_e(g,f,e,s,l),m=n?i||(a?e:p||r)?[]:o:v;if(n&&n(v,m,s,l),r)for(u=_e(m,h),r(u,[],s,l),d=u.length;d--;)(c=u[d])&&(m[h[d]]=!(v[h[d]]=c));if(a){if(i||e){if(i){for(u=[],d=m.length;d--;)(c=m[d])&&u.push(v[d]=c);i(null,m=[],u,l)}for(d=m.length;d--;)(c=m[d])&&(u=i?k(a,c):f[d])>-1&&(a[u]=!(o[u]=c))}}else m=_e(m===o?m.splice(p,m.length):m),i?i(null,o,m,l):L.apply(o,m)})}function Ee(e){for(var t,n,i,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],l=o?1:0,d=ye(function(e){return e===t},s,!0),c=ye(function(e){return k(t,e)>-1},s,!0),f=[function(e,n,r){var i=!o&&(r||n!==u)||((t=n).nodeType?d(e,n,r):c(e,n,r));return t=null,i}];l<a;l++)if(n=r.relative[e[l].type])f=[ye(be(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[_]){for(i=++l;i<a&&!r.relative[e[i].type];i++);return we(l>1&&be(f),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(F,"$1"),n,l<i&&Ee(e.slice(l,i)),i<a&&Ee(e=e.slice(i)),i<a&&me(e))}f.push(n)}return be(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,o=ae.tokenize=function(e,t){var n,i,a,o,s,l,u,d=S[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],u=r.preFilter;s;){for(o in n&&!(i=V.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),n=!1,(i=z.exec(s))&&(n=i.shift(),a.push({value:n,type:i[0].replace(F," ")}),s=s.slice(n.length)),r.filter)!(i=$[o].exec(s))||u[o]&&!(i=u[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):S(e,l).slice(0)},s=ae.compile=function(e,t){var n,i=[],a=[],s=C[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=Ee(t[n]))[_]?i.push(s):a.push(s);(s=C(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,s,l,d){var c,p,v,m=0,y="0",b=a&&[],_=[],w=u,T=a||i&&r.find.TAG("*",d),x=E+=null==w?1:Math.random()||.1,S=T.length;for(d&&(u=o===h||o||d);y!==S&&null!=(c=T[y]);y++){if(i&&c){for(p=0,o||c.ownerDocument===h||(f(c),s=!g);v=e[p++];)if(v(c,o||h,s)){l.push(c);break}d&&(E=x)}n&&((c=!v&&c)&&m--,a&&b.push(c))}if(m+=y,n&&y!==m){for(p=0;v=t[p++];)v(b,_,o,s);if(a){if(m>0)for(;y--;)b[y]||_[y]||(_[y]=M.call(l));_=_e(_)}L.apply(l,_),d&&!a&&_.length>0&&m+t.length>1&&ae.uniqueSort(l)}return d&&(E=x,u=w),b};return n?se(a):a}(a,i))).selector=e}return s},l=ae.select=function(e,t,n,i){var a,l,u,d,c,f="function"==typeof e&&e,h=!i&&o(e=f.selector||e);if(n=n||[],1===h.length){if((l=h[0]=h[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&g&&r.relative[l[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(J,ee),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=$.needsContext.test(e)?0:l.length;a--&&(u=l[a],!r.relative[d=u.type]);)if((c=r.find[d])&&(i=c(u.matches[0].replace(J,ee),Q.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(a,1),!(e=i.length&&me(l)))return L.apply(n,i),n;break}}return(f||s(e,h))(i,t,!g,n,!t||Q.test(e)&&ge(t.parentNode)||t),n},n.sortStable=_.split("").sort(O).join("")===_,n.detectDuplicates=!!c,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(j,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ae}(r);x.find=O,x.expr=O.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=O.uniqueSort,x.text=O.getText,x.isXMLDoc=O.isXML,x.contains=O.contains,x.escapeSelector=O.escape;var P=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},I=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},M=x.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return b(t)?x.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?x.grep(e,function(e){return e===t!==n}):"string"!=typeof t?x.grep(e,function(e){return f.call(t,e)>-1!==n}):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},x.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;t<r;t++)if(x.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)x.find(e,i[t],n);return r>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&M.test(e)?x(e):e||[],!1).length}});var k,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:s,!0)),L.test(r[1])&&x.isPlainObject(t))for(r in t)b(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=s.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,k=x(s);var R=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function U(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&x(e);if(!M.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?x.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?f.call(x(e),this[0]):f.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return U(e,"nextSibling")},prev:function(e){return U(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return I((e.parentNode||{}).firstChild,e)},children:function(e){return I(e.firstChild)},contents:function(e){return A(e,"iframe")?e.contentDocument:(A(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(N[e]||x.uniqueSort(i),R.test(e)&&i.reverse()),this.pushStack(i)}});var B=/[^\x20\t\r\n\f]+/g;function H(e){return e}function F(e){throw e}function V(e,t,n,r){var i;try{e&&b(i=e.promise)?i.call(e).done(t).fail(n):e&&b(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return x.each(e.match(B)||[],function(e,n){t[n]=!0}),t}(e):x.extend({},e);var t,n,r,i,a=[],o=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},u={add:function(){return a&&(n&&!t&&(s=a.length-1,o.push(n)),function t(n){x.each(n,function(n,r){b(r)?e.unique&&u.has(r)||a.push(r):r&&r.length&&"string"!==T(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return x.each(arguments,function(e,t){for(var n;(n=x.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--}),this},has:function(e){return e?x.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},x.extend({Deferred:function(e){var t=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,r){var i=b(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&b(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,n,i){var o=0;function s(e,t,n,i){return function(){var l=this,u=arguments,d=function(){var r,d;if(!(e<o)){if((r=n.apply(l,u))===t.promise())throw new TypeError("Thenable self-resolution");d=r&&("object"===(void 0===r?"undefined":a(r))||"function"==typeof r)&&r.then,b(d)?i?d.call(r,s(o,t,H,i),s(o,t,F,i)):(o++,d.call(r,s(o,t,H,i),s(o,t,F,i),s(o,t,H,t.notifyWith))):(n!==H&&(l=void 0,u=[r]),(i||t.resolveWith)(l,u))}},c=i?d:function(){try{d()}catch(r){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(r,c.stackTrace),e+1>=o&&(n!==F&&(l=void 0,u=[r]),t.rejectWith(l,u))}};e?c():(x.Deferred.getStackHook&&(c.stackTrace=x.Deferred.getStackHook()),r.setTimeout(c))}}return x.Deferred(function(r){t[0][3].add(s(0,r,b(i)?i:H,r.notifyWith)),t[1][3].add(s(0,r,b(e)?e:H)),t[2][3].add(s(0,r,b(n)?n:F))}).promise()},promise:function(e){return null!=e?x.extend(e,i):i}},o={};return x.each(t,function(e,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),a=x.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(V(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||b(i[n]&&i[n].then)))return a.then();for(;n--;)V(i[n],o(n),a.reject);return a.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&z.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},x.readyException=function(e){r.setTimeout(function(){throw e})};var W=x.Deferred();function q(){s.removeEventListener("DOMContentLoaded",q),r.removeEventListener("load",q),x.ready()}x.fn.ready=function(e){return W.then(e).catch(function(e){x.readyException(e)}),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||W.resolveWith(s,[x]))}}),x.ready.then=W.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?r.setTimeout(x.ready):(s.addEventListener("DOMContentLoaded",q),r.addEventListener("load",q));var G=function e(t,n,r,i,a,o,s){var l=0,u=t.length,d=null==r;if("object"===T(r))for(l in a=!0,r)e(t,n,l,r[l],!0,o,s);else if(void 0!==i&&(a=!0,b(i)||(s=!0),d&&(s?(n.call(t,i),n=null):(d=n,n=function(e,t,n){return d.call(x(e),n)})),n))for(;l<u;l++)n(t[l],r,s?i:i.call(t[l],l,n(t[l],r)));return a?t:d?n.call(t):u?n(t[0],r):o},$=/^-ms-/,Y=/-([a-z])/g;function Z(e,t){return t.toUpperCase()}function K(e){return e.replace($,"ms-").replace(Y,Z)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=x.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[K(t)]=n;else for(r in t)i[K(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(B)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||x.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var J=new Q,ee=new Q,te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ne=/[A-Z]/g;function re(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ne,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:te.test(e)?JSON.parse(e):e)}(n)}catch(e){}ee.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return ee.hasData(e)||J.hasData(e)},data:function(e,t,n){return ee.access(e,t,n)},removeData:function(e,t){ee.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=ee.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=K(r.slice(5)),re(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"===(void 0===e?"undefined":a(e))?this.each(function(){ee.set(this,e)}):G(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=ee.get(o,e))?n:void 0!==(n=re(o,e))?n:void 0;this.each(function(){ee.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ee.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),a=x._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,function(){x.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:x.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=J.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&x.contains(e.ownerDocument,e)&&"none"===x.css(e,"display")},le=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in i=n.apply(e,r||[]),t)e.style[a]=o[a];return i};function ue(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return x.css(e,t,"")},l=s(),u=n&&n[3]||(x.cssNumber[t]?"":"px"),d=(x.cssNumber[t]||"px"!==u&&+l)&&ae.exec(x.css(e,t));if(d&&d[3]!==u){for(l/=2,u=u||d[3],d=+l||1;o--;)x.style(e,t,d+u),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),d/=a;d*=2,x.style(e,t,d+u),n=n||[]}return n&&(d=+d||+l||0,i=n[1]?d+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=d,r.end=i)),i}var de={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=de[r];return i||(t=n.body.appendChild(n.createElement(r)),i=x.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),de[r]=i,i)}function fe(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=J.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&se(r)&&(i[a]=ce(r))):"none"!==n&&(i[a]="none",J.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}x.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?x(this).show():x(this).hide()})}});var he=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ge=/^$|^module$|\/(?:java|ecma)script/i,ve={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?x.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td;var be,_e,we=/<|&#?\w+;/;function Ee(e,t,n,r,i){for(var a,o,s,l,u,d,c=t.createDocumentFragment(),f=[],h=0,p=e.length;h<p;h++)if((a=e[h])||0===a)if("object"===T(a))x.merge(f,a.nodeType?[a]:a);else if(we.test(a)){for(o=o||c.appendChild(t.createElement("div")),s=(pe.exec(a)||["",""])[1].toLowerCase(),l=ve[s]||ve._default,o.innerHTML=l[1]+x.htmlPrefilter(a)+l[2],d=l[0];d--;)o=o.lastChild;x.merge(f,o.childNodes),(o=c.firstChild).textContent=""}else f.push(t.createTextNode(a));for(c.textContent="",h=0;a=f[h++];)if(r&&x.inArray(a,r)>-1)i&&i.push(a);else if(u=x.contains(a.ownerDocument,a),o=me(c.appendChild(a),"script"),u&&ye(o),n)for(d=0;a=o[d++];)ge.test(a.type||"")&&n.push(a);return c}be=s.createDocumentFragment().appendChild(s.createElement("div")),(_e=s.createElement("input")).setAttribute("type","radio"),_e.setAttribute("checked","checked"),_e.setAttribute("name","t"),be.appendChild(_e),y.checkClone=be.cloneNode(!0).cloneNode(!0).lastChild.checked,be.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!be.cloneNode(!0).lastChild.defaultValue;var Te=s.documentElement,xe=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function Pe(){return!1}function Ie(){try{return s.activeElement}catch(e){}}function Me(e,t,n,r,i,o){var s,l;if("object"===(void 0===t?"undefined":a(t))){for(l in"string"!=typeof n&&(r=r||n,n=void 0),t)Me(e,l,n,r,t[l],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Pe;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return x().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),e.each(function(){x.event.add(this,t,i,r,n)})}x.event={global:{},add:function(e,t,n,r,i){var a,o,s,l,u,d,c,f,h,p,g,v=J.get(e);if(v)for(n.handler&&(n=(a=n).handler,i=a.selector),i&&x.find.matchesSelector(Te,i),n.guid||(n.guid=x.guid++),(l=v.events)||(l=v.events={}),(o=v.handle)||(o=v.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)h=g=(s=Ce.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h&&(c=x.event.special[h]||{},h=(i?c.delegateType:c.bindType)||h,c=x.event.special[h]||{},d=x.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:p.join(".")},a),(f=l[h])||((f=l[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(h,o)),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),x.event.global[h]=!0)},remove:function(e,t,n,r,i){var a,o,s,l,u,d,c,f,h,p,g,v=J.hasData(e)&&J.get(e);if(v&&(l=v.events)){for(u=(t=(t||"").match(B)||[""]).length;u--;)if(h=g=(s=Ce.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h){for(c=x.event.special[h]||{},f=l[h=(r?c.delegateType:c.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)d=f[a],!i&&g!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||r&&r!==d.selector&&("**"!==r||!d.selector)||(f.splice(a,1),d.selector&&f.delegateCount--,c.remove&&c.remove.call(e,d));o&&!f.length&&(c.teardown&&!1!==c.teardown.call(e,p,v.handle)||x.removeEvent(e,h,v.handle),delete l[h])}else for(h in l)x.event.remove(e,h+t[u],n,r,!0);x.isEmptyObject(l)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=x.event.fix(e),l=new Array(arguments.length),u=(J.get(this,"events")||{})[s.type]||[],d=x.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,s)){for(o=x.event.handlers.call(this,s,u),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(r=((x.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,a,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],o={},n=0;n<l;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?x(i,this).index(u)>-1:x.find(i,this,null,[u]).length),o[i]&&a.push(r);a.length&&s.push({elem:u,handlers:a})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ie()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ie()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&A(this,"input"))return this.click(),!1},_default:function(e){return A(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:Pe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Pe,isPropagationStopped:Pe,isImmediatePropagationStopped:Pe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&xe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Se.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||x.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),x.fn.extend({on:function(e,t,n,r){return Me(this,e,t,n,r)},one:function(e,t,n,r){return Me(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":a(e))){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Pe),this.each(function(){x.event.remove(this,e,n,t)})}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Le=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ne(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var n,r,i,a,o,s,l,u;if(1===t.nodeType){if(J.hasData(e)&&(a=J.access(e),o=J.set(t,a),u=a.events))for(i in delete o.handle,o.events={},u)for(n=0,r=u[i].length;n<r;n++)x.event.add(t,i,u[i][n]);ee.hasData(e)&&(s=ee.access(e),l=x.extend({},s),ee.set(t,l))}}function Be(e,t,n,r){t=d.apply([],t);var i,a,o,s,l,u,c=0,f=e.length,h=f-1,p=t[0],g=b(p);if(g||f>1&&"string"==typeof p&&!y.checkClone&&De.test(p))return e.each(function(i){var a=e.eq(i);g&&(t[0]=p.call(this,i,a.html())),Be(a,t,n,r)});if(f&&(a=(i=Ee(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(s=(o=x.map(me(i,"script"),Re)).length;c<f;c++)l=i,c!==h&&(l=x.clone(l,!0,!0),s&&x.merge(o,me(l,"script"))),n.call(e[c],l,c);if(s)for(u=o[o.length-1].ownerDocument,x.map(o,Ne),c=0;c<s;c++)l=o[c],ge.test(l.type||"")&&!J.access(l,"globalEval")&&x.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(l.src):E(l.textContent.replace(ke,""),u,l))}return e}function He(e,t,n){for(var r,i=t?x.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||x.cleanData(me(r)),r.parentNode&&(n&&x.contains(r.ownerDocument,r)&&ye(me(r,"script")),r.parentNode.removeChild(r));return e}x.extend({htmlPrefilter:function(e){return e.replace(Ae,"<$1></$2>")},clone:function(e,t,n){var r,i,a,o,s,l,u,d=e.cloneNode(!0),c=x.contains(e.ownerDocument,e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(o=me(d),r=0,i=(a=me(e)).length;r<i;r++)s=a[r],"input"===(u=(l=o[r]).nodeName.toLowerCase())&&he.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(t)if(n)for(a=a||me(e),o=o||me(d),r=0,i=a.length;r<i;r++)Ue(a[r],o[r]);else Ue(e,d);return(o=me(d,"script")).length>0&&ye(o,!c&&me(e,"script")),d},cleanData:function(e){for(var t,n,r,i=x.event.special,a=0;void 0!==(n=e[a]);a++)if(X(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[ee.expando]&&(n[ee.expando]=void 0)}}}),x.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return G(this,function(e){return void 0===e?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Be(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return Be(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return G(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!ve[(pe.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=[],i=x(e),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),x(i[o])[t](n),c.apply(r,n.get());return this.pushStack(r)}});var Fe=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),Ve=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},ze=new RegExp(oe.join("|"),"i");function We(e,t,n){var r,i,a,o,s=e.style;return(n=n||Ve(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||x.contains(e.ownerDocument,e)||(o=x.style(e,t)),!y.pixelBoxStyles()&&Fe.test(o)&&ze.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Te.appendChild(u).appendChild(d);var e=r.getComputedStyle(d);n="1%"!==e.top,l=12===t(e.marginLeft),d.style.right="60%",o=36===t(e.right),i=36===t(e.width),d.style.position="absolute",a=36===d.offsetWidth||"absolute",Te.removeChild(u),d=null}}function t(e){return Math.round(parseFloat(e))}var n,i,a,o,l,u=s.createElement("div"),d=s.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===d.style.backgroundClip,x.extend(y,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a}}))}();var Ge=/^(none|table(?!-c[ea]).+)/,$e=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Xe=s.createElement("div").style;function Qe(e){var t=x.cssProps[e];return t||(t=x.cssProps[e]=function(e){if(e in Xe)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Xe)return e}(e)||e),t}function Je(e,t,n){var r=ae.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,a){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=x.css(e,n+oe[o],!0,i)),r?("content"===n&&(l-=x.css(e,"padding"+oe[o],!0,i)),"margin"!==n&&(l-=x.css(e,"border"+oe[o]+"Width",!0,i))):(l+=x.css(e,"padding"+oe[o],!0,i),"padding"!==n?l+=x.css(e,"border"+oe[o]+"Width",!0,i):s+=x.css(e,"border"+oe[o]+"Width",!0,i));return!r&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))),l}function tt(e,t,n){var r=Ve(e),i=We(e,t,r),a="border-box"===x.css(e,"boxSizing",!1,r),o=a;if(Fe.test(i)){if(!n)return i;i="auto"}return o=o&&(y.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===x.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(i=parseFloat(i)||0)+et(e,t,n||(a?"border":"content"),o,r,i)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,l=K(t),u=$e.test(t),d=e.style;if(u||(t=Qe(l)),s=x.cssHooks[t]||x.cssHooks[l],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:d[t];"string"===(o=void 0===n?"undefined":a(n))&&(i=ae.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(x.cssNumber[l]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(d[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u?d.setProperty(t,n):d[t]=n))}},css:function(e,t,n,r){var i,a,o,s=K(t);return $e.test(t)||(t=Qe(s)),(o=x.cssHooks[t]||x.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ze&&(i=Ze[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,r):le(e,Ye,function(){return tt(e,t,r)})},set:function(e,n,r){var i,a=Ve(e),o="border-box"===x.css(e,"boxSizing",!1,a),s=r&&et(e,t,r,o,a);return o&&y.scrollboxSize()===a.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-et(e,t,"border",!1,a)-.5)),s&&(i=ae.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),Je(0,n,s)}}}),x.cssHooks.marginLeft=qe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-le(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(x.cssHooks[e+t].set=Je)}),x.fn.extend({css:function(e,t){return G(this,function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=Ve(e),i=t.length;o<i;o++)a[t[o]]=x.css(e,t[o],!1,r);return a}return void 0!==n?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)}}),x.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(x.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[x.cssProps[e.prop]]&&!x.cssHooks[e.prop]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=nt.prototype.init,x.fx.step={};var rt,it,at=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function st(){it&&(!1===s.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(st):r.setTimeout(st,x.fx.interval),x.fx.tick())}function lt(){return r.setTimeout(function(){rt=void 0}),rt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function dt(e,t,n){for(var r,i=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function ct(e,t,n){var r,i,a=0,o=ct.prefilters.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=rt||lt(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),a=0,o=u.tweens.length;a<o;a++)u.tweens[a].run(r);return s.notifyWith(e,[u,r,n]),r<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||lt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),d=u.props;for(function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=K(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=x.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(d,u.opts.specialEasing);a<o;a++)if(r=ct.prefilters[a].call(u,e,d,u.opts))return b(r.stop)&&(x._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return x.map(d,dt,u),b(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}x.Animation=x.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ae.exec(t),n),n}]},tweener:function(e,t){b(e)?(t=e,e=["*"]):e=e.match(B);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,s,l,u,d,c="width"in t||"height"in t,f=this,h={},p=e.style,g=e.nodeType&&se(e),v=J.get(e,"fxshow");for(r in n.queue||(null==(o=x._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,x.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[r],at.test(i)){if(delete t[r],a=a||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}h[r]=v&&v[r]||x.style(e,r)}if((l=!x.isEmptyObject(t))||!x.isEmptyObject(h))for(r in c&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=v&&v.display)&&(u=J.get(e,"display")),"none"===(d=x.css(e,"display"))&&(u?d=u:(fe([e],!0),u=e.style.display||u,d=x.css(e,"display"),fe([e]))),("inline"===d||"inline-block"===d&&null!=u)&&"none"===x.css(e,"float")&&(l||(f.done(function(){p.display=u}),null==u&&(d=p.display,u="none"===d?"":d)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,h)l||(v?"hidden"in v&&(g=v.hidden):v=J.access(e,"fxshow",{display:u}),a&&(v.hidden=!g),g&&fe([e],!0),f.done(function(){for(r in g||fe([e]),J.remove(e,"fxshow"),h)x.style(e,r,h[r])})),l=dt(g?v[r]:0,r,f),r in v||(v[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":a(e))?x.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){b(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),a=x.speed(t,n,r),o=function(){var t=ct(this,x.extend({},e),a);(i||J.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=x.timers,o=J.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&ot.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=x.timers,o=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),x.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),rt=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){it||(it=!0,st())},x.fx.stop=function(){it=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,t){return e=x.fx&&x.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}})},function(){var e=s.createElement("input"),t=s.createElement("select").appendChild(s.createElement("option"));e.type="checkbox",y.checkOn=""!==e.value,y.optSelected=t.selected,(e=s.createElement("input")).value="t",e.type="radio",y.radioValue="t"===e.value}();var ft,ht=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return G(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}}),x.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?x.prop(e,t,n):(1===a&&x.isXMLDoc(e)||(i=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(B);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||x.find.attr;ht[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=ht[o],ht[o]=i,i=null!=n(e,t,r)?o:null,ht[o]=a),i}});var pt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(B)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}x.fn.extend({prop:function(e,t){return G(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}}),x.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&x.isXMLDoc(e)||(t=x.propFix[t]||t,i=x.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,l=0;if(b(e))return this.each(function(t){x(this).addClass(e.call(this,t,mt(this)))});if((t=yt(e)).length)for(;n=this[l++];)if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,a,o,s,l=0;if(b(e))return this.each(function(t){x(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;n=this[l++];)if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":a(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):b(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,a,o;if(r)for(i=0,a=x(this),o=yt(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;x.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=b(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,x(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:vt(x.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],l=o?a+1:i.length;for(r=a<0?l:o?a:0;r<l;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=x.makeArray(t),o=i.length;o--;)((r=i[o]).selected=x.inArray(x.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},y.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in r;var _t=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,t,n,i){var o,l,u,d,c,f,h,p,v=[n||s],m=g.call(e,"type")?e.type:e,y=g.call(e,"namespace")?e.namespace.split("."):[];if(l=p=u=n=n||s,3!==n.nodeType&&8!==n.nodeType&&!_t.test(m+x.event.triggered)&&(m.indexOf(".")>-1&&(m=(y=m.split(".")).shift(),y.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[x.expando]?e:new x.Event(m,"object"===(void 0===e?"undefined":a(e))&&e)).isTrigger=i?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:x.makeArray(t,[e]),h=x.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!_(n)){for(d=h.delegateType||m,_t.test(d+m)||(l=l.parentNode);l;l=l.parentNode)v.push(l),u=l;u===(n.ownerDocument||s)&&v.push(u.defaultView||u.parentWindow||r)}for(o=0;(l=v[o++])&&!e.isPropagationStopped();)p=l,e.type=o>1?d:h.bindType||m,(f=(J.get(l,"events")||{})[e.type]&&J.get(l,"handle"))&&f.apply(l,t),(f=c&&l[c])&&f.apply&&X(l)&&(e.result=f.apply(l,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(v.pop(),t)||!X(n)||c&&b(n[m])&&!_(n)&&((u=n[c])&&(n[c]=null),x.event.triggered=m,e.isPropagationStopped()&&p.addEventListener(m,wt),n[m](),e.isPropagationStopped()&&p.removeEventListener(m,wt),x.event.triggered=void 0,u&&(n[c]=u)),e.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),y.focusin||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Et=r.location,Tt=Date.now(),xt=/\?/;x.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),t};var St=/\[\]$/,Ct=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function It(e,t,n,r){var i;if(Array.isArray(t))x.each(t,function(t,i){n||St.test(e)?r(e,i):It(e+"["+("object"===(void 0===i?"undefined":a(i))&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==T(t))r(e,t);else for(i in t)It(e+"["+i+"]",t[i],n,r)}x.param=function(e,t){var n,r=[],i=function(e,t){var n=b(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)});else for(n in e)It(n,e[n],t,i);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&Pt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!he.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}});var Mt=/%20/g,At=/#.*$/,Lt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,kt=/^(?:GET|HEAD)$/,jt=/^\/\//,Rt={},Nt={},Ut="*/".concat("*"),Bt=s.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(B)||[];if(b(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var i={},a=e===Nt;function o(s){var l;return i[s]=!0,x.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||i[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Vt(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}Bt.href=Et.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,x.ajaxSettings),t):Vt(x.ajaxSettings,e)},ajaxPrefilter:Ht(Rt),ajaxTransport:Ht(Nt),ajax:function(e,t){"object"===(void 0===e?"undefined":a(e))&&(t=e,e=void 0),t=t||{};var n,i,o,l,u,d,c,f,h,p,g=x.ajaxSetup({},t),v=g.context||g,m=g.context&&(v.nodeType||v.jquery)?x(v):x.event,y=x.Deferred(),b=x.Callbacks("once memory"),_=g.statusCode||{},w={},E={},T="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!l)for(l={};t=Dt.exec(o);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||T;return n&&n.abort(t),C(0,t),this}};if(y.promise(S),g.url=((e||g.url||Et.href)+"").replace(jt,Et.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(B)||[""],null==g.crossDomain){d=s.createElement("a");try{d.href=g.url,d.href=d.href,g.crossDomain=Bt.protocol+"//"+Bt.host!=d.protocol+"//"+d.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=x.param(g.data,g.traditional)),Ft(Rt,g,t,S),c)return S;for(h in(f=x.event&&g.global)&&0==x.active++&&x.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!kt.test(g.type),i=g.url.replace(At,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Mt,"+")):(p=g.url.slice(i.length),g.data&&(g.processData||"string"==typeof g.data)&&(i+=(xt.test(i)?"&":"?")+g.data,delete g.data),!1===g.cache&&(i=i.replace(Lt,"$1"),p=(xt.test(i)?"&":"?")+"_="+Tt+++p),g.url=i+p),g.ifModified&&(x.lastModified[i]&&S.setRequestHeader("If-Modified-Since",x.lastModified[i]),x.etag[i]&&S.setRequestHeader("If-None-Match",x.etag[i])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ut+"; q=0.01":""):g.accepts["*"]),g.headers)S.setRequestHeader(h,g.headers[h]);if(g.beforeSend&&(!1===g.beforeSend.call(v,S,g)||c))return S.abort();if(T="abort",b.add(g.complete),S.done(g.success),S.fail(g.error),n=Ft(Nt,g,t,S)){if(S.readyState=1,f&&m.trigger("ajaxSend",[S,g]),c)return S;g.async&&g.timeout>0&&(u=r.setTimeout(function(){S.abort("timeout")},g.timeout));try{c=!1,n.send(w,C)}catch(e){if(c)throw e;C(-1,e)}}else C(-1,"No Transport");function C(e,t,a,s){var l,d,h,p,w,E=t;c||(c=!0,u&&r.clearTimeout(u),n=void 0,o=s||"",S.readyState=e>0?4:0,l=e>=200&&e<300||304===e,a&&(p=function(e,t,n){for(var r,i,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}(g,S,a)),p=function(e,t,n,r){var i,a,o,s,l,u={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=d.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(i in u)if((s=i.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[i]:!0!==u[i]&&(a=s[0],d.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(g,p,S,l),l?(g.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(x.lastModified[i]=w),(w=S.getResponseHeader("etag"))&&(x.etag[i]=w)),204===e||"HEAD"===g.type?E="nocontent":304===e?E="notmodified":(E=p.state,d=p.data,l=!(h=p.error))):(h=E,!e&&E||(E="error",e<0&&(e=0))),S.status=e,S.statusText=(t||E)+"",l?y.resolveWith(v,[d,E,S]):y.rejectWith(v,[S,E,h]),S.statusCode(_),_=void 0,f&&m.trigger(l?"ajaxSuccess":"ajaxError",[S,g,l?d:h]),b.fireWith(v,[S,E]),f&&(m.trigger("ajaxComplete",[S,g]),--x.active||x.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return b(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:i,data:n,success:r},x.isPlainObject(e)&&e))}}),x._evalUrl=function(e){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return b(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var zt={0:200,1223:204},Wt=x.ajaxSettings.xhr();y.cors=!!Wt&&"withCredentials"in Wt,y.ajax=Wt=!!Wt,x.ajaxTransport(function(e){var t,n;if(y.cors||Wt&&!e.crossDomain)return{send:function(i,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(zt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),x.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=x("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){n&&n()}}});var qt,Gt=[],$t=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||x.expando+"_"+Tt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(e,t,n){var i,a,o,s=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($t,"$1"+i):!1!==e.jsonp&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||x.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=r[i],r[i]=function(){o=arguments},n.always(function(){void 0===a?x(r).removeProp(i):r[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(i)),o&&b(a)&&a(o[0]),o=a=void 0}),"script"}),y.createHTMLDocument=((qt=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qt.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,t.head.appendChild(r)):t=s),i=L.exec(e),a=!n&&[],i?[t.createElement(i[1])]:(i=Ee([e],t,a),a&&a.length&&x(a).remove(),x.merge([],i.childNodes)));var r,i,a},x.fn.load=function(e,t,n){var r,i,o,s=this,l=e.indexOf(" ");return l>-1&&(r=vt(e.slice(l)),e=e.slice(0,l)),b(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":a(t))&&(i="POST"),s.length>0&&x.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},x.offset={setOffset:function(e,t,n){var r,i,a,o,s,l,u=x.css(e,"position"),d=x(e),c={};"static"===u&&(e.style.position="relative"),s=d.offset(),a=x.css(e,"top"),l=x.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1?(o=(r=d.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),b(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(c.top=t.top-s.top+o),null!=t.left&&(c.left=t.left-s.left+i),"using"in t?t.using.call(e,c):d.css(c)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),i.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-x.css(r,"marginTop",!0),left:t.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||Te})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;x.fn[e]=function(r){return G(this,function(e,r,i){var a;if(_(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i},e,r,arguments.length)}}),x.each(["top","left"],function(e,t){x.cssHooks[t]=qe(y.pixelPosition,function(e,n){if(n)return n=We(e,t),Fe.test(n)?x(e).position()[t]+"px":n})}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return G(this,function(t,n,i){var a;return _(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?x.css(t,n,s):x.style(t,n,i,s)},t,o?i:void 0,o)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),x.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return r=u.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=A,x.isFunction=b,x.isWindow=_,x.camelCase=K,x.type=T,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=function(){return x}.apply(t,[]))||(e.exports=n);var Yt=r.jQuery,Zt=r.$;return x.noConflict=function(e){return r.$===x&&(r.$=Zt),e&&r.jQuery===x&&(r.jQuery=Yt),x},i||(r.jQuery=r.$=x),x},"object"===a(e)&&"object"===a(e.exports)?e.exports=r.document?i(r,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(r)}).call(this,n(1)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});for(
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.14.4
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var n="undefined"!=typeof window&&"undefined"!=typeof document,r=["Edge","Trident","Firefox"],i=0,a=0;a<r.length;a+=1)if(n&&navigator.userAgent.indexOf(r[a])>=0){i=1;break}var o=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},i))}};function s(e){return e&&"[object Function]"==={}.toString.call(e)}function l(e,t){if(1!==e.nodeType)return[];var n=getComputedStyle(e,null);return t?n[t]:n}function u(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function d(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=l(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:d(u(e))}var c=n&&!(!window.MSInputMethodContext||!document.documentMode),f=n&&/MSIE 10/.test(navigator.userAgent);function h(e){return 11===e?c:10===e?f:c||f}function p(e){if(!e)return document.documentElement;for(var t=h(10)?document.body:null,n=e.offsetParent;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===l(n,"position")?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function g(e){return null!==e.parentNode?g(e.parentNode):e}function v(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var o,s,l=a.commonAncestorContainer;if(e!==l&&t!==l||r.contains(i))return"BODY"===(s=(o=l).nodeName)||"HTML"!==s&&p(o.firstElementChild)!==o?p(l):l;var u=g(e);return u.host?v(u.host,t):v(e,g(t).host)}function m(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function y(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function b(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],h(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function _(e){var t=e.body,n=e.documentElement,r=h(10)&&getComputedStyle(n);return{height:b("Height",t,n,r),width:b("Width",t,n,r)}}var w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function S(e){return x({},e,{right:e.left+e.width,bottom:e.top+e.height})}function C(e){var t={};try{if(h(10)){t=e.getBoundingClientRect();var n=m(e,"top"),r=m(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?_(e.ownerDocument):{},o=a.width||e.clientWidth||i.right-i.left,s=a.height||e.clientHeight||i.bottom-i.top,u=e.offsetWidth-o,d=e.offsetHeight-s;if(u||d){var c=l(e);u-=y(c,"x"),d-=y(c,"y"),i.width-=u,i.height-=d}return S(i)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=h(10),i="HTML"===t.nodeName,a=C(e),o=C(t),s=d(e),u=l(t),c=parseFloat(u.borderTopWidth,10),f=parseFloat(u.borderLeftWidth,10);n&&i&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var p=S({top:a.top-o.top-c,left:a.left-o.left-f,width:a.width,height:a.height});if(p.marginTop=0,p.marginLeft=0,!r&&i){var g=parseFloat(u.marginTop,10),v=parseFloat(u.marginLeft,10);p.top-=c-g,p.bottom-=c-g,p.left-=f-v,p.right-=f-v,p.marginTop=g,p.marginLeft=v}return(r&&!n?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m(t,"top"),i=m(t,"left"),a=n?-1:1;return e.top+=r*a,e.bottom+=r*a,e.left+=i*a,e.right+=i*a,e}(p,t)),p}function P(e){if(!e||!e.parentElement||h())return document.documentElement;for(var t=e.parentElement;t&&"none"===l(t,"transform");)t=t.parentElement;return t||document.documentElement}function I(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},o=i?P(e):v(e,t);if("viewport"===r)a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=O(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:m(n),s=t?0:m(n,"left");return S({top:o-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:a})}(o,i);else{var s=void 0;"scrollParent"===r?"BODY"===(s=d(u(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===r?e.ownerDocument.documentElement:r;var c=O(s,o,i);if("HTML"!==s.nodeName||function e(t){var n=t.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===l(t,"position")||e(u(t)))}(o))a=c;else{var f=_(e.ownerDocument),h=f.height,p=f.width;a.top+=c.top-c.marginTop,a.bottom=h+c.top,a.left+=c.left-c.marginLeft,a.right=p+c.left}}var g="number"==typeof(n=n||0);return a.left+=g?n:n.left||0,a.top+=g?n:n.top||0,a.right-=g?n:n.right||0,a.bottom-=g?n:n.bottom||0,a}function M(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=I(n,r,a,i),s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},l=Object.keys(s).map(function(e){return x({key:e},s[e],{area:(t=s[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),u=l.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),d=u.length>0?u[0].key:l[0].key,c=e.split("-")[1];return d+(c?"-"+c:"")}function A(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return O(n,r?P(t):v(t,n),r)}function L(e){var t=getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function D(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function k(e,t,n){n=n.split("-")[0];var r=L(e),i={width:r.width,height:r.height},a=-1!==["right","left"].indexOf(n),o=a?"top":"left",s=a?"left":"top",l=a?"height":"width",u=a?"width":"height";return i[o]=t[o]+t[l]/2-r[l]/2,i[s]=n===s?t[s]-r[u]:t[D(s)],i}function j(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function R(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=j(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",n))).forEach(function(e){e.function;var n=e.function||e.fn;e.enabled&&s(n)&&(t.offsets.popper=S(t.offsets.popper),t.offsets.reference=S(t.offsets.reference),t=n(t,e))}),t}function N(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function U(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],a=i?""+i+n:e;if(void 0!==document.body.style[a])return a}return null}function B(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function F(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&H(t[n])&&(r="px"),e.style[n]=t[n]+r})}function V(e,t,n){var r=j(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});return i}var z=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],W=z.slice(3);function q(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=W.indexOf(e),r=W.slice(n+1).concat(W.slice(0,n));return t?r.reverse():r}var G="flip",$="clockwise",Y="counterclockwise";var Z={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,a=i.reference,o=i.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",d={start:T({},l,a[l]),end:T({},l,a[l]+a[u]-o[u])};e.offsets.popper=x({},o,d[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n,r=t.offset,i=e.placement,a=e.offsets,o=a.popper,s=a.reference,l=i.split("-")[0];return n=H(+r)?[+r,0]:function(e,t,n,r){var i=[0,0],a=-1!==["right","left"].indexOf(r),o=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=o.indexOf(j(o,function(e){return-1!==e.search(/,|\s/)}));o[s]&&o[s].indexOf(",");var l=/\s*,\s*|\s+/,u=-1!==s?[o.slice(0,s).concat([o[s].split(l)[0]]),[o[s].split(l)[1]].concat(o.slice(s+1))]:[o];return(u=u.map(function(e,r){var i=(1===r?!a:a)?"height":"width",o=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+i[1],o=i[2];if(!a)return e;if(0===o.indexOf("%")){var s=void 0;switch(o){case"%p":s=n;break;case"%":case"%r":default:s=r}return S(s)[t]/100*a}return"vh"===o||"vw"===o?("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*a:a}(e,i,t,n)})})).forEach(function(e,t){e.forEach(function(n,r){H(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))})}),i}(r,o,s,l),"left"===l?(o.top+=n[0],o.left-=n[1]):"right"===l?(o.top+=n[0],o.left+=n[1]):"top"===l?(o.left+=n[0],o.top-=n[1]):"bottom"===l&&(o.left+=n[0],o.top+=n[1]),e.popper=o,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||p(e.instance.popper);e.instance.reference===n&&(n=p(n));var r=U("transform"),i=e.instance.popper.style,a=i.top,o=i.left,s=i[r];i.top="",i.left="",i[r]="";var l=I(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=a,i.left=o,i[r]=s,t.boundaries=l;var u=t.priority,d=e.offsets.popper,c={primary:function(e){var n=d[e];return d[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(d[e],l[e])),T({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=d[n];return d[e]>l[e]&&!t.escapeWithReference&&(r=Math.min(d[n],l[e]-("right"===e?d.width:d.height))),T({},n,r)}};return u.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";d=x({},d,c[t](e))}),e.offsets.popper=d,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],a=Math.floor,o=-1!==["top","bottom"].indexOf(i),s=o?"right":"bottom",l=o?"left":"top",u=o?"width":"height";return n[s]<a(r[l])&&(e.offsets.popper[l]=a(r[l])-n[u]),n[l]>a(r[s])&&(e.offsets.popper[l]=a(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!V(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return e;var i=e.placement.split("-")[0],a=e.offsets,o=a.popper,s=a.reference,u=-1!==["left","right"].indexOf(i),d=u?"height":"width",c=u?"Top":"Left",f=c.toLowerCase(),h=u?"left":"top",p=u?"bottom":"right",g=L(r)[d];s[p]-g<o[f]&&(e.offsets.popper[f]-=o[f]-(s[p]-g)),s[f]+g>o[p]&&(e.offsets.popper[f]+=s[f]+g-o[p]),e.offsets.popper=S(e.offsets.popper);var v=s[f]+s[d]/2-g/2,m=l(e.instance.popper),y=parseFloat(m["margin"+c],10),b=parseFloat(m["border"+c+"Width"],10),_=v-e.offsets.popper[f]-y-b;return _=Math.max(Math.min(o[d]-g,_),0),e.arrowElement=r,e.offsets.arrow=(T(n={},f,Math.round(_)),T(n,h,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(N(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=I(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=D(r),a=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case G:o=[r,i];break;case $:o=q(r);break;case Y:o=q(r,!0);break;default:o=t.behavior}return o.forEach(function(s,l){if(r!==s||o.length===l+1)return e;r=e.placement.split("-")[0],i=D(r);var u=e.offsets.popper,d=e.offsets.reference,c=Math.floor,f="left"===r&&c(u.right)>c(d.left)||"right"===r&&c(u.left)<c(d.right)||"top"===r&&c(u.bottom)>c(d.top)||"bottom"===r&&c(u.top)<c(d.bottom),h=c(u.left)<c(n.left),p=c(u.right)>c(n.right),g=c(u.top)<c(n.top),v=c(u.bottom)>c(n.bottom),m="left"===r&&h||"right"===r&&p||"top"===r&&g||"bottom"===r&&v,y=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(y&&"start"===a&&h||y&&"end"===a&&p||!y&&"start"===a&&g||!y&&"end"===a&&v);(f||m||b)&&(e.flipped=!0,(f||m)&&(r=o[l+1]),b&&(a="end"===a?"start":"start"===a?"end":a),e.placement=r+(a?"-"+a:""),e.offsets.popper=x({},e.offsets.popper,k(e.instance.popper,e.offsets.reference,e.placement)),e=R(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,a=r.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=a[n]-(s?i[o?"width":"height"]:0),e.placement=D(t),e.offsets.popper=S(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!V(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=j(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n,r,i=t.x,a=t.y,o=e.offsets.popper,s=j(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration,l=void 0!==s?s:t.gpuAcceleration,u=p(e.instance.popper),d=C(u),c={position:o.position},f={left:Math.floor(o.left),top:Math.round(o.top),bottom:Math.round(o.bottom),right:Math.floor(o.right)},h="bottom"===i?"top":"bottom",g="right"===a?"left":"right",v=U("transform");if(r="bottom"===h?"HTML"===u.nodeName?-u.clientHeight+f.bottom:-d.height+f.bottom:f.top,n="right"===g?"HTML"===u.nodeName?-u.clientWidth+f.right:-d.width+f.right:f.left,l&&v)c[v]="translate3d("+n+"px, "+r+"px, 0)",c[h]=0,c[g]=0,c.willChange="transform";else{var m="bottom"===h?-1:1,y="right"===g?-1:1;c[h]=r*m,c[g]=n*y,c.willChange=h+", "+g}var b={"x-placement":e.placement};return e.attributes=x({},b,e.attributes),e.styles=x({},c,e.styles),e.arrowStyles=x({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return F(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&F(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var a=A(i,t,e,n.positionFixed),o=M(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),F(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},K=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=o(this.update.bind(this)),this.options=x({},e.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(x({},e.Defaults.modifiers,i.modifiers)).forEach(function(t){r.options.modifiers[t]=x({},e.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return x({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&s(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return E(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=A(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=M(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=k(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=R(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,N(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[U("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=function(e,t,n,r){n.updateBound=r,B(e).addEventListener("resize",n.updateBound,{passive:!0});var i=d(e);return function e(t,n,r,i){var a="BODY"===t.nodeName,o=a?t.ownerDocument.defaultView:t;o.addEventListener(n,r,{passive:!0}),a||e(d(o.parentNode),n,r,i),i.push(o)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return function(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,B(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}.call(this)}}]),e}();K.Utils=("undefined"!=typeof window?window:e).PopperUtils,K.placements=z,K.Defaults=Z,t.default=K}).call(this,n(8))},function(e,t,n){"use strict";var r,i,a,o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
  * Bootstrap v4.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2018 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */o=function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var l=function(e){var t="transitionend";var n={TRANSITION_END:"bsTransitionEnd",getUID:function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");t&&"#"!==t||(t=e.getAttribute("href")||"");try{return document.querySelector(t)?t:null}catch(e){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var n=e(t).css("transition-duration");return parseFloat(n)?(n=n.split(",")[0],1e3*parseFloat(n)):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(n){e(n).trigger(t)},supportsTransitionEnd:function(){return Boolean(t)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,r){for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var a=r[i],o=t[i],s=o&&n.isElement(o)?"element":(l=o,{}.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(a).test(s))throw new Error(e.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+a+'".')}var l}};return e.fn.emulateTransitionEnd=function(t){var r=this,i=!1;return e(this).one(n.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||n.triggerTransitionEnd(r)},t),this},e.event.special[n.TRANSITION_END]={bindType:t,delegateType:t,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}},n}(t),u=function(e){var t=e.fn.alert,n="close.bs.alert",r="closed.bs.alert",a="click.bs.alert.data-api",o=function(){function t(e){this._element=e}var a=t.prototype;return a.close=function(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},a.dispose=function(){e.removeData(this._element,"bs.alert"),this._element=null},a._getRootElement=function(t){var n=l.getSelectorFromElement(t),r=!1;return n&&(r=document.querySelector(n)),r||(r=e(t).closest(".alert")[0]),r},a._triggerCloseEvent=function(t){var r=e.Event(n);return e(t).trigger(r),r},a._removeElement=function(t){var n=this;if(e(t).removeClass("show"),e(t).hasClass("fade")){var r=l.getTransitionDurationFromElement(t);e(t).one(l.TRANSITION_END,function(e){return n._destroyElement(t,e)}).emulateTransitionEnd(r)}else this._destroyElement(t)},a._destroyElement=function(t){e(t).detach().trigger(r).remove()},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||(i=new t(this),r.data("bs.alert",i)),"close"===n&&i[n](this)})},t._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},i(t,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),t}();return e(document).on(a,'[data-dismiss="alert"]',o._handleDismiss(new o)),e.fn.alert=o._jQueryInterface,e.fn.alert.Constructor=o,e.fn.alert.noConflict=function(){return e.fn.alert=t,o._jQueryInterface},o}(t),d=function(e){var t="button",n=e.fn[t],r="active",a='[data-toggle^="button"]',o=".btn",s="click.bs.button.data-api",l="focus.bs.button.data-api blur.bs.button.data-api",u=function(){function t(e){this._element=e}var n=t.prototype;return n.toggle=function(){var t=!0,n=!0,i=e(this._element).closest('[data-toggle="buttons"]')[0];if(i){var a=this._element.querySelector("input");if(a){if("radio"===a.type)if(a.checked&&this._element.classList.contains(r))t=!1;else{var o=i.querySelector(".active");o&&e(o).removeClass(r)}if(t){if(a.hasAttribute("disabled")||i.hasAttribute("disabled")||a.classList.contains("disabled")||i.classList.contains("disabled"))return;a.checked=!this._element.classList.contains(r),e(a).trigger("change")}a.focus(),n=!1}}n&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(r)),t&&e(this._element).toggleClass(r)},n.dispose=function(){e.removeData(this._element,"bs.button"),this._element=null},t._jQueryInterface=function(n){return this.each(function(){var r=e(this).data("bs.button");r||(r=new t(this),e(this).data("bs.button",r)),"toggle"===n&&r[n]()})},i(t,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),t}();return e(document).on(s,a,function(t){t.preventDefault();var n=t.target;e(n).hasClass("btn")||(n=e(n).closest(o)),u._jQueryInterface.call(e(n),"toggle")}).on(l,a,function(t){var n=e(t.target).closest(o)[0];e(n).toggleClass("focus",/^focus(in)?$/.test(t.type))}),e.fn[t]=u._jQueryInterface,e.fn[t].Constructor=u,e.fn[t].noConflict=function(){return e.fn[t]=n,u._jQueryInterface},u}(t),c=function(e){var t="carousel",n="bs.carousel",r="."+n,a=e.fn[t],u={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},d={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},c="next",f="prev",h={SLIDE:"slide"+r,SLID:"slid"+r,KEYDOWN:"keydown"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r,TOUCHEND:"touchend"+r,LOAD_DATA_API:"load.bs.carousel.data-api",CLICK_DATA_API:"click.bs.carousel.data-api"},p="active",g={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},v=function(){function a(t,n){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(n),this._element=e(t)[0],this._indicatorsElement=this._element.querySelector(g.INDICATORS),this._addEventListeners()}var v=a.prototype;return v.next=function(){this._isSliding||this._slide(c)},v.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},v.prev=function(){this._isSliding||this._slide(f)},v.pause=function(e){e||(this._isPaused=!0),this._element.querySelector(g.NEXT_PREV)&&(l.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},v.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},v.to=function(t){var n=this;this._activeElement=this._element.querySelector(g.ACTIVE_ITEM);var r=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)e(this._element).one(h.SLID,function(){return n.to(t)});else{if(r===t)return this.pause(),void this.cycle();var i=t>r?c:f;this._slide(i,this._items[t])}},v.dispose=function(){e(this._element).off(r),e.removeData(this._element,n),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},v._getConfig=function(e){return e=o({},u,e),l.typeCheckConfig(t,e,d),e},v._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on(h.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&(e(this._element).on(h.MOUSEENTER,function(e){return t.pause(e)}).on(h.MOUSELEAVE,function(e){return t.cycle(e)}),"ontouchstart"in document.documentElement&&e(this._element).on(h.TOUCHEND,function(){t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval)}))},v._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next()}},v._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(g.ITEM)):[],this._items.indexOf(e)},v._getItemByDirection=function(e,t){var n=e===c,r=e===f,i=this._getItemIndex(t),a=this._items.length-1;if((r&&0===i||n&&i===a)&&!this._config.wrap)return t;var o=(i+(e===f?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},v._triggerSlideEvent=function(t,n){var r=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(g.ACTIVE_ITEM)),a=e.Event(h.SLIDE,{relatedTarget:t,direction:n,from:i,to:r});return e(this._element).trigger(a),a},v._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var n=[].slice.call(this._indicatorsElement.querySelectorAll(g.ACTIVE));e(n).removeClass(p);var r=this._indicatorsElement.children[this._getItemIndex(t)];r&&e(r).addClass(p)}},v._slide=function(t,n){var r,i,a,o=this,s=this._element.querySelector(g.ACTIVE_ITEM),u=this._getItemIndex(s),d=n||s&&this._getItemByDirection(t,s),f=this._getItemIndex(d),v=Boolean(this._interval);if(t===c?(r="carousel-item-left",i="carousel-item-next",a="left"):(r="carousel-item-right",i="carousel-item-prev",a="right"),d&&e(d).hasClass(p))this._isSliding=!1;else if(!this._triggerSlideEvent(d,a).isDefaultPrevented()&&s&&d){this._isSliding=!0,v&&this.pause(),this._setActiveIndicatorElement(d);var m=e.Event(h.SLID,{relatedTarget:d,direction:a,from:u,to:f});if(e(this._element).hasClass("slide")){e(d).addClass(i),l.reflow(d),e(s).addClass(r),e(d).addClass(r);var y=l.getTransitionDurationFromElement(s);e(s).one(l.TRANSITION_END,function(){e(d).removeClass(r+" "+i).addClass(p),e(s).removeClass(p+" "+i+" "+r),o._isSliding=!1,setTimeout(function(){return e(o._element).trigger(m)},0)}).emulateTransitionEnd(y)}else e(s).removeClass(p),e(d).addClass(p),this._isSliding=!1,e(this._element).trigger(m);v&&this.cycle()}},a._jQueryInterface=function(t){return this.each(function(){var r=e(this).data(n),i=o({},u,e(this).data());"object"===(void 0===t?"undefined":s(t))&&(i=o({},i,t));var l="string"==typeof t?t:i.slide;if(r||(r=new a(this,i),e(this).data(n,r)),"number"==typeof t)r.to(t);else if("string"==typeof l){if(void 0===r[l])throw new TypeError('No method named "'+l+'"');r[l]()}else i.interval&&(r.pause(),r.cycle())})},a._dataApiClickHandler=function(t){var r=l.getSelectorFromElement(this);if(r){var i=e(r)[0];if(i&&e(i).hasClass("carousel")){var s=o({},e(i).data(),e(this).data()),u=this.getAttribute("data-slide-to");u&&(s.interval=!1),a._jQueryInterface.call(e(i),s),u&&e(i).data(n).to(u),t.preventDefault()}}},i(a,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return u}}]),a}();return e(document).on(h.CLICK_DATA_API,g.DATA_SLIDE,v._dataApiClickHandler),e(window).on(h.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(g.DATA_RIDE)),n=0,r=t.length;n<r;n++){var i=e(t[n]);v._jQueryInterface.call(i,i.data())}}),e.fn[t]=v._jQueryInterface,e.fn[t].Constructor=v,e.fn[t].noConflict=function(){return e.fn[t]=a,v._jQueryInterface},v}(t),f=function(e){var t="collapse",n="bs.collapse",r=e.fn[t],a={toggle:!0,parent:""},u={toggle:"boolean",parent:"(string|element)"},d="show.bs.collapse",c="shown.bs.collapse",f="hide.bs.collapse",h="hidden.bs.collapse",p="click.bs.collapse.data-api",g="show",v="collapse",m="collapsing",y="collapsed",b="width",_={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},w=function(){function r(t,n){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(n),this._triggerArray=e.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var r=[].slice.call(document.querySelectorAll(_.DATA_TOGGLE)),i=0,a=r.length;i<a;i++){var o=r[i],s=l.getSelectorFromElement(o),u=[].slice.call(document.querySelectorAll(s)).filter(function(e){return e===t});null!==s&&u.length>0&&(this._selector=s,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var p=r.prototype;return p.toggle=function(){e(this._element).hasClass(g)?this.hide():this.show()},p.show=function(){var t,i,a=this;if(!(this._isTransitioning||e(this._element).hasClass(g)||(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(_.ACTIVES)).filter(function(e){return e.getAttribute("data-parent")===a._config.parent})).length&&(t=null),t&&(i=e(t).not(this._selector).data(n))&&i._isTransitioning))){var o=e.Event(d);if(e(this._element).trigger(o),!o.isDefaultPrevented()){t&&(r._jQueryInterface.call(e(t).not(this._selector),"hide"),i||e(t).data(n,null));var s=this._getDimension();e(this._element).removeClass(v).addClass(m),this._element.style[s]=0,this._triggerArray.length&&e(this._triggerArray).removeClass(y).attr("aria-expanded",!0),this.setTransitioning(!0);var u="scroll"+(s[0].toUpperCase()+s.slice(1)),f=l.getTransitionDurationFromElement(this._element);e(this._element).one(l.TRANSITION_END,function(){e(a._element).removeClass(m).addClass(v).addClass(g),a._element.style[s]="",a.setTransitioning(!1),e(a._element).trigger(c)}).emulateTransitionEnd(f),this._element.style[s]=this._element[u]+"px"}}},p.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass(g)){var n=e.Event(f);if(e(this._element).trigger(n),!n.isDefaultPrevented()){var r=this._getDimension();this._element.style[r]=this._element.getBoundingClientRect()[r]+"px",l.reflow(this._element),e(this._element).addClass(m).removeClass(v).removeClass(g);var i=this._triggerArray.length;if(i>0)for(var a=0;a<i;a++){var o=this._triggerArray[a],s=l.getSelectorFromElement(o);null!==s&&(e([].slice.call(document.querySelectorAll(s))).hasClass(g)||e(o).addClass(y).attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[r]="";var u=l.getTransitionDurationFromElement(this._element);e(this._element).one(l.TRANSITION_END,function(){t.setTransitioning(!1),e(t._element).removeClass(m).addClass(v).trigger(h)}).emulateTransitionEnd(u)}}},p.setTransitioning=function(e){this._isTransitioning=e},p.dispose=function(){e.removeData(this._element,n),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},p._getConfig=function(e){return(e=o({},a,e)).toggle=Boolean(e.toggle),l.typeCheckConfig(t,e,u),e},p._getDimension=function(){return e(this._element).hasClass(b)?b:"height"},p._getParent=function(){var t=this,n=null;l.isElement(this._config.parent)?(n=this._config.parent,void 0!==this._config.parent.jquery&&(n=this._config.parent[0])):n=document.querySelector(this._config.parent);var i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',a=[].slice.call(n.querySelectorAll(i));return e(a).each(function(e,n){t._addAriaAndCollapsedClass(r._getTargetFromElement(n),[n])}),n},p._addAriaAndCollapsedClass=function(t,n){if(t){var r=e(t).hasClass(g);n.length&&e(n).toggleClass(y,!r).attr("aria-expanded",r)}},r._getTargetFromElement=function(e){var t=l.getSelectorFromElement(e);return t?document.querySelector(t):null},r._jQueryInterface=function(t){return this.each(function(){var i=e(this),l=i.data(n),u=o({},a,i.data(),"object"===(void 0===t?"undefined":s(t))&&t?t:{});if(!l&&u.toggle&&/show|hide/.test(t)&&(u.toggle=!1),l||(l=new r(this,u),i.data(n,l)),"string"==typeof t){if(void 0===l[t])throw new TypeError('No method named "'+t+'"');l[t]()}})},i(r,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return a}}]),r}();return e(document).on(p,_.DATA_TOGGLE,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var r=e(this),i=l.getSelectorFromElement(this),a=[].slice.call(document.querySelectorAll(i));e(a).each(function(){var t=e(this),i=t.data(n)?"toggle":r.data();w._jQueryInterface.call(t,i)})}),e.fn[t]=w._jQueryInterface,e.fn[t].Constructor=w,e.fn[t].noConflict=function(){return e.fn[t]=r,w._jQueryInterface},w}(t),h=function(e){var t="dropdown",r="bs.dropdown",a="."+r,u=e.fn[t],d=new RegExp("38|40|27"),c={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click.bs.dropdown.data-api",KEYDOWN_DATA_API:"keydown.bs.dropdown.data-api",KEYUP_DATA_API:"keyup.bs.dropdown.data-api"},f="disabled",h="show",p="dropdown-menu-right",g='[data-toggle="dropdown"]',v=".dropdown-menu",m={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},y={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},b=function(){function u(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var b=u.prototype;return b.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass(f)){var t=u._getParentFromElement(this._element),r=e(this._menu).hasClass(h);if(u._clearMenus(),!r){var i={relatedTarget:this._element},a=e.Event(c.SHOW,i);if(e(t).trigger(a),!a.isDefaultPrevented()){if(!this._inNavbar){if(void 0===n)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");var o=this._element;"parent"===this._config.reference?o=t:l.isElement(this._config.reference)&&(o=this._config.reference,void 0!==this._config.reference.jquery&&(o=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(t).addClass("position-static"),this._popper=new n(o,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(t).closest(".navbar-nav").length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass(h),e(t).toggleClass(h).trigger(e.Event(c.SHOWN,i))}}}},b.dispose=function(){e.removeData(this._element,r),e(this._element).off(a),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},b.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},b._addEventListeners=function(){var t=this;e(this._element).on(c.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},b._getConfig=function(n){return n=o({},this.constructor.Default,e(this._element).data(),n),l.typeCheckConfig(t,n,this.constructor.DefaultType),n},b._getMenuElement=function(){if(!this._menu){var e=u._getParentFromElement(this._element);e&&(this._menu=e.querySelector(v))}return this._menu},b._getPlacement=function(){var t=e(this._element.parentNode),n="bottom-start";return t.hasClass("dropup")?(n="top-start",e(this._menu).hasClass(p)&&(n="top-end")):t.hasClass("dropright")?n="right-start":t.hasClass("dropleft")?n="left-start":e(this._menu).hasClass(p)&&(n="bottom-end"),n},b._detectNavbar=function(){return e(this._element).closest(".navbar").length>0},b._getPopperConfig=function(){var e=this,t={};"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=o({},t.offsets,e._config.offset(t.offsets)||{}),t}:t.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:t,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(n.modifiers.applyStyle={enabled:!1}),n},u._jQueryInterface=function(t){return this.each(function(){var n=e(this).data(r),i="object"===(void 0===t?"undefined":s(t))?t:null;if(n||(n=new u(this,i),e(this).data(r,n)),"string"==typeof t){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},u._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var n=[].slice.call(document.querySelectorAll(g)),i=0,a=n.length;i<a;i++){var o=u._getParentFromElement(n[i]),s=e(n[i]).data(r),l={relatedTarget:n[i]};if(t&&"click"===t.type&&(l.clickEvent=t),s){var d=s._menu;if(e(o).hasClass(h)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&e.contains(o,t.target))){var f=e.Event(c.HIDE,l);e(o).trigger(f),f.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),n[i].setAttribute("aria-expanded","false"),e(d).removeClass(h),e(o).removeClass(h).trigger(e.Event(c.HIDDEN,l)))}}}},u._getParentFromElement=function(e){var t,n=l.getSelectorFromElement(e);return n&&(t=document.querySelector(n)),t||e.parentNode},u._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||e(t.target).closest(v).length)):d.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!e(this).hasClass(f))){var n=u._getParentFromElement(this),r=e(n).hasClass(h);if((r||27===t.which&&32===t.which)&&(!r||27!==t.which&&32!==t.which)){var i=[].slice.call(n.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"));if(0!==i.length){var a=i.indexOf(t.target);38===t.which&&a>0&&a--,40===t.which&&a<i.length-1&&a++,a<0&&(a=0),i[a].focus()}}else{if(27===t.which){var o=n.querySelector(g);e(o).trigger("focus")}e(this).trigger("click")}}},i(u,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return m}},{key:"DefaultType",get:function(){return y}}]),u}();return e(document).on(c.KEYDOWN_DATA_API,g,b._dataApiKeydownHandler).on(c.KEYDOWN_DATA_API,v,b._dataApiKeydownHandler).on(c.CLICK_DATA_API+" "+c.KEYUP_DATA_API,b._clearMenus).on(c.CLICK_DATA_API,g,function(t){t.preventDefault(),t.stopPropagation(),b._jQueryInterface.call(e(this),"toggle")}).on(c.CLICK_DATA_API,".dropdown form",function(e){e.stopPropagation()}),e.fn[t]=b._jQueryInterface,e.fn[t].Constructor=b,e.fn[t].noConflict=function(){return e.fn[t]=u,b._jQueryInterface},b}(t),p=function(e){var t=e.fn.modal,n={backdrop:!0,keyboard:!0,focus:!0,show:!0},r={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},a="hide.bs.modal",u="hidden.bs.modal",d="show.bs.modal",c="shown.bs.modal",f="focusin.bs.modal",h="resize.bs.modal",p="click.dismiss.bs.modal",g="keydown.dismiss.bs.modal",v="mouseup.dismiss.bs.modal",m="mousedown.dismiss.bs.modal",y="click.bs.modal.data-api",b="modal-open",_="fade",w="show",E={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},T=function(){function t(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(E.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._scrollbarWidth=0}var y=t.prototype;return y.toggle=function(e){return this._isShown?this.hide():this.show(e)},y.show=function(t){var n=this;if(!this._isTransitioning&&!this._isShown){e(this._element).hasClass(_)&&(this._isTransitioning=!0);var r=e.Event(d,{relatedTarget:t});e(this._element).trigger(r),this._isShown||r.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),e(document.body).addClass(b),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on(p,E.DATA_DISMISS,function(e){return n.hide(e)}),e(this._dialog).on(m,function(){e(n._element).one(v,function(t){e(t.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(t)}))}},y.hide=function(t){var n=this;if(t&&t.preventDefault(),!this._isTransitioning&&this._isShown){var r=e.Event(a);if(e(this._element).trigger(r),this._isShown&&!r.isDefaultPrevented()){this._isShown=!1;var i=e(this._element).hasClass(_);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off(f),e(this._element).removeClass(w),e(this._element).off(p),e(this._dialog).off(m),i){var o=l.getTransitionDurationFromElement(this._element);e(this._element).one(l.TRANSITION_END,function(e){return n._hideModal(e)}).emulateTransitionEnd(o)}else this._hideModal()}}},y.dispose=function(){e.removeData(this._element,"bs.modal"),e(window,document,this._element,this._backdrop).off(".bs.modal"),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},y.handleUpdate=function(){this._adjustDialog()},y._getConfig=function(e){return e=o({},n,e),l.typeCheckConfig("modal",e,r),e},y._showElement=function(t){var n=this,r=e(this._element).hasClass(_);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,r&&l.reflow(this._element),e(this._element).addClass(w),this._config.focus&&this._enforceFocus();var i=e.Event(c,{relatedTarget:t}),a=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,e(n._element).trigger(i)};if(r){var o=l.getTransitionDurationFromElement(this._element);e(this._dialog).one(l.TRANSITION_END,a).emulateTransitionEnd(o)}else a()},y._enforceFocus=function(){var t=this;e(document).off(f).on(f,function(n){document!==n.target&&t._element!==n.target&&0===e(t._element).has(n.target).length&&t._element.focus()})},y._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on(g,function(e){27===e.which&&(e.preventDefault(),t.hide())}):this._isShown||e(this._element).off(g)},y._setResizeEvent=function(){var t=this;this._isShown?e(window).on(h,function(e){return t.handleUpdate(e)}):e(window).off(h)},y._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){e(document.body).removeClass(b),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger(u)})},y._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},y._showBackdrop=function(t){var n=this,r=e(this._element).hasClass(_)?_:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",r&&this._backdrop.classList.add(r),e(this._backdrop).appendTo(document.body),e(this._element).on(p,function(e){n._ignoreBackdropClick?n._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),r&&l.reflow(this._backdrop),e(this._backdrop).addClass(w),!t)return;if(!r)return void t();var i=l.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(l.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass(w);var a=function(){n._removeBackdrop(),t&&t()};if(e(this._element).hasClass(_)){var o=l.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(l.TRANSITION_END,a).emulateTransitionEnd(o)}else a()}else t&&t()},y._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},y._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},y._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},y._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var n=[].slice.call(document.querySelectorAll(E.FIXED_CONTENT)),r=[].slice.call(document.querySelectorAll(E.STICKY_CONTENT));e(n).each(function(n,r){var i=r.style.paddingRight,a=e(r).css("padding-right");e(r).data("padding-right",i).css("padding-right",parseFloat(a)+t._scrollbarWidth+"px")}),e(r).each(function(n,r){var i=r.style.marginRight,a=e(r).css("margin-right");e(r).data("margin-right",i).css("margin-right",parseFloat(a)-t._scrollbarWidth+"px")});var i=document.body.style.paddingRight,a=e(document.body).css("padding-right");e(document.body).data("padding-right",i).css("padding-right",parseFloat(a)+this._scrollbarWidth+"px")}},y._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(E.FIXED_CONTENT));e(t).each(function(t,n){var r=e(n).data("padding-right");e(n).removeData("padding-right"),n.style.paddingRight=r||""});var n=[].slice.call(document.querySelectorAll(""+E.STICKY_CONTENT));e(n).each(function(t,n){var r=e(n).data("margin-right");void 0!==r&&e(n).css("margin-right",r).removeData("margin-right")});var r=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=r||""},y._getScrollbarWidth=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},t._jQueryInterface=function(r,i){return this.each(function(){var a=e(this).data("bs.modal"),l=o({},n,e(this).data(),"object"===(void 0===r?"undefined":s(r))&&r?r:{});if(a||(a=new t(this,l),e(this).data("bs.modal",a)),"string"==typeof r){if(void 0===a[r])throw new TypeError('No method named "'+r+'"');a[r](i)}else l.show&&a.show(i)})},i(t,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return n}}]),t}();return e(document).on(y,E.DATA_TOGGLE,function(t){var n,r=this,i=l.getSelectorFromElement(this);i&&(n=document.querySelector(i));var a=e(n).data("bs.modal")?"toggle":o({},e(n).data(),e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var s=e(n).one(d,function(t){t.isDefaultPrevented()||s.one(u,function(){e(r).is(":visible")&&r.focus()})});T._jQueryInterface.call(e(n),a,this)}),e.fn.modal=T._jQueryInterface,e.fn.modal.Constructor=T,e.fn.modal.noConflict=function(){return e.fn.modal=t,T._jQueryInterface},T}(t),g=function(e){var t="tooltip",r=".bs.tooltip",a=e.fn[t],u=new RegExp("(^|\\s)bs-tooltip\\S+","g"),d={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},c={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},f={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},h="show",p="out",g={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,INSERTED:"inserted"+r,CLICK:"click"+r,FOCUSIN:"focusin"+r,FOCUSOUT:"focusout"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r},v="fade",m="show",y="hover",b="focus",_=function(){function a(e,t){if(void 0===n)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var _=a.prototype;return _.enable=function(){this._isEnabled=!0},_.disable=function(){this._isEnabled=!1},_.toggleEnabled=function(){this._isEnabled=!this._isEnabled},_.toggle=function(t){if(this._isEnabled)if(t){var n=this.constructor.DATA_KEY,r=e(t.currentTarget).data(n);r||(r=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,r)),r._activeTrigger.click=!r._activeTrigger.click,r._isWithActiveTrigger()?r._enter(null,r):r._leave(null,r)}else{if(e(this.getTipElement()).hasClass(m))return void this._leave(null,this);this._enter(null,this)}},_.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},_.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var r=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(r);var i=e.contains(this.element.ownerDocument.documentElement,this.element);if(r.isDefaultPrevented()||!i)return;var a=this.getTipElement(),o=l.getUID(this.constructor.NAME);a.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&e(a).addClass(v);var s="function"==typeof this.config.placement?this.config.placement.call(this,a,this.element):this.config.placement,u=this._getAttachment(s);this.addAttachmentClass(u);var d=!1===this.config.container?document.body:e(document).find(this.config.container);e(a).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(a).appendTo(d),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n(this.element,a,{placement:u,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){t._handlePopperPlacementChange(e)}}),e(a).addClass(m),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var c=function(){t.config.animation&&t._fixTransition();var n=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),n===p&&t._leave(null,t)};if(e(this.tip).hasClass(v)){var f=l.getTransitionDurationFromElement(this.tip);e(this.tip).one(l.TRANSITION_END,c).emulateTransitionEnd(f)}else c()}},_.hide=function(t){var n=this,r=this.getTipElement(),i=e.Event(this.constructor.Event.HIDE),a=function(){n._hoverState!==h&&r.parentNode&&r.parentNode.removeChild(r),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),e(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()};if(e(this.element).trigger(i),!i.isDefaultPrevented()){if(e(r).removeClass(m),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger.click=!1,this._activeTrigger[b]=!1,this._activeTrigger[y]=!1,e(this.tip).hasClass(v)){var o=l.getTransitionDurationFromElement(r);e(r).one(l.TRANSITION_END,a).emulateTransitionEnd(o)}else a();this._hoverState=""}},_.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},_.isWithContent=function(){return Boolean(this.getTitle())},_.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-tooltip-"+t)},_.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},_.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(".tooltip-inner")),this.getTitle()),e(t).removeClass(v+" "+m)},_.setElementContent=function(t,n){var r=this.config.html;"object"===(void 0===n?"undefined":s(n))&&(n.nodeType||n.jquery)?r?e(n).parent().is(t)||t.empty().append(n):t.text(e(n).text()):t[r?"html":"text"](n)},_.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},_._getAttachment=function(e){return c[e.toUpperCase()]},_._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach(function(n){if("click"===n)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if("manual"!==n){var r=n===y?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,i=n===y?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(r,t.config.selector,function(e){return t._enter(e)}).on(i,t.config.selector,function(e){return t._leave(e)})}e(t.element).closest(".modal").on("hide.bs.modal",function(){return t.hide()})}),this.config.selector?this.config=o({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},_._fixTitle=function(){var e=s(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},_._enter=function(t,n){var r=this.constructor.DATA_KEY;(n=n||e(t.currentTarget).data(r))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,n)),t&&(n._activeTrigger["focusin"===t.type?b:y]=!0),e(n.getTipElement()).hasClass(m)||n._hoverState===h?n._hoverState=h:(clearTimeout(n._timeout),n._hoverState=h,n.config.delay&&n.config.delay.show?n._timeout=setTimeout(function(){n._hoverState===h&&n.show()},n.config.delay.show):n.show())},_._leave=function(t,n){var r=this.constructor.DATA_KEY;(n=n||e(t.currentTarget).data(r))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,n)),t&&(n._activeTrigger["focusout"===t.type?b:y]=!1),n._isWithActiveTrigger()||(clearTimeout(n._timeout),n._hoverState=p,n.config.delay&&n.config.delay.hide?n._timeout=setTimeout(function(){n._hoverState===p&&n.hide()},n.config.delay.hide):n.hide())},_._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},_._getConfig=function(n){return"number"==typeof(n=o({},this.constructor.Default,e(this.element).data(),"object"===(void 0===n?"undefined":s(n))&&n?n:{})).delay&&(n.delay={show:n.delay,hide:n.delay}),"number"==typeof n.title&&(n.title=n.title.toString()),"number"==typeof n.content&&(n.content=n.content.toString()),l.typeCheckConfig(t,n,this.constructor.DefaultType),n},_._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},_._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(u);null!==n&&n.length&&t.removeClass(n.join(""))},_._handlePopperPlacementChange=function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},_._fixTransition=function(){var t=this.getTipElement(),n=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass(v),this.config.animation=!1,this.hide(),this.show(),this.config.animation=n)},a._jQueryInterface=function(t){return this.each(function(){var n=e(this).data("bs.tooltip"),r="object"===(void 0===t?"undefined":s(t))&&t;if((n||!/dispose|hide/.test(t))&&(n||(n=new a(this,r),e(this).data("bs.tooltip",n)),"string"==typeof t)){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},i(a,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return f}},{key:"NAME",get:function(){return t}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return g}},{key:"EVENT_KEY",get:function(){return r}},{key:"DefaultType",get:function(){return d}}]),a}();return e.fn[t]=_._jQueryInterface,e.fn[t].Constructor=_,e.fn[t].noConflict=function(){return e.fn[t]=a,_._jQueryInterface},_}(t),v=function(e){var t="popover",n=".bs.popover",r=e.fn[t],a=new RegExp("(^|\\s)bs-popover\\S+","g"),l=o({},g.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),u=o({},g.DefaultType,{content:"(string|element|function)"}),d={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,INSERTED:"inserted"+n,CLICK:"click"+n,FOCUSIN:"focusin"+n,FOCUSOUT:"focusout"+n,MOUSEENTER:"mouseenter"+n,MOUSELEAVE:"mouseleave"+n},c=function(r){var o,c;function f(){return r.apply(this,arguments)||this}c=r,(o=f).prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c;var h=f.prototype;return h.isWithContent=function(){return this.getTitle()||this._getContent()},h.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-popover-"+t)},h.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},h.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var n=this._getContent();"function"==typeof n&&(n=n.call(this.element)),this.setElementContent(t.find(".popover-body"),n),t.removeClass("fade show")},h._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},h._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(a);null!==n&&n.length>0&&t.removeClass(n.join(""))},f._jQueryInterface=function(t){return this.each(function(){var n=e(this).data("bs.popover"),r="object"===(void 0===t?"undefined":s(t))?t:null;if((n||!/destroy|hide/.test(t))&&(n||(n=new f(this,r),e(this).data("bs.popover",n)),"string"==typeof t)){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t]()}})},i(f,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return l}},{key:"NAME",get:function(){return t}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return d}},{key:"EVENT_KEY",get:function(){return n}},{key:"DefaultType",get:function(){return u}}]),f}(g);return e.fn[t]=c._jQueryInterface,e.fn[t].Constructor=c,e.fn[t].noConflict=function(){return e.fn[t]=r,c._jQueryInterface},c}(t),m=function(e){var t="scrollspy",n=e.fn[t],r={offset:10,method:"auto",target:""},a={offset:"number",method:"string",target:"(string|element)"},u={ACTIVATE:"activate.bs.scrollspy",SCROLL:"scroll.bs.scrollspy",LOAD_DATA_API:"load.bs.scrollspy.data-api"},d="active",c={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},f="position",h=function(){function n(t,n){var r=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(n),this._selector=this._config.target+" "+c.NAV_LINKS+","+this._config.target+" "+c.LIST_ITEMS+","+this._config.target+" "+c.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on(u.SCROLL,function(e){return r._process(e)}),this.refresh(),this._process()}var h=n.prototype;return h.refresh=function(){var t=this,n=this._scrollElement===this._scrollElement.window?"offset":f,r="auto"===this._config.method?n:this._config.method,i=r===f?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var n,a=l.getSelectorFromElement(t);if(a&&(n=document.querySelector(a)),n){var o=n.getBoundingClientRect();if(o.width||o.height)return[e(n)[r]().top+i,a]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},h.dispose=function(){e.removeData(this._element,"bs.scrollspy"),e(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},h._getConfig=function(n){if("string"!=typeof(n=o({},r,"object"===(void 0===n?"undefined":s(n))&&n?n:{})).target){var i=e(n.target).attr("id");i||(i=l.getUID(t),e(n.target).attr("id",i)),n.target="#"+i}return l.typeCheckConfig(t,n,a),n},h._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},h._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},h._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},h._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;)this._activeTarget!==this._targets[i]&&e>=this._offsets[i]&&(void 0===this._offsets[i+1]||e<this._offsets[i+1])&&this._activate(this._targets[i])}},h._activate=function(t){this._activeTarget=t,this._clear();var n=this._selector.split(",");n=n.map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'});var r=e([].slice.call(document.querySelectorAll(n.join(","))));r.hasClass("dropdown-item")?(r.closest(c.DROPDOWN).find(c.DROPDOWN_TOGGLE).addClass(d),r.addClass(d)):(r.addClass(d),r.parents(c.NAV_LIST_GROUP).prev(c.NAV_LINKS+", "+c.LIST_ITEMS).addClass(d),r.parents(c.NAV_LIST_GROUP).prev(c.NAV_ITEMS).children(c.NAV_LINKS).addClass(d)),e(this._scrollElement).trigger(u.ACTIVATE,{relatedTarget:t})},h._clear=function(){var t=[].slice.call(document.querySelectorAll(this._selector));e(t).filter(c.ACTIVE).removeClass(d)},n._jQueryInterface=function(t){return this.each(function(){var r=e(this).data("bs.scrollspy"),i="object"===(void 0===t?"undefined":s(t))&&t;if(r||(r=new n(this,i),e(this).data("bs.scrollspy",r)),"string"==typeof t){if(void 0===r[t])throw new TypeError('No method named "'+t+'"');r[t]()}})},i(n,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return r}}]),n}();return e(window).on(u.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(c.DATA_SPY)),n=t.length;n--;){var r=e(t[n]);h._jQueryInterface.call(r,r.data())}}),e.fn[t]=h._jQueryInterface,e.fn[t].Constructor=h,e.fn[t].noConflict=function(){return e.fn[t]=n,h._jQueryInterface},h}(t),y=function(e){var t=e.fn.tab,n="hide.bs.tab",r="hidden.bs.tab",a="show.bs.tab",o="shown.bs.tab",s="click.bs.tab.data-api",u="active",d="show",c=".active",f="> li > .active",h=function(){function t(e){this._element=e}var s=t.prototype;return s.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass(u)||e(this._element).hasClass("disabled"))){var i,s,d=e(this._element).closest(".nav, .list-group")[0],h=l.getSelectorFromElement(this._element);if(d){var p="UL"===d.nodeName?f:c;s=(s=e.makeArray(e(d).find(p)))[s.length-1]}var g=e.Event(n,{relatedTarget:this._element}),v=e.Event(a,{relatedTarget:s});if(s&&e(s).trigger(g),e(this._element).trigger(v),!v.isDefaultPrevented()&&!g.isDefaultPrevented()){h&&(i=document.querySelector(h)),this._activate(this._element,d);var m=function(){var n=e.Event(r,{relatedTarget:t._element}),i=e.Event(o,{relatedTarget:s});e(s).trigger(n),e(t._element).trigger(i)};i?this._activate(i,i.parentNode,m):m()}}},s.dispose=function(){e.removeData(this._element,"bs.tab"),this._element=null},s._activate=function(t,n,r){var i=this,a=("UL"===n.nodeName?e(n).find(f):e(n).children(c))[0],o=r&&a&&e(a).hasClass("fade"),s=function(){return i._transitionComplete(t,a,r)};if(a&&o){var u=l.getTransitionDurationFromElement(a);e(a).one(l.TRANSITION_END,s).emulateTransitionEnd(u)}else s()},s._transitionComplete=function(t,n,r){if(n){e(n).removeClass(d+" "+u);var i=e(n.parentNode).find("> .dropdown-menu .active")[0];i&&e(i).removeClass(u),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(e(t).addClass(u),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),l.reflow(t),e(t).addClass(d),t.parentNode&&e(t.parentNode).hasClass("dropdown-menu")){var a=e(t).closest(".dropdown")[0];if(a){var o=[].slice.call(a.querySelectorAll(".dropdown-toggle"));e(o).addClass(u)}t.setAttribute("aria-expanded",!0)}r&&r()},t._jQueryInterface=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");if(i||(i=new t(this),r.data("bs.tab",i)),"string"==typeof n){if(void 0===i[n])throw new TypeError('No method named "'+n+'"');i[n]()}})},i(t,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),t}();return e(document).on(s,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(t){t.preventDefault(),h._jQueryInterface.call(e(this),"show")}),e.fn.tab=h._jQueryInterface,e.fn.tab.Constructor=h,e.fn.tab.noConflict=function(){return e.fn.tab=t,h._jQueryInterface},h}(t);!function(e){if(void 0===e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(t),e.Util=l,e.Alert=u,e.Button=d,e.Carousel=c,e.Collapse=f,e.Dropdown=h,e.Modal=p,e.Popover=v,e.Scrollspy=m,e.Tab=y,e.Tooltip=g,Object.defineProperty(e,"__esModule",{value:!0})},"object"===s(t)&&void 0!==e?o(t,n(0),n(2)):(i=[t,n(0),n(2)],void 0===(a="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=a))},,,function(e,t,n){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var n=3;try{n=parseInt(e.fn.dropdown.Constructor.VERSION,10)}catch(e){}var r={3:{buttonsClass:"default",iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggleOff:"glyphicon-list-alt icon-list-alt",toggleOn:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th",detailOpen:"glyphicon-plus icon-plus",detailClose:"glyphicon-minus icon-minus",fullscreen:"glyphicon-fullscreen"},pullClass:"pull",toobarDropdowHtml:['<ul class="dropdown-menu" role="menu">',"</ul>"],toobarDropdowItemHtml:'<li role="menuitem"><label>%s</label></li>',pageDropdownHtml:['<ul class="dropdown-menu" role="menu">',"</ul>"],pageDropdownItemHtml:'<li role="menuitem" class="%s"><a href="#">%s</a></li>'},4:{buttonsClass:"secondary",iconsPrefix:"fa",icons:{paginationSwitchDown:"fa-toggle-down",paginationSwitchUp:"fa-toggle-up",refresh:"fa-refresh",toggleOff:"fa-toggle-off",toggleOn:"fa-toggle-on",columns:"fa-th-list",detailOpen:"fa-plus",detailClose:"fa-minus",fullscreen:"fa-arrows-alt"},pullClass:"float",toobarDropdowHtml:['<div class="dropdown-menu dropdown-menu-right">',"</div>"],toobarDropdowItemHtml:'<label class="dropdown-item">%s</label>',pageDropdownHtml:['<div class="dropdown-menu">',"</div>"],pageDropdownItemHtml:'<a class="dropdown-item %s" href="#">%s</a>'}}[n],i=null,a=function(e){var t=arguments,n=!0,r=1;return e=e.replace(/%s/g,function(){var e=t[r++];return void 0===e?(n=!1,""):e}),n?e:""},o=function(){if(null===i){var t,n,r=e("<p/>").addClass("fixed-table-scroll-inner"),a=e("<div/>").addClass("fixed-table-scroll-outer");a.append(r),e("body").append(a),t=r[0].offsetWidth,a.css("overflow","scroll"),t===(n=r[0].offsetWidth)&&(n=a[0].clientWidth),a.remove(),i=t-n}return i},s=function(n,r,i,o){var s=r;if("string"==typeof r){var l=r.split(".");l.length>1?(s=window,e.each(l,function(e,t){s=s[t]})):s=window[r]}return"object"===(void 0===s?"undefined":t(s))?s:"function"==typeof s?s.apply(n,i||[]):!s&&"string"==typeof r&&a.apply(this,[r].concat(i))?a.apply(this,[r].concat(i)):o},l=function(t,n,r){var i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},a=i(t),o=i(n),s="";if(r&&a.length!==o.length)return!1;for(var l=0;l<a.length;l++)if(s=a[l],e.inArray(s,o)>-1&&t[s]!==n[s])return!1;return!0},u=function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;"):e},d=function(e){for(var t in e){var n=t.split(/(?=[A-Z])/).join("-").toLowerCase();n!==t&&(e[n]=e[t],delete e[t])}return e},c=function(e,t,n){var r=e;if("string"!=typeof t||e.hasOwnProperty(t))return n?u(e[t]):e[t];var i=t.split(".");for(var a in i)i.hasOwnProperty(a)&&(r=r&&r[i[a]]);return n?u(r):r},f=function(){return!!(navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))},h=function(t,n){this.options=n,this.$el=e(t),this.$el_=this.$el.clone(),this.timeoutId_=0,this.timeoutFooter_=0,this.init()};h.DEFAULTS={classes:"table table-hover",sortClass:void 0,locale:void 0,height:void 0,undefinedText:"-",sortName:void 0,sortOrder:"asc",sortStable:!1,rememberOrder:!1,striped:!1,columns:[[]],data:[],totalField:"total",dataField:"rows",method:"get",url:void 0,ajax:void 0,cache:!0,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(e){return e},queryParamsType:"limit",responseHandler:function(e){return e},pagination:!1,onlyInfoPagination:!1,paginationLoop:!0,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationPreText:"&lsaquo;",paginationNextText:"&rsaquo;",search:!1,searchOnEnterKey:!1,strictSearch:!1,searchAlign:"right",selectItemName:"btSelectItem",showHeader:!0,showFooter:!1,showColumns:!1,showPaginationSwitch:!1,showRefresh:!1,showToggle:!1,showFullscreen:!1,smartDisplay:!0,escape:!1,minimumCountColumns:1,idField:void 0,uniqueId:void 0,cardView:!1,detailView:!1,detailFormatter:function(e,t){return""},detailFilter:function(e,t){return!0},trimOnSearch:!0,clickToSelect:!1,singleSelect:!1,toolbar:void 0,toolbarAlign:"left",buttonsToolbar:void 0,buttonsAlign:"right",checkboxHeader:!0,sortable:!0,silentSort:!0,maintainSelected:!1,searchTimeOut:500,searchText:"",iconSize:void 0,buttonsClass:r.buttonsClass,iconsPrefix:r.iconsPrefix,icons:r.icons,customSearch:e.noop,customSort:e.noop,ignoreClickToSelectOn:function(t){return e.inArray(t.tagName,["A","BUTTON"])},rowStyle:function(e,t){return{}},rowAttributes:function(e,t){return{}},footerStyle:function(e,t){return{}},onAll:function(e,t){return!1},onClickCell:function(e,t,n,r){return!1},onDblClickCell:function(e,t,n,r){return!1},onClickRow:function(e,t){return!1},onDblClickRow:function(e,t){return!1},onSort:function(e,t){return!1},onCheck:function(e){return!1},onUncheck:function(e){return!1},onCheckAll:function(e){return!1},onUncheckAll:function(e){return!1},onCheckSome:function(e){return!1},onUncheckSome:function(e){return!1},onLoadSuccess:function(e){return!1},onLoadError:function(e){return!1},onColumnSwitch:function(e,t){return!1},onPageChange:function(e,t){return!1},onSearch:function(e){return!1},onToggle:function(e){return!1},onPreBody:function(e){return!1},onPostBody:function(){return!1},onPostHeader:function(){return!1},onExpandRow:function(e,t,n){return!1},onCollapseRow:function(e,t){return!1},onRefreshOptions:function(e){return!1},onRefresh:function(e){return!1},onResetView:function(){return!1},onScrollBody:function(){return!1}},(h.LOCALES={})["en-US"]=h.LOCALES.en={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(e){return a("%s rows per page",e)},formatShowingRows:function(e,t,n){return a("Showing %s to %s of %s rows",e,t,n)},formatDetailPagination:function(e){return a("Showing %s rows",e)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatFullscreen:function(){return"Fullscreen"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}},e.extend(h.DEFAULTS,h.LOCALES["en-US"]),h.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,titleTooltip:void 0,class:void 0,align:void 0,halign:void 0,falign:void 0,valign:void 0,width:void 0,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:void 0,footerFormatter:void 0,events:void 0,sorter:void 0,sortName:void 0,cellStyle:void 0,searchable:!0,searchFormatter:!0,cardVisible:!0,escape:!1,showSelectTitle:!1},h.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView","refresh.bs.table":"onRefresh","scroll-body.bs.table":"onScrollBody"},h.prototype.init=function(){this.initLocale(),this.initContainer(),this.initTable(),this.initHeader(),this.initData(),this.initHiddenRows(),this.initFooter(),this.initToolbar(),this.initPagination(),this.initBody(),this.initSearchText(),this.initServer()},h.prototype.initLocale=function(){if(this.options.locale){var t=this.options.locale.split(/-|_/);t[0].toLowerCase(),t[1]&&t[1].toUpperCase(),e.fn.bootstrapTable.locales[this.options.locale]?e.extend(this.options,e.fn.bootstrapTable.locales[this.options.locale]):e.fn.bootstrapTable.locales[t.join("-")]?e.extend(this.options,e.fn.bootstrapTable.locales[t.join("-")]):e.fn.bootstrapTable.locales[t[0]]&&e.extend(this.options,e.fn.bootstrapTable.locales[t[0]])}},h.prototype.initContainer=function(){this.$container=e(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"></div>',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination" style="clear: both;"></div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),"</div>","</div>",'<div class="fixed-table-footer"><table><tr></tr></table></div>',"</div>","bottom"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination"></div>':"","</div>"].join("")),this.$container.insertAfter(this.$el),this.$tableContainer=this.$container.find(".fixed-table-container"),this.$tableHeader=this.$container.find(".fixed-table-header"),this.$tableBody=this.$container.find(".fixed-table-body"),this.$tableLoading=this.$container.find(".fixed-table-loading"),this.$tableFooter=this.$container.find(".fixed-table-footer"),this.options.buttonsToolbar?this.$toolbar=e("body").find(this.options.buttonsToolbar):this.$toolbar=this.$container.find(".fixed-table-toolbar"),this.$pagination=this.$container.find(".fixed-table-pagination"),this.$tableBody.append(this.$el),this.$container.after('<div class="clearfix"></div>'),this.$el.addClass(this.options.classes),this.options.striped&&this.$el.addClass("table-striped"),-1!==e.inArray("table-no-bordered",this.options.classes.split(" "))&&this.$tableContainer.addClass("table-no-bordered")},h.prototype.initTable=function(){var t=this,n=[],r=[];if(this.$header=this.$el.find(">thead"),this.$header.length||(this.$header=e("<thead></thead>").appendTo(this.$el)),this.$header.find("tr").each(function(){var t=[];e(this).find("th").each(function(){void 0!==e(this).data("field")&&e(this).data("field",e(this).data("field")+""),t.push(e.extend({},{title:e(this).html(),class:e(this).attr("class"),titleTooltip:e(this).attr("title"),rowspan:e(this).attr("rowspan")?+e(this).attr("rowspan"):void 0,colspan:e(this).attr("colspan")?+e(this).attr("colspan"):void 0},e(this).data()))}),n.push(t)}),e.isArray(this.options.columns[0])||(this.options.columns=[this.options.columns]),this.options.columns=e.extend(!0,[],n,this.options.columns),this.columns=[],this.fieldsColumnsIndex=[],function(t){var n,r,i,a=0,o=[];for(n=0;n<t[0].length;n++)a+=t[0][n].colspan||1;for(n=0;n<t.length;n++)for(o[n]=[],r=0;r<a;r++)o[n][r]=!1;for(n=0;n<t.length;n++)for(r=0;r<t[n].length;r++){var s=t[n][r],l=s.rowspan||1,u=s.colspan||1,d=e.inArray(!1,o[n]);for(1===u&&(s.fieldIndex=d,void 0===s.field&&(s.field=d)),i=0;i<l;i++)o[n+i][d]=!0;for(i=0;i<u;i++)o[n][d+i]=!0}}(this.options.columns),e.each(this.options.columns,function(n,r){e.each(r,function(r,i){void 0!==(i=e.extend({},h.COLUMN_DEFAULTS,i)).fieldIndex&&(t.columns[i.fieldIndex]=i,t.fieldsColumnsIndex[i.field]=i.fieldIndex),t.options.columns[n][r]=i})}),!this.options.data.length){var i=[];this.$el.find(">tbody>tr").each(function(n){var a={};a._id=e(this).attr("id"),a._class=e(this).attr("class"),a._data=d(e(this).data()),e(this).find(">td").each(function(r){for(var o,s,l=e(this),u=+l.attr("colspan")||1,c=+l.attr("rowspan")||1;i[n]&&i[n][r];r++);for(o=r;o<r+u;o++)for(s=n;s<n+c;s++)i[s]||(i[s]=[]),i[s][o]=!0;var f=t.columns[r].field;a[f]=e(this).html(),a["_"+f+"_id"]=e(this).attr("id"),a["_"+f+"_class"]=e(this).attr("class"),a["_"+f+"_rowspan"]=e(this).attr("rowspan"),a["_"+f+"_colspan"]=e(this).attr("colspan"),a["_"+f+"_title"]=e(this).attr("title"),a["_"+f+"_data"]=d(e(this).data())}),r.push(a)}),this.options.data=r,r.length&&(this.fromHtml=!0)}},h.prototype.initHeader=function(){var t=this,n={},r=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]},e.each(this.options.columns,function(i,o){r.push("<tr>"),0===i&&!t.options.cardView&&t.options.detailView&&r.push(a('<th class="detail" rowspan="%s"><div class="fht-cell"></div></th>',t.options.columns.length)),e.each(o,function(e,i){var o,s,l="",d="",c=a(' class="%s"',i.class),f=(t.options.sortOrder||i.order,"px"),h=i.width;if(void 0===i.width||t.options.cardView||"string"==typeof i.width&&-1!==i.width.indexOf("%")&&(f="%"),i.width&&"string"==typeof i.width&&(h=i.width.replace("%","").replace("px","")),o=a("text-align: %s; ",i.halign?i.halign:i.align),s=a("text-align: %s; ",i.align),d=a("vertical-align: %s; ",i.valign),d+=a("width: %s; ",!i.checkbox&&!i.radio||h?h?h+f:void 0:i.showSelectTitle?void 0:"36px"),void 0!==i.fieldIndex){if(t.header.fields[i.fieldIndex]=i.field,t.header.styles[i.fieldIndex]=s+d,t.header.classes[i.fieldIndex]=c,t.header.formatters[i.fieldIndex]=i.formatter,t.header.events[i.fieldIndex]=i.events,t.header.sorters[i.fieldIndex]=i.sorter,t.header.sortNames[i.fieldIndex]=i.sortName,t.header.cellStyles[i.fieldIndex]=i.cellStyle,t.header.searchables[i.fieldIndex]=i.searchable,!i.visible)return;if(t.options.cardView&&!i.cardVisible)return;n[i.field]=i}r.push("<th"+a(' title="%s"',i.titleTooltip),i.checkbox||i.radio?a(' class="bs-checkbox %s"',i.class||""):c,a(' style="%s"',o+d),a(' rowspan="%s"',i.rowspan),a(' colspan="%s"',i.colspan),a(' data-field="%s"',i.field),0===e&&i.fieldIndex?" data-not-first-th":"",">"),r.push(a('<div class="th-inner %s">',t.options.sortable&&i.sortable?"sortable both":""));var p=l=t.options.escape?u(i.title):i.title;i.checkbox&&(l="",!t.options.singleSelect&&t.options.checkboxHeader&&(l='<input name="btSelectAll" type="checkbox" />'),t.header.stateField=i.field),i.radio&&(l="",t.header.stateField=i.field,t.options.singleSelect=!0),!l&&i.showSelectTitle&&(l+=p),r.push(l),r.push("</div>"),r.push('<div class="fht-cell"></div>'),r.push("</div>"),r.push("</th>")}),r.push("</tr>")}),this.$header.html(r.join("")),this.$header.find("th[data-field]").each(function(t){e(this).data(n[e(this).data("field")])}),this.$container.off("click",".th-inner").on("click",".th-inner",function(n){var r=e(this);if(t.options.detailView&&!r.parent().hasClass("bs-checkbox")&&r.closest(".bootstrap-table")[0]!==t.$container[0])return!1;t.options.sortable&&r.parent().data().sortable&&t.onSort(n)}),this.$header.children().children().off("keypress").on("keypress",function(n){t.options.sortable&&e(this).data().sortable&&13==(n.keyCode||n.which)&&t.onSort(n)}),e(window).off("resize.bootstrap-table"),!this.options.showHeader||this.options.cardView?(this.$header.hide(),this.$tableHeader.hide(),this.$tableLoading.css("top",0)):(this.$header.show(),this.$tableHeader.show(),this.$tableLoading.css("top",this.$header.outerHeight()+1),this.getCaret(),e(window).on("resize.bootstrap-table",e.proxy(this.resetWidth,this))),this.$selectAll=this.$header.find('[name="btSelectAll"]'),this.$selectAll.off("click").on("click",function(){var n=e(this).prop("checked");t[n?"checkAll":"uncheckAll"](),t.updateSelected()})},h.prototype.initFooter=function(){!this.options.showFooter||this.options.cardView?this.$tableFooter.hide():this.$tableFooter.show()},h.prototype.initData=function(e,t){this.options.data="append"===t?this.options.data.concat(e):"prepend"===t?[].concat(e).concat(this.options.data):e||this.options.data,this.data=this.options.data,"server"!==this.options.sidePagination&&this.initSort()},h.prototype.initSort=function(){var t=this,n=this.options.sortName,r="desc"===this.options.sortOrder?-1:1,i=e.inArray(this.options.sortName,this.header.fields),o=0;this.options.customSort===e.noop?-1!==i&&(this.options.sortStable&&e.each(this.data,function(e,t){t._position=e}),this.data.sort(function(a,o){t.header.sortNames[i]&&(n=t.header.sortNames[i]);var l=c(a,n,t.options.escape),u=c(o,n,t.options.escape),d=s(t.header,t.header.sorters[i],[l,u,a,o]);return void 0!==d?t.options.sortStable&&0===d?a._position-o._position:r*d:(void 0!==l&&null!==l||(l=""),void 0!==u&&null!==u||(u=""),t.options.sortStable&&l===u?(l=a._position,u=o._position,a._position-o._position):e.isNumeric(l)&&e.isNumeric(u)?(l=parseFloat(l))<(u=parseFloat(u))?-1*r:r:l===u?0:("string"!=typeof l&&(l=l.toString()),-1===l.localeCompare(u)?-1*r:r))}),void 0!==this.options.sortClass&&(clearTimeout(o),o=setTimeout(function(){t.$el.removeClass(t.options.sortClass);var e=t.$header.find(a('[data-field="%s"]',t.options.sortName).index()+1);t.$el.find(a("tr td:nth-child(%s)",e)).addClass(t.options.sortClass)},250))):this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder])},h.prototype.onSort=function(t){var n="keypress"===t.type?e(t.currentTarget):e(t.currentTarget).parent(),r=this.$header.find("th").eq(n.index());this.$header.add(this.$header_).find("span.order").remove(),this.options.sortName===n.data("field")?this.options.sortOrder="asc"===this.options.sortOrder?"desc":"asc":(this.options.sortName=n.data("field"),this.options.rememberOrder?this.options.sortOrder="asc"===n.data("order")?"desc":"asc":this.options.sortOrder=this.columns[this.fieldsColumnsIndex[n.data("field")]].order),this.trigger("sort",this.options.sortName,this.options.sortOrder),n.add(r).data("order",this.options.sortOrder),this.getCaret(),"server"!==this.options.sidePagination?(this.initSort(),this.initBody()):this.initServer(this.options.silentSort)},h.prototype.initToolbar=function(){var n,i,o=this,l=[],u=0,d=0;this.$toolbar.find(".bs-bars").children().length&&e("body").append(e(this.options.toolbar)),this.$toolbar.html(""),"string"!=typeof this.options.toolbar&&"object"!==t(this.options.toolbar)||e(a('<div class="bs-bars %s-%s"></div>',r.pullClass,this.options.toolbarAlign)).appendTo(this.$toolbar).append(e(this.options.toolbar)),l=[a('<div class="columns columns-%s btn-group %s-%s">',this.options.buttonsAlign,r.pullClass,this.options.buttonsAlign)],"string"==typeof this.options.icons&&(this.options.icons=s(null,this.options.icons)),this.options.showPaginationSwitch&&l.push(a('<button class="btn'+a(" btn-%s",this.options.buttonsClass)+a(" btn-%s",this.options.iconSize)+'" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">',this.options.formatPaginationSwitch()),a('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>"),this.options.showFullscreen&&this.$toolbar.find('button[name="fullscreen"]').off("click").on("click",e.proxy(this.toggleFullscreen,this)),this.options.showRefresh&&l.push(a('<button class="btn'+a(" btn-%s",this.options.buttonsClass)+a(" btn-%s",this.options.iconSize)+'" type="button" name="refresh" aria-label="refresh" title="%s">',this.options.formatRefresh()),a('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>"),this.options.showToggle&&l.push(a('<button class="btn'+a(" btn-%s",this.options.buttonsClass)+a(" btn-%s",this.options.iconSize)+'" type="button" name="toggle" aria-label="toggle" title="%s">',this.options.formatToggle()),a('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>"),this.options.showFullscreen&&l.push(a('<button class="btn'+a(" btn-%s",this.options.buttonsClass)+a(" btn-%s",this.options.iconSize)+'" type="button" name="fullscreen" aria-label="fullscreen" title="%s">',this.options.formatFullscreen()),a('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.fullscreen),"</button>"),this.options.showColumns&&(l.push(a('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" aria-label="columns" class="btn'+a(" btn-%s",this.options.buttonsClass)+a(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',a('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",r.toobarDropdowHtml[0]),e.each(this.columns,function(e,t){if(!t.radio&&!t.checkbox&&(!o.options.cardView||t.cardVisible)){var n=t.visible?' checked="checked"':"";t.switchable&&(l.push(a(r.toobarDropdowItemHtml,a('<input type="checkbox" data-field="%s" value="%s"%s> %s',t.field,e,n,t.title))),d++)}}),l.push(r.toobarDropdowHtml[1],"</div>")),l.push("</div>"),(this.showToolbar||l.length>2)&&this.$toolbar.append(l.join("")),this.options.showPaginationSwitch&&this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",e.proxy(this.togglePagination,this)),this.options.showRefresh&&this.$toolbar.find('button[name="refresh"]').off("click").on("click",e.proxy(this.refresh,this)),this.options.showToggle&&this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){o.toggleView()}),this.options.showColumns&&(n=this.$toolbar.find(".keep-open"),d<=this.options.minimumCountColumns&&n.find("input").prop("disabled",!0),n.find("li").off("click").on("click",function(e){e.stopImmediatePropagation()}),n.find("input").off("click").on("click",function(){var t=e(this);o.toggleColumn(e(this).val(),t.prop("checked"),!1),o.trigger("column-switch",e(this).data("field"),t.prop("checked"))})),this.options.search&&((l=[]).push(a('<div class="%s-%s search">',r.pullClass,this.options.searchAlign),a('<input class="form-control'+a(" input-%s",this.options.iconSize)+'" type="text" placeholder="%s">',this.options.formatSearch()),"</div>"),this.$toolbar.append(l.join("")),(i=this.$toolbar.find(".search input")).off("keyup drop blur").on("keyup drop blur",function(t){o.options.searchOnEnterKey&&13!==t.keyCode||e.inArray(t.keyCode,[37,38,39,40])>-1||(clearTimeout(u),u=setTimeout(function(){o.onSearch(t)},o.options.searchTimeOut))}),f()&&i.off("mouseup").on("mouseup",function(e){clearTimeout(u),u=setTimeout(function(){o.onSearch(e)},o.options.searchTimeOut)}))},h.prototype.onSearch=function(t){var n=e.trim(e(t.currentTarget).val());this.options.trimOnSearch&&e(t.currentTarget).val()!==n&&e(t.currentTarget).val(n),n!==this.searchText&&(this.searchText=n,this.options.searchText=n,this.options.pageNumber=1,this.initSearch(),t.firedByInitSearchText?"client"===this.options.sidePagination&&this.updatePagination():this.updatePagination(),this.trigger("search",n))},h.prototype.initSearch=function(){var t=this;if("server"!==this.options.sidePagination){if(this.options.customSearch!==e.noop)return void window[this.options.customSearch].apply(this,[this.searchText]);var n=this.searchText&&(this.options.escape?u(this.searchText):this.searchText).toLowerCase(),r=e.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=r?e.grep(this.options.data,function(t,n){for(var i in r)if(e.isArray(r[i])&&-1===e.inArray(t[i],r[i])||!e.isArray(r[i])&&t[i]!==r[i])return!1;return!0}):this.options.data,this.data=n?e.grep(this.data,function(r,i){for(var a=0;a<t.header.fields.length;a++)if(t.header.searchables[a]){var o,l=e.isNumeric(t.header.fields[a])?parseInt(t.header.fields[a],10):t.header.fields[a],u=t.columns[t.fieldsColumnsIndex[l]];if("string"==typeof l){o=r;for(var d=l.split("."),c=0;c<d.length;c++)null!=o[d[c]]&&(o=o[d[c]]);u&&u.searchFormatter&&(o=s(u,t.header.formatters[a],[o,r,i],o))}else o=r[l];if("string"==typeof o||"number"==typeof o)if(t.options.strictSearch){if((o+"").toLowerCase()===n)return!0}else if(-1!==(o+"").toLowerCase().indexOf(n))return!0}return!1}):this.data}},h.prototype.initPagination=function(){if(this.options.pagination){this.$pagination.show();var t,n,i,o,s,l,u,d=this,c=[],f=!1,h=this.getData(),p=this.options.pageList;if("server"!==this.options.sidePagination&&(this.options.totalRows=h.length),this.totalPages=0,this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows())this.options.pageSize=this.options.totalRows,f=!0;else if(this.options.pageSize===this.options.totalRows){var g="string"==typeof this.options.pageList?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;e.inArray(this.options.formatAllRows().toLowerCase(),g)>-1&&(f=!0)}this.totalPages=1+~~((this.options.totalRows-1)/this.options.pageSize),this.options.totalPages=this.totalPages}if(this.totalPages>0&&this.options.pageNumber>this.totalPages&&(this.options.pageNumber=this.totalPages),this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1,this.pageTo=this.options.pageNumber*this.options.pageSize,this.pageTo>this.options.totalRows&&(this.pageTo=this.options.totalRows),c.push(a('<div class="%s-%s pagination-detail">',r.pullClass,this.options.paginationDetailHAlign),'<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>"),!this.options.onlyInfoPagination){c.push('<span class="page-list">');var v=[a('<span class="btn-group %s">',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?"dropdown":"dropup"),'<button type="button" class="btn'+a(" btn-%s",this.options.buttonsClass)+a(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',f?this.options.formatAllRows():this.options.pageSize,"</span>",' <span class="caret"></span>',"</button>",r.pageDropdownHtml[0]];if("string"==typeof this.options.pageList){var m=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");p=[],e.each(m,function(e,t){p.push(t.toUpperCase()===d.options.formatAllRows().toUpperCase()||"UNLIMITED"===t.toUpperCase()?d.options.formatAllRows():+t)})}for(e.each(p,function(e,t){var n;(!d.options.smartDisplay||0===e||p[e-1]<d.options.totalRows)&&(n=f?t===d.options.formatAllRows()?"active":"":t===d.options.pageSize?"active":"",v.push(a(r.pageDropdownItemHtml,n,t)))}),v.push(r.pageDropdownHtml[1]+"</span>"),c.push(this.options.formatRecordsPerPage(v.join(""))),c.push("</span>"),c.push("</div>",a('<div class="%s-%s pagination">',r.pullClass,this.options.paginationHAlign),'<ul class="pagination'+a(" pagination-%s",this.options.iconSize)+'">',a('<li class="page-item page-pre"><a class="page-link" href="#">%s</a></li>',this.options.paginationPreText)),this.totalPages<5?(n=1,i=this.totalPages):(i=4+(n=this.options.pageNumber-2),n<1&&(n=1,i=5),i>this.totalPages&&(n=(i=this.totalPages)-4)),this.totalPages>=6&&(this.options.pageNumber>=3&&(c.push(a('<li class="page-item page-first%s">',1===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',1,"</a>","</li>"),n++),this.options.pageNumber>=4&&(4==this.options.pageNumber||6==this.totalPages||7==this.totalPages?n--:c.push('<li class="page-item page-first-separator disabled">','<a class="page-link" href="#">...</a>',"</li>"),i--)),this.totalPages>=7&&this.options.pageNumber>=this.totalPages-2&&n--,6==this.totalPages?this.options.pageNumber>=this.totalPages-2&&i++:this.totalPages>=7&&(7==this.totalPages||this.options.pageNumber>=this.totalPages-3)&&i++,t=n;t<=i;t++)c.push(a('<li class="page-item%s">',t===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',t,"</a>","</li>");this.totalPages>=8&&this.options.pageNumber<=this.totalPages-4&&c.push('<li class="page-item page-last-separator disabled">','<a class="page-link" href="#">...</a>',"</li>"),this.totalPages>=6&&this.options.pageNumber<=this.totalPages-3&&c.push(a('<li class="page-item page-last%s">',this.totalPages===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',this.totalPages,"</a>","</li>"),c.push(a('<li class="page-item page-next"><a class="page-link" href="#">%s</a></li>',this.options.paginationNextText),"</ul>","</div>")}this.$pagination.html(c.join("")),this.options.onlyInfoPagination||(o=this.$pagination.find(".page-list a"),s=this.$pagination.find(".page-pre"),l=this.$pagination.find(".page-next"),u=this.$pagination.find(".page-item").not(".page-next, .page-pre"),this.options.smartDisplay&&(this.totalPages<=1&&this.$pagination.find("div.pagination").hide(),(p.length<2||this.options.totalRows<=p[0])&&this.$pagination.find("span.page-list").hide(),this.$pagination[this.getData().length?"show":"hide"]()),this.options.paginationLoop||(1===this.options.pageNumber&&s.addClass("disabled"),this.options.pageNumber===this.totalPages&&l.addClass("disabled")),f&&(this.options.pageSize=this.options.formatAllRows()),o.off("click").on("click",e.proxy(this.onPageListChange,this)),s.off("click").on("click",e.proxy(this.onPagePre,this)),l.off("click").on("click",e.proxy(this.onPageNext,this)),u.off("click").on("click",e.proxy(this.onPageNumber,this)))}else this.$pagination.hide()},h.prototype.updatePagination=function(t){t&&e(t.currentTarget).hasClass("disabled")||(this.options.maintainSelected||this.resetRows(),this.initPagination(),"server"===this.options.sidePagination?this.initServer():this.initBody(),this.trigger("page-change",this.options.pageNumber,this.options.pageSize))},h.prototype.onPageListChange=function(t){t.preventDefault();var n=e(t.currentTarget);return n.parent().addClass("active").siblings().removeClass("active"),this.options.pageSize=n.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+n.text(),this.$toolbar.find(".page-size").text(this.options.pageSize),this.updatePagination(t),!1},h.prototype.onPagePre=function(e){return e.preventDefault(),this.options.pageNumber-1==0?this.options.pageNumber=this.options.totalPages:this.options.pageNumber--,this.updatePagination(e),!1},h.prototype.onPageNext=function(e){return e.preventDefault(),this.options.pageNumber+1>this.options.totalPages?this.options.pageNumber=1:this.options.pageNumber++,this.updatePagination(e),!1},h.prototype.onPageNumber=function(t){if(t.preventDefault(),this.options.pageNumber!==+e(t.currentTarget).text())return this.options.pageNumber=+e(t.currentTarget).text(),this.updatePagination(t),!1},h.prototype.initRow=function(t,n,r,i){var o,l=this,d=[],f={},h=[],p="",g={},v=[];if(!(e.inArray(t,this.hiddenRows)>-1)){if((f=s(this.options,this.options.rowStyle,[t,n],f))&&f.css)for(o in f.css)h.push(o+": "+f.css[o]);if(g=s(this.options,this.options.rowAttributes,[t,n],g))for(o in g)v.push(a('%s="%s"',o,u(g[o])));return t._data&&!e.isEmptyObject(t._data)&&e.each(t._data,function(e,t){"index"!==e&&(p+=a(' data-%s="%s"',e,t))}),d.push("<tr",a(" %s",v.join(" ")),a(' id="%s"',e.isArray(t)?void 0:t._id),a(' class="%s"',f.classes||(e.isArray(t)?void 0:t._class)),a(' data-index="%s"',n),a(' data-uniqueid="%s"',t[this.options.uniqueId]),a("%s",p),">"),this.options.cardView&&d.push(a('<td colspan="%s"><div class="card-views">',this.header.fields.length)),!this.options.cardView&&this.options.detailView&&(d.push("<td>"),s(null,this.options.detailFilter,[n,t])&&d.push('<a class="detail-icon" href="#">',a('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.detailOpen),"</a>"),d.push("</td>")),e.each(this.header.fields,function(r,i){var o="",p=c(t,i,l.options.escape),g="",v="",m={},y="",b=l.header.classes[r],_="",w="",E="",T="",x=l.columns[r];if((!l.fromHtml||void 0!==p||x.checkbox||x.radio)&&x.visible&&(!l.options.cardView||x.cardVisible)){if(x.escape&&(p=u(p)),f=a('style="%s"',h.concat(l.header.styles[r]).join("; ")),t["_"+i+"_id"]&&(y=a(' id="%s"',t["_"+i+"_id"])),t["_"+i+"_class"]&&(b=a(' class="%s"',t["_"+i+"_class"])),t["_"+i+"_rowspan"]&&(w=a(' rowspan="%s"',t["_"+i+"_rowspan"])),t["_"+i+"_colspan"]&&(E=a(' colspan="%s"',t["_"+i+"_colspan"])),t["_"+i+"_title"]&&(T=a(' title="%s"',t["_"+i+"_title"])),(m=s(l.header,l.header.cellStyles[r],[p,t,n,i],m)).classes&&(b=a(' class="%s"',m.classes)),m.css){var S=[];for(var C in m.css)S.push(C+": "+m.css[C]);f=a('style="%s"',S.concat(l.header.styles[r]).join("; "))}g=s(x,l.header.formatters[r],[p,t,n,i],p),t["_"+i+"_data"]&&!e.isEmptyObject(t["_"+i+"_data"])&&e.each(t["_"+i+"_data"],function(e,t){"index"!==e&&(_+=a(' data-%s="%s"',e,t))}),x.checkbox||x.radio?(v=x.checkbox?"checkbox":v,v=x.radio?"radio":v,o=[a(l.options.cardView?'<div class="card-view %s">':'<td class="bs-checkbox %s">',x.class||""),"<input"+a(' data-index="%s"',n)+a(' name="%s"',l.options.selectItemName)+a(' type="%s"',v)+a(' value="%s"',t[l.options.idField])+a(' checked="%s"',!0===g||p||g&&g.checked?"checked":void 0)+a(' disabled="%s"',!x.checkboxEnabled||g&&g.disabled?"disabled":void 0)+" />",l.header.formatters[r]&&"string"==typeof g?g:"",l.options.cardView?"</div>":"</td>"].join(""),t[l.header.stateField]=!0===g||!!p||g&&g.checked):(g=void 0===g||null===g?l.options.undefinedText:g,o=l.options.cardView?['<div class="card-view">',l.options.showHeader?a('<span class="title" %s>%s</span>',f,function(t,n,r,i){var a="";return e.each(t,function(e,t){return t.field!==i||(a=t.title,!1)}),a}(l.columns,0,0,i)):"",a('<span class="value">%s</span>',g),"</div>"].join(""):[a("<td%s %s %s %s %s %s %s>",y,b,f,_,w,E,T),g,"</td>"].join(""),l.options.cardView&&l.options.smartDisplay&&""===g&&(o='<div class="card-view"></div>')),d.push(o)}}),this.options.cardView&&d.push("</div></td>"),d.push("</tr>"),d.join(" ")}},h.prototype.initBody=function(t){var n=this,r=this.getData();this.trigger("pre-body",r),this.$body=this.$el.find(">tbody"),this.$body.length||(this.$body=e("<tbody></tbody>").appendTo(this.$el)),this.options.pagination&&"server"!==this.options.sidePagination||(this.pageFrom=1,this.pageTo=r.length);for(var i,o=e(document.createDocumentFragment()),l=this.pageFrom-1;l<this.pageTo;l++){var u=r[l],d=this.initRow(u,l,r,o);i=i||!!d,d&&!0!==d&&o.append(d)}i||o.append('<tr class="no-records-found">'+a('<td colspan="%s">%s</td>',this.$header.find("th").length,this.options.formatNoMatches())+"</tr>"),this.$body.html(o),t||this.scrollTo(0),this.$body.find("> tr[data-index] > td").off("click dblclick").on("click dblclick",function(t){var r=e(this),i=r.parent(),o=n.data[i.data("index")],s=r[0].cellIndex,l=n.getVisibleFields()[n.options.detailView&&!n.options.cardView?s-1:s],u=n.columns[n.fieldsColumnsIndex[l]],d=c(o,l,n.options.escape);if(!r.find(".detail-icon").length&&(n.trigger("click"===t.type?"click-cell":"dbl-click-cell",l,d,o,r),n.trigger("click"===t.type?"click-row":"dbl-click-row",o,i,l),"click"===t.type&&n.options.clickToSelect&&u.clickToSelect&&n.options.ignoreClickToSelectOn(t.target))){var f=i.find(a('[name="%s"]',n.options.selectItemName));f.length&&f[0].click()}}),this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",function(t){t.preventDefault();var i=e(this),o=i.parent().parent(),l=o.data("index"),u=r[l];if(o.next().is("tr.detail-view"))i.find("i").attr("class",a("%s %s",n.options.iconsPrefix,n.options.icons.detailOpen)),n.trigger("collapse-row",l,u,o.next()),o.next().remove();else{i.find("i").attr("class",a("%s %s",n.options.iconsPrefix,n.options.icons.detailClose)),o.after(a('<tr class="detail-view"><td colspan="%s"></td></tr>',o.find("td").length));var d=o.next().find("td"),c=s(n.options,n.options.detailFormatter,[l,u,d],"");1===d.length&&d.append(c),n.trigger("expand-row",l,u,d)}return n.resetView(),!1}),this.$selectItem=this.$body.find(a('[name="%s"]',this.options.selectItemName)),this.$selectItem.off("click").on("click",function(t){t.stopImmediatePropagation();var r=e(this),i=r.prop("checked"),a=n.data[r.data("index")];(e(this).is(":radio")||n.options.singleSelect)&&e.each(n.options.data,function(e,t){t[n.header.stateField]=!1}),a[n.header.stateField]=i,n.options.singleSelect&&(n.$selectItem.not(this).each(function(){n.data[e(this).data("index")][n.header.stateField]=!1}),n.$selectItem.filter(":checked").not(this).prop("checked",!1)),n.updateSelected(),n.trigger(i?"check":"uncheck",a,r)}),e.each(this.header.events,function(t,r){if(r){"string"==typeof r&&(r=s(null,r));var i=n.header.fields[t],a=e.inArray(i,n.getVisibleFields());if(-1!==a)for(var o in n.options.detailView&&!n.options.cardView&&(a+=1),r)n.$body.find(">tr:not(.no-records-found)").each(function(){var t=e(this),s=t.find(n.options.cardView?".card-view":"td").eq(a),l=o.indexOf(" "),u=o.substring(0,l),d=o.substring(l+1),c=r[o];s.find(d).off(u).on(u,function(e){var r=t.data("index"),a=n.data[r],o=a[i];c.apply(this,[e,o,a,r])})})}}),this.updateSelected(),this.resetView(),this.trigger("post-body",r)},h.prototype.initServer=function(t,n,r){var i,a=this,o={},l=e.inArray(this.options.sortName,this.header.fields),u={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder};this.header.sortNames[l]&&(u.sortName=this.header.sortNames[l]),this.options.pagination&&"server"===this.options.sidePagination&&(u.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,u.pageNumber=this.options.pageNumber),(r||this.options.url||this.options.ajax)&&("limit"===this.options.queryParamsType&&(u={search:u.searchText,sort:u.sortName,order:u.sortOrder},this.options.pagination&&"server"===this.options.sidePagination&&(u.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1),u.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,0===u.limit&&delete u.limit)),e.isEmptyObject(this.filterColumnsPartial)||(u.filter=JSON.stringify(this.filterColumnsPartial,null)),o=s(this.options,this.options.queryParams,[u],o),e.extend(o,n||{}),!1!==o&&(t||this.$tableLoading.show(),i=e.extend({},s(null,this.options.ajaxOptions),{type:this.options.method,url:r||this.options.url,data:"application/json"===this.options.contentType&&"post"===this.options.method?JSON.stringify(o):o,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(e){e=s(a.options,a.options.responseHandler,[e],e),a.load(e),a.trigger("load-success",e),t||a.$tableLoading.hide()},error:function(e){var n=[];"server"===a.options.sidePagination&&((n={})[a.options.totalField]=0,n[a.options.dataField]=[]),a.load(n),a.trigger("load-error",e.status,e),t||a.$tableLoading.hide()}}),this.options.ajax?s(this,this.options.ajax,[i],null):(this._xhr&&4!==this._xhr.readyState&&this._xhr.abort(),this._xhr=e.ajax(i))))},h.prototype.initSearchText=function(){if(this.options.search&&(this.searchText="",""!==this.options.searchText)){var e=this.$toolbar.find(".search input");e.val(this.options.searchText),this.onSearch({currentTarget:e,firedByInitSearchText:!0})}},h.prototype.getCaret=function(){var t=this;e.each(this.$header.find("th"),function(n,r){e(r).find(".sortable").removeClass("desc asc").addClass(e(r).data("field")===t.options.sortName?t.options.sortOrder:"both")})},h.prototype.updateSelected=function(){var t=this.$selectItem.filter(":enabled").length&&this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",t),this.$selectItem.each(function(){e(this).closest("tr")[e(this).prop("checked")?"addClass":"removeClass"]("selected")})},h.prototype.updateRows=function(){var t=this;this.$selectItem.each(function(){t.data[e(this).data("index")][t.header.stateField]=e(this).prop("checked")})},h.prototype.resetRows=function(){var t=this;e.each(this.data,function(e,n){t.$selectAll.prop("checked",!1),t.$selectItem.prop("checked",!1),t.header.stateField&&(n[t.header.stateField]=!1)}),this.initHiddenRows()},h.prototype.trigger=function(t){var n=Array.prototype.slice.call(arguments,1);t+=".bs.table",this.options[h.EVENTS[t]].apply(this.options,n),this.$el.trigger(e.Event(t),n),this.options.onAll(t,n),this.$el.trigger(e.Event("all.bs.table"),[t,n])},h.prototype.resetHeader=function(){clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(e.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)},h.prototype.fitHeader=function(){var t,n,r,i,s=this;if(s.$el.is(":hidden"))s.timeoutId_=setTimeout(e.proxy(s.fitHeader,s),100);else{if(n=(t=this.$tableBody.get(0)).scrollWidth>t.clientWidth&&t.scrollHeight>t.clientHeight+this.$header.outerHeight()?o():0,this.$el.css("margin-top",-this.$header.outerHeight()),(r=e(":focus")).length>0){var l=r.parents("th");if(l.length>0){var u=l.attr("data-field");if(void 0!==u){var d=this.$header.find("[data-field='"+u+"']");d.length>0&&d.find(":input").addClass("focus-temp")}}}this.$header_=this.$header.clone(!0,!0),this.$selectAll_=this.$header_.find('[name="btSelectAll"]'),this.$tableHeader.css({"margin-right":n}).find("table").css("width",this.$el.outerWidth()).html("").attr("class",this.$el.attr("class")).append(this.$header_),(i=e(".focus-temp:visible:eq(0)")).length>0&&(i.focus(),this.$header.find(".focus-temp").removeClass("focus-temp")),this.$header.find("th[data-field]").each(function(t){s.$header_.find(a('th[data-field="%s"]',e(this).data("field"))).data(e(this).data())});var c=this.getVisibleFields(),f=this.$header_.find("th");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(t){var n=e(this),r=t;if(s.options.detailView&&!s.options.cardView&&(0===t&&s.$header_.find("th.detail").find(".fht-cell").width(n.innerWidth()),r=t-1),-1!==r){var i=s.$header_.find(a('th[data-field="%s"]',c[r]));i.length>1&&(i=e(f[n[0].cellIndex]));var o=i.width()-i.find(".fht-cell").width();i.find(".fht-cell").width(n.innerWidth()-o)}}),this.horizontalScroll(),this.trigger("post-header")}},h.prototype.resetFooter=function(){var t=this,n=t.getData(),r=[];this.options.showFooter&&!this.options.cardView&&(!this.options.cardView&&this.options.detailView&&r.push('<td><div class="th-inner">&nbsp;</div><div class="fht-cell"></div></td>'),e.each(this.columns,function(e,i){var o,l,u,d,c=[],f=a(' class="%s"',i.class);if(i.visible&&(!t.options.cardView||i.cardVisible)){if(l=a("text-align: %s; ",i.falign?i.falign:i.align),u=a("vertical-align: %s; ",i.valign),(d=s(null,t.options.footerStyle))&&d.css)for(o in d.css)c.push(o+": "+d.css[o]);r.push("<td",f,a(' style="%s"',l+u+c.concat().join("; ")),">"),r.push('<div class="th-inner">'),r.push(s(i,i.footerFormatter,[n],"&nbsp;")||"&nbsp;"),r.push("</div>"),r.push('<div class="fht-cell"></div>'),r.push("</div>"),r.push("</td>")}}),this.$tableFooter.find("tr").html(r.join("")),this.$tableFooter.show(),clearTimeout(this.timeoutFooter_),this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0))},h.prototype.fitFooter=function(){var t,n,r;clearTimeout(this.timeoutFooter_),this.$el.is(":hidden")?this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),100):(r=(n=this.$el.css("width"))>this.$tableBody.width()?o():0,this.$tableFooter.css({"margin-right":r}).find("table").css("width",n).attr("class",this.$el.attr("class")),t=this.$tableFooter.find("td"),this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(n){var r=e(this);t.eq(n).find(".fht-cell").width(r.innerWidth())}),this.horizontalScroll())},h.prototype.horizontalScroll=function(){var t=this;t.trigger("scroll-body"),this.$tableBody.off("scroll").on("scroll",function(){t.options.showHeader&&t.options.height&&t.$tableHeader.scrollLeft(e(this).scrollLeft()),t.options.showFooter&&!t.options.cardView&&t.$tableFooter.scrollLeft(e(this).scrollLeft())})},h.prototype.toggleColumn=function(e,t,n){if(-1!==e&&(this.columns[e].visible=t,this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns)){var r=this.$toolbar.find(".keep-open input").prop("disabled",!1);n&&r.filter(a('[value="%s"]',e)).prop("checked",t),r.filter(":checked").length<=this.options.minimumCountColumns&&r.filter(":checked").prop("disabled",!0)}},h.prototype.getVisibleFields=function(){var t=this,n=[];return e.each(this.header.fields,function(e,r){t.columns[t.fieldsColumnsIndex[r]].visible&&n.push(r)}),n},h.prototype.resetView=function(e){var t=0;if(e&&e.height&&(this.options.height=e.height),this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length),this.options.height){var n=this.$toolbar.outerHeight(!0),r=this.$pagination.outerHeight(!0),i=this.options.height-n-r;this.$tableContainer.css("height",i+"px")}if(this.options.cardView)return this.$el.css("margin-top","0"),this.$tableContainer.css("padding-bottom","0"),void this.$tableFooter.hide();this.options.showHeader&&this.options.height?(this.$tableHeader.show(),this.resetHeader(),t+=this.$header.outerHeight()):(this.$tableHeader.hide(),this.trigger("post-header")),this.options.showFooter&&(this.resetFooter(),this.options.height&&(t+=this.$tableFooter.outerHeight()+1)),this.getCaret(),this.$tableContainer.css("padding-bottom",t+"px"),this.trigger("reset-view")},h.prototype.getData=function(t){var n=this.options.data;return!this.searchText&&!this.options.sortName&&e.isEmptyObject(this.filterColumns)&&e.isEmptyObject(this.filterColumnsPartial)||(n=this.data),t?n.slice(this.pageFrom-1,this.pageTo):n},h.prototype.load=function(t){var n=!1;this.options.pagination&&"server"===this.options.sidePagination?(this.options.totalRows=t[this.options.totalField],n=t.fixedScroll,t=t[this.options.dataField]):e.isArray(t)||(n=t.fixedScroll,t=t.data),this.initData(t),this.initSearch(),this.initPagination(),this.initBody(n)},h.prototype.append=function(e){this.initData(e,"append"),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},h.prototype.prepend=function(e){this.initData(e,"prepend"),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},h.prototype.remove=function(t){var n,r,i=this.options.data.length;if(t.hasOwnProperty("field")&&t.hasOwnProperty("values")){for(n=i-1;n>=0;n--)(r=this.options.data[n]).hasOwnProperty(t.field)&&-1!==e.inArray(r[t.field],t.values)&&(this.options.data.splice(n,1),"server"===this.options.sidePagination&&(this.options.totalRows-=1));i!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))}},h.prototype.removeAll=function(){this.options.data.length>0&&(this.options.data.splice(0,this.options.data.length),this.initSearch(),this.initPagination(),this.initBody(!0))},h.prototype.getRowByUniqueId=function(e){var t,n,r,i=this.options.uniqueId,a=null;for(t=this.options.data.length-1;t>=0;t--){if((n=this.options.data[t]).hasOwnProperty(i))r=n[i];else{if(!n._data.hasOwnProperty(i))continue;r=n._data[i]}if("string"==typeof r?e=e.toString():"number"==typeof r&&(Number(r)===r&&r%1==0?e=parseInt(e):r===Number(r)&&0!==r&&(e=parseFloat(e))),r===e){a=n;break}}return a},h.prototype.removeByUniqueId=function(e){var t=this.options.data.length,n=this.getRowByUniqueId(e);n&&this.options.data.splice(this.options.data.indexOf(n),1),t!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initBody(!0))},h.prototype.updateByUniqueId=function(t){var n=this,r=e.isArray(t)?t:[t];e.each(r,function(t,r){var i;r.hasOwnProperty("id")&&r.hasOwnProperty("row")&&-1!==(i=e.inArray(n.getRowByUniqueId(r.id),n.options.data))&&e.extend(n.options.data[i],r.row)}),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},h.prototype.refreshColumnTitle=function(t){t.hasOwnProperty("field")&&t.hasOwnProperty("title")&&(this.columns[this.fieldsColumnsIndex[t.field]].title=this.options.escape?u(t.title):t.title,this.columns[this.fieldsColumnsIndex[t.field]].visible&&(void 0!==this.options.height?this.$tableHeader:this.$header).find("th[data-field]").each(function(n){if(e(this).data("field")===t.field)return e(e(this).find(".th-inner")[0]).text(t.title),!1}))},h.prototype.insertRow=function(e){e.hasOwnProperty("index")&&e.hasOwnProperty("row")&&(this.options.data.splice(e.index,0,e.row),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))},h.prototype.updateRow=function(t){var n=this,r=e.isArray(t)?t:[t];e.each(r,function(t,r){r.hasOwnProperty("index")&&r.hasOwnProperty("row")&&e.extend(n.options.data[r.index],r.row)}),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)},h.prototype.initHiddenRows=function(){this.hiddenRows=[]},h.prototype.showRow=function(e){this.toggleRow(e,!0)},h.prototype.hideRow=function(e){this.toggleRow(e,!1)},h.prototype.toggleRow=function(t,n){var r,i;t.hasOwnProperty("index")?r=this.getData()[t.index]:t.hasOwnProperty("uniqueId")&&(r=this.getRowByUniqueId(t.uniqueId)),r&&(i=e.inArray(r,this.hiddenRows),n||-1!==i?n&&i>-1&&this.hiddenRows.splice(i,1):this.hiddenRows.push(r),this.initBody(!0))},h.prototype.getHiddenRows=function(t){var n=this,r=this.getData(),i=[];return e.each(r,function(t,r){e.inArray(r,n.hiddenRows)>-1&&i.push(r)}),this.hiddenRows=i,i},h.prototype.mergeCells=function(t){var n,r,i,a=t.index,o=e.inArray(t.field,this.getVisibleFields()),s=t.rowspan||1,l=t.colspan||1,u=this.$body.find(">tr");if(this.options.detailView&&!this.options.cardView&&(o+=1),i=u.eq(a).find(">td").eq(o),!(a<0||o<0||a>=this.data.length)){for(n=a;n<a+s;n++)for(r=o;r<o+l;r++)u.eq(n).find(">td").eq(r).hide();i.attr("rowspan",s).attr("colspan",l).show()}},h.prototype.updateCell=function(e){e.hasOwnProperty("index")&&e.hasOwnProperty("field")&&e.hasOwnProperty("value")&&(this.data[e.index][e.field]=e.value,!1!==e.reinit&&(this.initSort(),this.initBody(!0)))},h.prototype.updateCellById=function(t){var n=this;if(t.hasOwnProperty("id")&&t.hasOwnProperty("field")&&t.hasOwnProperty("value")){var r=e.isArray(t)?t:[t];e.each(r,function(t,r){var i;-1!==(i=e.inArray(n.getRowByUniqueId(r.id),n.options.data))&&(n.data[i][r.field]=r.value)}),!1!==t.reinit&&(this.initSort(),this.initBody(!0))}},h.prototype.getOptions=function(){return e.extend(!0,{},this.options)},h.prototype.getSelections=function(){var t=this;return e.grep(this.options.data,function(e){return!0===e[t.header.stateField]})},h.prototype.getAllSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]})},h.prototype.checkAll=function(){this.checkAll_(!0)},h.prototype.uncheckAll=function(){this.checkAll_(!1)},h.prototype.checkInvert=function(){var t=this.$selectItem.filter(":enabled"),n=t.filter(":checked");t.each(function(){e(this).prop("checked",!e(this).prop("checked"))}),this.updateRows(),this.updateSelected(),this.trigger("uncheck-some",n),n=this.getSelections(),this.trigger("check-some",n)},h.prototype.checkAll_=function(e){var t;e||(t=this.getSelections()),this.$selectAll.add(this.$selectAll_).prop("checked",e),this.$selectItem.filter(":enabled").prop("checked",e),this.updateRows(),e&&(t=this.getSelections()),this.trigger(e?"check-all":"uncheck-all",t)},h.prototype.check=function(e){this.check_(!0,e)},h.prototype.uncheck=function(e){this.check_(!1,e)},h.prototype.check_=function(e,t){var n=this.$selectItem.filter(a('[data-index="%s"]',t)).prop("checked",e);this.data[t][this.header.stateField]=e,this.updateSelected(),this.trigger(e?"check":"uncheck",this.data[t],n)},h.prototype.checkBy=function(e){this.checkBy_(!0,e)},h.prototype.uncheckBy=function(e){this.checkBy_(!1,e)},h.prototype.checkBy_=function(t,n){if(n.hasOwnProperty("field")&&n.hasOwnProperty("values")){var r=this,i=[];e.each(this.options.data,function(o,s){if(!s.hasOwnProperty(n.field))return!1;if(-1!==e.inArray(s[n.field],n.values)){var l=r.$selectItem.filter(":enabled").filter(a('[data-index="%s"]',o)).prop("checked",t);s[r.header.stateField]=t,i.push(s),r.trigger(t?"check":"uncheck",s,l)}}),this.updateSelected(),this.trigger(t?"check-some":"uncheck-some",i)}},h.prototype.destroy=function(){this.$el.insertBefore(this.$container),e(this.options.toolbar).insertBefore(this.$el),this.$container.next().remove(),this.$container.remove(),this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")},h.prototype.showLoading=function(){this.$tableLoading.show()},h.prototype.hideLoading=function(){this.$tableLoading.hide()},h.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var e=this.$toolbar.find('button[name="paginationSwitch"] i');this.options.pagination?e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown):e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp),this.updatePagination()},h.prototype.toggleFullscreen=function(){this.$el.closest(".bootstrap-table").toggleClass("fullscreen")},h.prototype.refresh=function(e){e&&e.url&&(this.options.url=e.url),e&&e.pageNumber&&(this.options.pageNumber=e.pageNumber),e&&e.pageSize&&(this.options.pageSize=e.pageSize),this.initServer(e&&e.silent,e&&e.query,e&&e.url),this.trigger("refresh",e)},h.prototype.resetWidth=function(){this.options.showHeader&&this.options.height&&this.fitHeader(),this.options.showFooter&&!this.options.cardView&&this.fitFooter()},h.prototype.showColumn=function(e){this.toggleColumn(this.fieldsColumnsIndex[e],!0,!0)},h.prototype.hideColumn=function(e){this.toggleColumn(this.fieldsColumnsIndex[e],!1,!0)},h.prototype.getHiddenColumns=function(){return e.grep(this.columns,function(e){return!e.visible})},h.prototype.getVisibleColumns=function(){return e.grep(this.columns,function(e){return e.visible})},h.prototype.toggleAllColumns=function(t){var n=this;if(e.each(this.columns,function(e,r){n.columns[e].visible=t}),this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns){var r=this.$toolbar.find(".keep-open input").prop("disabled",!1);r.filter(":checked").length<=this.options.minimumCountColumns&&r.filter(":checked").prop("disabled",!0)}},h.prototype.showAllColumns=function(){this.toggleAllColumns(!0)},h.prototype.hideAllColumns=function(){this.toggleAllColumns(!1)},h.prototype.filterBy=function(t){this.filterColumns=e.isEmptyObject(t)?{}:t,this.options.pageNumber=1,this.initSearch(),this.updatePagination()},h.prototype.scrollTo=function(e){if("string"==typeof e&&(e="bottom"===e?this.$tableBody[0].scrollHeight:0),"number"==typeof e&&this.$tableBody.scrollTop(e),void 0===e)return this.$tableBody.scrollTop()},h.prototype.getScrollPosition=function(){return this.scrollTo()},h.prototype.selectPage=function(e){e>0&&e<=this.options.totalPages&&(this.options.pageNumber=e,this.updatePagination())},h.prototype.prevPage=function(){this.options.pageNumber>1&&(this.options.pageNumber--,this.updatePagination())},h.prototype.nextPage=function(){this.options.pageNumber<this.options.totalPages&&(this.options.pageNumber++,this.updatePagination())},h.prototype.toggleView=function(){this.options.cardView=!this.options.cardView,this.initHeader();var e=this.$toolbar.find('button[name="toggle"] i');this.options.cardView?(e.removeClass(this.options.icons.toggleOff),e.addClass(this.options.icons.toggleOn)):(e.removeClass(this.options.icons.toggleOn),e.addClass(this.options.icons.toggleOff)),this.initBody(),this.trigger("toggle",this.options.cardView)},h.prototype.refreshOptions=function(t){l(this.options,t,!0)||(this.options=e.extend(this.options,t),this.trigger("refresh-options",this.options),this.destroy(),this.init())},h.prototype.resetSearch=function(e){var t=this.$toolbar.find(".search input");t.val(e||""),this.onSearch({currentTarget:t})},h.prototype.expandRow_=function(e,t){var n=this.$body.find(a('> tr[data-index="%s"]',t));n.next().is("tr.detail-view")===!e&&n.find("> td > .detail-icon").click()},h.prototype.expandRow=function(e){this.expandRow_(!0,e)},h.prototype.collapseRow=function(e){this.expandRow_(!1,e)},h.prototype.expandAllRows=function(t){if(t){var n=this.$body.find(a('> tr[data-index="%s"]',0)),r=this,i=null,o=!1,s=-1;if(n.next().is("tr.detail-view")?n.next().next().is("tr.detail-view")||(n.next().find(".detail-icon").click(),o=!0):(n.find("> td > .detail-icon").click(),o=!0),o)try{s=setInterval(function(){(i=r.$body.find("tr.detail-view").last().find(".detail-icon")).length>0?i.click():clearInterval(s)},1)}catch(e){clearInterval(s)}}else for(var l=this.$body.children(),u=0;u<l.length;u++)this.expandRow_(!0,e(l[u]).data("index"))},h.prototype.collapseAllRows=function(t){if(t)this.expandRow_(!1,0);else for(var n=this.$body.children(),r=0;r<n.length;r++)this.expandRow_(!1,e(n[r]).data("index"))},h.prototype.updateFormatText=function(e,t){this.options[a("format%s",e)]&&("string"==typeof t?this.options[a("format%s",e)]=function(){return t}:"function"==typeof t&&(this.options[a("format%s",e)]=t)),this.initToolbar(),this.initPagination(),this.initBody()};var p=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","updateByUniqueId","removeByUniqueId","getRowByUniqueId","showRow","hideRow","getHiddenRows","mergeCells","refreshColumnTitle","checkAll","uncheckAll","checkInvert","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","hideColumn","getHiddenColumns","getVisibleColumns","showAllColumns","hideAllColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions","resetSearch","expandRow","collapseRow","expandAllRows","collapseAllRows","updateFormatText","updateCellById"];e.fn.bootstrapTable=function(n){var r,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=e(this),o=a.data("bootstrap.table"),s=e.extend({},h.DEFAULTS,a.data(),"object"===(void 0===n?"undefined":t(n))&&n);if("string"==typeof n){if(e.inArray(n,p)<0)throw new Error("Unknown method: "+n);if(!o)return;r=o[n].apply(o,i),"destroy"===n&&a.removeData("bootstrap.table")}o||a.data("bootstrap.table",o=new h(this,s))}),void 0===r?this:r},e.fn.bootstrapTable.Constructor=h,e.fn.bootstrapTable.defaults=h.DEFAULTS,e.fn.bootstrapTable.columnDefaults=h.COLUMN_DEFAULTS,e.fn.bootstrapTable.locales=h.LOCALES,e.fn.bootstrapTable.methods=p,e.fn.bootstrapTable.utils={bootstrapVersion:n,sprintf:a,compareObjects:l,calculateObjectValue:s,getItemField:c,objectKeys:function(){var e,n,r,i;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),i=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(a){if("object"!==(void 0===a?"undefined":t(a))&&("function"!=typeof a||null===a))throw new TypeError("Object.keys called on non-object");var o,s,l=[];for(o in a)e.call(a,o)&&l.push(o);if(n)for(s=0;s<i;s++)e.call(a,r[s])&&l.push(r[s]);return l}))},isIEBrowser:f},e(function(){e('[data-toggle="table"]').bootstrapTable()})}(e)}).call(this,n(0))},,function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";(function(e){var n,r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=79)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},function(e,t,n){(function(e){
/*!
       * The buffer module from node.js, for the browser.
       *
       * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
       * @license  MIT
       */
var r=n(73),i=n(72),a=n(38);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(d(t),e=s(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var d=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===l)return d*o}else-1!==d&&(a-=a-d),d=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var c=!0,f=0;f<l;f++)if(u(e,a+f)!==u(t,f)){c=!1;break}if(c)return a}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function b(e,t,n,r){return V(H(t,e.length-n),e,n,r)}function _(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return _(e,t,n,r)}function E(e,t,n,r){return V(F(t),e,n,r)}function T(e,t,n,r){return V(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,u=e[i],d=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c<=n)switch(c){case 1:u<128&&(d=u);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)>127&&(d=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,c=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=c}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return d(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return c(null,e)},l.allocUnsafeSlow=function(e){return c(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,s=Math.min(a,o),u=this.slice(r,i),d=e.slice(t,n),c=0;c<s;++c)if(u[c]!==d[c]){a=u[c],o=d[c];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=B(e[a]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function j(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,a){return a||j(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,a){return a||j(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=l.isBuffer(e)?e:H(new l(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function F(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(0))},function(e,t,n){var r=n(10),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var a=n(6);a.inherits=n(5);var o=n(35),s=n(18);a.inherits(c,o);for(var l=i(s.prototype),u=0;u<l.length;u++){var d=l[u];c.prototype[d]||(c.prototype[d]=s.prototype[d])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,u=[],d=!1,c=-1;function f(){d&&l&&(d=!1,l.length?u=l.concat(u):c=-1,u.length&&h())}function h(){if(!d){var e=s(f);d=!0;for(var t=u.length;t;){for(l=u,u=[];++c<t;)l&&l[c].run();c=-1,t=u.length}l=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||d||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";return"x"+("00000000"+(256*e.readUint16()*256+e.readUint16()).toString(16)).substr(-8)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==(void 0===e?"undefined":o(e))},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==(void 0===e?"undefined":o(e))&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==(void 0===e?"undefined":o(e))||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(1).Buffer)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(14);function a(e,t){return void 0!==e.parser?e.parser:t}var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.byteArrayParser=t,this.byteArray=n,this.elements=r}return r(e,[{key:"uint16",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readUint16(this.byteArray,n.dataOffset+2*t)}},{key:"int16",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readInt16(this.byteArray,n.dataOffset+2*t)}},{key:"uint32",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readUint32(this.byteArray,n.dataOffset+4*t)}},{key:"int32",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readInt32(this.byteArray,n.dataOffset+4*t)}},{key:"float",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readFloat(this.byteArray,n.dataOffset+4*t)}},{key:"double",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readDouble(this.byteArray,n.dataOffset+8*t)}},{key:"numStringValues",value:function(e){var t=this.elements[e];if(t&&t.length>0){var n=(0,i.readFixedString)(this.byteArray,t.dataOffset,t.length).match(/\\/g);return null===n?1:n.length+1}}},{key:"string",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=(0,i.readFixedString)(this.byteArray,n.dataOffset,n.length);return t>=0?r.split("\\")[t].trim():r.trim()}}},{key:"text",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=(0,i.readFixedString)(this.byteArray,n.dataOffset,n.length);return t>=0?r.split("\\")[t].replace(/ +$/,""):r.replace(/ +$/,"")}}},{key:"floatString",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){t=void 0!==t?t:0;var r=this.string(e,t);if(void 0!==r)return parseFloat(r)}}},{key:"intString",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){t=void 0!==t?t:0;var r=this.string(e,t);if(void 0!==r)return parseInt(r)}}},{key:"attributeTag",value:function(e){var t=this.elements[e];if(t&&4===t.length){var n=a(t,this.byteArrayParser).readUint16,r=this.byteArray,i=t.dataOffset;return"x"+("00000000"+(256*n(r,i)*256+n(r,i+2)).toString(16)).substr(-8)}}}]),e}();t.default=o},function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=(void 0===n?"undefined":o(n)))throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},s={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(r)},function(e,t,n){var r=n(1),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick(function(){e.apply(null,a)})}}}:e.exports=t}).call(this,n(3))},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n,r){if(void 0!==e&&t instanceof e)return t.slice(n,n+r);if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset+n,r);throw"dicomParser.from: unknown type for byteArray"}}).call(this,n(1).Buffer)},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(11))&&r.__esModule?r:{default:r},o=n(14),s=function(){function t(n,r,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===r)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(r instanceof Uint8Array==0&&r instanceof e==0)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(i<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(i>=r.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=n,this.byteArray=r,this.position=i||0,this.warnings=[]}return i(t,[{key:"seek",value:function(e){if(this.position+e<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=e}},{key:"readByteStream",value:function(e){if(this.position+e>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=(0,a.default)(this.byteArray,this.position,e);return this.position+=e,new t(this.byteArrayParser,n)}},{key:"readUint16",value:function(){var e=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,e}},{key:"readUint32",value:function(){var e=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,e}},{key:"readFixedString",value:function(e){var t=(0,o.readFixedString)(this.byteArray,this.position,e);return this.position+=e,t}}]),t}();t.default=s}).call(this,n(1).Buffer)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var t={tag:(0,i.default)(e),length:e.readUint32(),dataOffset:e.position};if("xfffee000"!==t.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+e.position;return t};var r,i=(r=n(4))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.readFixedString=function(e,t,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+n>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var r,i="",a=0;a<n;a++){if(0===(r=e[t+a]))return t+=n,i;i+=String.fromCharCode(r)}return i}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var l={tag:(0,o.default)(e),vr:e.readFixedString(2)};return 2===u(l.vr)?(l.length=e.readUint16(),l.dataOffset=e.position):(e.seek(2),l.length=e.readUint32(),l.dataOffset=e.position),4294967295===l.length&&(l.hadUndefinedLength=!0),l.tag===n?l:"SQ"===l.vr?((0,s.default)(e,l,t),l):4294967295===l.length?"x7fe00010"===l.tag?((0,r.default)(e,l,t),l):"UN"===l.vr?((0,i.default)(e,l),l):((0,a.default)(e,l),l):(e.seek(l.length),l)};var r=l(n(42)),i=l(n(41)),a=l(n(24)),o=l(n(4)),s=l(n(40));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return"OB"===e||"OW"===e||"SQ"===e||"OF"===e||"UT"===e||"UN"===e?4:2}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseDicomDataSetExplicit=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?t.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var a=e.elements;t.position<n;){var o=(0,r.default)(t,e.warnings,i.untilTag);if(a[o.tag]=o,o.tag===i.untilTag)return}if(t.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"},t.parseDicomDataSetImplicit=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?e.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var a=e.elements;t.position<n;){var o=(0,i.default)(t,r.untilTag,r.vrCallback);if(a[o.tag]=o,o.tag===r.untilTag)return}};var r=a(n(15)),i=a(n(23));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,u){if(s=s||1,u=u||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===s)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(s<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+s>t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var d=new i.default(e.byteArrayParser,e.byteArray,t.dataOffset),c=(0,a.default)(d);if("xfffee000"!==c.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";d.seek(c.length);var f=d.position;if(1===s)return(0,o.default)(d.byteArray,f+u[n].offset+8,u[n].length);for(var h=l(u,n,s),p=(0,r.default)(d.byteArray,h),g=0,v=n;v<n+s;v++)for(var m=f+u[v].offset+8,y=0;y<u[v].length;y++)p[g++]=d.byteArray[m++];return p};var r=s(n(22)),i=s(n(12)),a=s(n(13)),o=s(n(11));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,n){for(var r=0,i=t;i<t+n;i++)r+=e[i].length;return r}},function(e,t,n){(function(t,r,i){var a=n(10);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;y.WritableState=m;var u=n(6);u.inherits=n(5);var d,c={deprecate:n(61)},f=n(34),h=n(9).Buffer,p=i.Uint8Array||function(){},g=n(33);function v(){}function m(e,t){s=s||n(2),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,u=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(u||0===u)?u:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?l(_,e,n,o,i):_(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){if(s=s||n(2),!(d.call(y,this)||this instanceof s))return new y(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),x(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)i[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;i.allBuffers=l,b(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,d=n.encoding,c=n.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,d,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function x(e,t){var n=E(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(T,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}u.inherits(y,f),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===y&&e&&e._writableState instanceof m}})):d=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,h.isBuffer(r)||r instanceof p);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n)),t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,r,i,a);return l}(this,i,s,e,t,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(3),n(63).setImmediate,n(0))},function(e,t,n){(t=e.exports=n(35)).Stream=t,t.Readable=t,t.Writable=n(18),t.Duplex=n(2),t.Transform=n(31),t.PassThrough=n(60)},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==(void 0===e?"undefined":o(e))&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),o=(u=n.slice()).length,l=0;l<o;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return e[t]+256*e[t+1]},readInt16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=e[t]+(e[t+1]<<8);return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return e[t]+256*e[t+1]+256*e[t+2]*256+256*e[t+3]*256*256},readInt32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)},readFloat:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],new Float64Array(n.buffer)[0]}}},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n){if(void 0!==e&&t instanceof e)return e.alloc(n);if(t instanceof Uint8Array)return new Uint8Array(n);throw"dicomParser.alloc: unknown type for byteArray"}}).call(this,n(1).Buffer)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var o={tag:(0,a.default)(e),length:e.readUint32(),dataOffset:e.position};return 4294967295===o.length&&(o.hadUndefinedLength=!0),o.tag===t?o:s(o,e,n)?((0,i.default)(e,o),o):o.hadUndefinedLength?((0,r.default)(e,o),o):(e.seek(o.length),o)};var r=o(n(24)),i=o(n(39)),a=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(void 0!==n)return"SQ"===n(e.tag);if(t.position+4<=t.byteArray.length){var r=(0,a.default)(t);return t.seek(-4),"xfffee000"===r||"xfffee0dd"===r}return t.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57357===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0};t.isStringVr=function(e){return r[e]},t.isPrivateTag=function(e){return parseInt(e[4],10)%2==1},t.parsePN=function(e){if(void 0!==e){var t=e.split("^");return{familyName:t[0],givenName:t[1],middleName:t[2],prefix:t[3],suffix:t[4]}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,s){if(r=r||t.basicOffsetTable,s=s||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===r.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(n<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(n>=r.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=r[n],u=a(s,l);if(void 0===u)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var d=o(n,r,s,u);return(0,i.default)(e,t,u,d,s)};var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=function(e,t){for(var n=0;n<e.length;n++)if(e[n].offset===t)return n},o=function(e,t,n,r){if(e===t.length-1)return n.length-r;for(var i=t[e+1],a=r+1;a<n.length;a++)if(n[a].offset===i)return a-r;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}},function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,n){e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<a;s=r[++n])v(s)||!w(s)?o+=" "+s:o+=" "+l(s);return o},t.deprecate=function(n,i){if(b(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation,a=!0}return n.apply(this,arguments)}};var a,s={};function l(e,n){var r={seen:[],stylize:d};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,e,r.depth)}function u(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function d(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=c(e,i,r)),i}var a=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return o.forEach(function(e,n){t[e]=!0}),t}();if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),T(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(x(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return f(n)}var u,d="",w=!1,S=["{","}"];return p(n)&&(w=!0,S=["[","]"]),x(n)&&(d=" [Function"+(n.name?": "+n.name:"")+"]"),_(n)&&(d=" "+RegExp.prototype.toString.call(n)),E(n)&&(d=" "+Date.prototype.toUTCString.call(n)),T(n)&&(d=" "+f(n)),0!==o.length||w&&0!=n.length?r<0?_(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=w?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)C(t,String(o))?a.push(h(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(h(e,t,n,r,i,!0))}),a}(e,n,r,s,o):o.map(function(t){return h(e,n,r,s,t,w)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,d,S)):S[0]+d+S[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),C(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=v(n)?c(e,l.value,null):c(e,l.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),b(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return void 0===e}function _(e){return w(e)&&"[object RegExp]"===S(e)}function w(e){return"object"==(void 0===e?"undefined":o(e))&&null!==e}function E(e){return w(e)&&"[object Date]"===S(e)}function T(e){return w(e)&&("[object Error]"===S(e)||e instanceof Error)}function x(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.debuglog=function(e){return b(a)&&(a=r.env.NODE_DEBUG||""),e=e.toUpperCase(),s[e]||(new RegExp("\\b"+e+"\\b","i").test(a)?(r.pid,s[e]=function(){t.format.apply(t,arguments)}):s[e]=function(){}),s[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"==(void 0===e?"undefined":o(e))},t.isUndefined=b,t.isRegExp=_,t.isObject=w,t.isDate=E,t.isError=T,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==(void 0===e?"undefined":o(e))||void 0===e},t.isBuffer=n(54),t.log=function(){},t.inherits=n(53),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(0),n(3))},function(e,t,n){(function(t){
/*!
       * The buffer module from node.js, for the browser.
       *
       * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
       * @license  MIT
       */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=n(29),s=Object.prototype.hasOwnProperty,l=Array.prototype.slice,u="foo"===function(){}.name;function d(e){return Object.prototype.toString.call(e)}function c(e){return!i(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var f=e.exports=y,h=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(a.isFunction(e)){if(u)return e.name;var t=e.toString().match(h);return t&&t[1]}}function g(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function v(e){if(u||!a.isFunction(e))return a.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function m(e,t,n,r,i){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function y(e,t){e||m(e,!0,t,"==",f.ok)}function b(e,t,n,s){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==(void 0===e?"undefined":o(e))||null!==t&&"object"==(void 0===t?"undefined":o(t))){if(c(e)&&c(t)&&d(e)===d(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=_(e),o=_(t);if(i&&!o||!i&&o)return!1;if(i)return b(e=l.call(e),t=l.call(t),n);var s,u,d=T(e),c=T(t);if(d.length!==c.length)return!1;for(d.sort(),c.sort(),u=d.length-1;u>=0;u--)if(d[u]!==c[u])return!1;for(u=d.length-1;u>=0;u--)if(!b(e[s=d[u]],t[s],n,r))return!1;return!0}(e,t,n,s))}return n?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function E(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&m(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&a.isError(i),l=!e&&i&&!n;if((s&&o&&w(i,n)||l)&&m(i,n,"Got unwanted exception"+r),e&&i&&n&&!w(i,n)||!e&&i)throw i}f.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=g(v((t=this).actual),128)+" "+t.operator+" "+g(v(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,a=p(n),o=i.indexOf("\n"+a);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},a.inherits(f.AssertionError,Error),f.fail=m,f.ok=y,f.equal=function(e,t,n){e!=t&&m(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&m(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){b(e,t,!1)||m(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){b(e,t,!0)||m(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){b(e,t,!1)&&m(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){b(t,n,!0)&&m(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&m(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&m(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){E(!0,e,t,n)},f.doesNotThrow=function(e,t,n){E(!1,e,t,n)},f.ifError=function(e){if(e)throw e};var T=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n(0))},function(e,t,n){e.exports=a;var r=n(2),i=n(6);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(5),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){var r=n(9).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=d,this.end=c,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"ï¿½".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"ï¿½".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"ï¿½".repeat(n+2)}}(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"ï¿½".repeat(this.lastTotal-this.lastNeed):t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=o(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=o(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){var r=n(10);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){e.exports=n(20).EventEmitter},function(e,t,n){(function(t,r){var i=n(10);e.exports=b;var a,o=n(38);b.ReadableState=y,n(20).EventEmitter;var s=function(e,t){return e.listeners(t).length},l=n(34),u=n(9).Buffer,d=t.Uint8Array||function(){},c=n(6);c.inherits=n(5);var f=n(66),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,g=n(65),v=n(33);c.inherits(b,l);var m=["error","close","destroy","pause","resume"];function y(e,t){a=a||n(2),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(32).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(a=a||n(2),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function _(e,t,n,r,i){var a,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,x(e)}}(e,o)):(i||(a=function(e,t){var n,r;return r=t,u.isBuffer(r)||r instanceof d||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):C(e,o)):w(e,o,t,!1))):r||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),C(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=n(32).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var E=8388608;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(S,e):S(e))}function S(e){h("emit readable"),e.emit("readable"),M(e)}function C(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(O,e,t))}function O(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function P(e){h("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0==(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0==(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function L(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(D,t,e))}function D(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function k(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):x(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,t);var l=t&&!1===t.end||e===r.stdout||e===r.stderr?y:u;function u(){h("onend"),e.end()}a.endEmitted?i.nextTick(l):n.once("end",l),e.on("unpipe",function t(r,i){h("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),e.removeListener("close",v),e.removeListener("finish",m),e.removeListener("drain",d),e.removeListener("error",g),e.removeListener("unpipe",t),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",p),c=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d())});var d=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,M(e))}}(n);e.on("drain",d);var c=!1,f=!1;function p(t){h("ondata"),f=!1,!1!==e.write(t)||f||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==k(a.pipes,e))&&!c&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function g(t){h("onerror",t),y(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",m),y()}function m(){h("onfinish"),e.removeListener("close",v),y()}function y(){h("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",v),e.once("finish",m),e.emit("pipe",n),a.flowing||(h("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=k(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},b.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&x(this):i.nextTick(P,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(I,e,t))}(this,e)),this},b.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<m.length;a++)e.on(m[a],this.emit.bind(this,m[a]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},b._fromList=A}).call(this,n(0),n(3))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var n=new r.default(a.default,e);return function(){!function(){if(n.seek(128),"DICM"!==n.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}();for(var e=[],t={};n.position<n.byteArray.length;){var r=n.position,s=(0,o.default)(n,e);if(s.tag>"x0002ffff"){n.position=r;break}s.parser=a.default,t[s.tag]=s}var l=new i.default(n.byteArrayParser,n.byteArray,t);return l.warnings=n.warnings,l.position=n.position,l}()};var r=s(n(12)),i=s(n(7)),a=s(n(21)),o=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(e[t]<<8)+e[t+1]},readInt16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=(e[t]<<8)+e[t+1];return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*e[t]+e[t+1])+e[t+2])+e[t+3]},readInt32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3]},readFloat:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=e[t],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=e[t],n[6]=e[t+1],n[5]=e[t+2],n[4]=e[t+3],n[3]=e[t+4],n[2]=e[t+5],n[1]=e[t+6],n[0]=e[t+7],new Float64Array(n.buffer)[0]}}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,o.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var i=u(e,n);t.items.push(i)}e.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),t.length=e.byteArray.length-t.dataOffset}(e,t,n):function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var i=u(e,n);t.items.push(i)}}(e,t,n)};var r=l(n(7)),i=l(n(23)),a=l(n(13)),o=l(n(4)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(16));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=(0,a.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var a=(0,i.default)(e,void 0,t);if(n[a.tag]=a,"xfffee00d"===a.tag)return new r.default(e.byteArrayParser,e.byteArray,n)}return e.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new r.default(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new r.default(e.byteArrayParser,e.byteArray,{}),s.parseDicomDataSetImplicit(n.dataSet,e,e.position+n.length,{vrCallback:t})),n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,o.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var i=u(e,n);t.items.push(i)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),t.length=e.position-t.dataOffset}(e,t,n):function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var i=u(e,n);t.items.push(i)}}(e,t,n)};var r=l(n(7)),i=l(n(15)),a=l(n(13)),o=l(n(4)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(16));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=(0,a.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var a=(0,i.default)(e,t);if(n[a.tag]=a,"xfffee00d"===a.tag)return new r.default(e.byteArrayParser,e.byteArray,n)}return t.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new r.default(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new r.default(e.byteArrayParser,e.byteArray,{}),s.parseDicomDataSetExplicit(n.dataSet,e,e.position+n.length)),n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57565===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(t.encapsulatedPixelData=!0,t.basicOffsetTable=[],t.fragments=[],"xfffee000"!==(0,i.default)(e))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var r=e.readUint32()/4,a=0;a<r;a++){var o=e.readUint32();t.basicOffsetTable.push(o)}for(var s=e.position;e.position<e.byteArray.length;){var l=(0,i.default)(e),u=e.readUint32();if("xfffee0dd"===l)return e.seek(u),void(t.length=e.position-t.dataOffset);if("xfffee000"!==l)return n&&n.push("unexpected tag "+l+" while searching for end of pixel data element with undefined length"),u>e.byteArray.length-e.position&&(u=e.byteArray.length-e.position),t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u),void(t.length=e.position-t.dataOffset);t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u)}n&&n.push("pixel data element "+t.tag+" missing sequence delimiter tag xfffee0dd")};var r,i=(r=n(4))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e||void 0===t)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===t.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var n,i=t.vr,a=t.tag;function o(t,n){for(var r="",i=0;i<t;i++)0!==i&&(r+="/"),r+=n.call(e,a,i).toString();return r}if(!0===r.isStringVr(i))n=e.string(a);else{if("AT"===i){var s=e.uint32(a);if(void 0===s)return;return s<0&&(s=4294967295+s+1),"x"+s.toString(16).toUpperCase()}"US"===i?n=o(t.length/2,e.uint16):"SS"===i?n=o(t.length/2,e.int16):"UL"===i?n=o(t.length/4,e.uint32):"SL"===i?n=o(t.length/4,e.int32):"FD"===i?n=o(t.length/8,e.double):"FL"===i&&(n=o(t.length/4,e.float))}return n};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(25))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(o||(o=!0,console&&console.log),void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==t.basicOffsetTable.length?(0,r.default)(e,t,n):(0,i.default)(e,t,0,t.fragments.length)};var r=a(n(26)),i=a(n(17));function a(e){return e&&e.__esModule?e:{default:e}}var o=!1},function(e,t,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){var r=n(8),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,u,d,c,f){var h,p,g,v,m,y,b,_,w,E=f.bits,T=0,x=0,S=0,C=0,O=0,P=0,I=0,M=0,A=0,L=0,D=null,k=0,j=new r.Buf16(16),R=new r.Buf16(16),N=null,U=0;for(T=0;T<=15;T++)j[T]=0;for(x=0;x<l;x++)j[t[n+x]]++;for(O=E,C=15;C>=1&&0===j[C];C--);if(O>C&&(O=C),0===C)return u[d++]=20971520,u[d++]=20971520,f.bits=1,0;for(S=1;S<C&&0===j[S];S++);for(O<S&&(O=S),M=1,T=1;T<=15;T++)if(M<<=1,(M-=j[T])<0)return-1;if(M>0&&(0===e||1!==C))return-1;for(R[1]=0,T=1;T<15;T++)R[T+1]=R[T]+j[T];for(x=0;x<l;x++)0!==t[n+x]&&(c[R[t[n+x]]++]=x);if(0===e?(D=N=c,y=19):1===e?(D=i,k-=257,N=a,U-=257,y=256):(D=o,N=s,y=-1),L=0,x=0,T=S,m=d,P=O,I=0,g=-1,v=(A=1<<O)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){b=T-I,c[x]<y?(_=0,w=c[x]):c[x]>y?(_=N[U+c[x]],w=D[k+c[x]]):(_=96,w=0),h=1<<T-I,S=p=1<<P;do{u[m+(L>>I)+(p-=h)]=b<<24|_<<16|w|0}while(0!==p);for(h=1<<T-1;L&h;)h>>=1;if(0!==h?(L&=h-1,L+=h):L=0,x++,0==--j[T]){if(T===C)break;T=t[n+c[x]]}if(T>O&&(L&v)!==g){for(0===I&&(I=O),m+=S,M=1<<(P=T-I);P+I<C&&!((M-=j[P+I])<=0);)P++,M<<=1;if(A+=1<<P,1===e&&A>852||2===e&&A>592)return 1;u[g=L&v]=O<<24|P<<16|m-d|0}}return 0!==L&&(u[m+L]=T-I<<24|64<<16|0),f.bits=O,0}},function(e,t,n){e.exports=function(e,t){var n,r,i,a,o,s,l,u,d,c,f,h,p,g,v,m,y,b,_,w,E,T,x,S,C;n=e.state,r=e.next_in,S=e.input,i=r+(e.avail_in-5),a=e.next_out,C=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),l=n.dmax,u=n.wsize,d=n.whave,c=n.wnext,f=n.window,h=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(h+=S[r++]<<p,p+=8,h+=S[r++]<<p,p+=8),b=g[h&m];t:for(;;){if(h>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))C[a++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(h&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(_&=15)&&(p<_&&(h+=S[r++]<<p,p+=8),w+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=S[r++]<<p,p+=8,h+=S[r++]<<p,p+=8),b=v[h&y];n:for(;;){if(h>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=v[(65535&b)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&b,p<(_&=15)&&(h+=S[r++]<<p,(p+=8)<_&&(h+=S[r++]<<p,p+=8)),(E+=h&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=_,p-=_,E>(_=a-o)){if((_=E-_)>d&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(T=0,x=f,0===c){if(T+=u-_,_<w){w-=_;do{C[a++]=f[T++]}while(--_);T=a-E,x=C}}else if(c<_){if(T+=u+c-_,(_-=c)<w){w-=_;do{C[a++]=f[T++]}while(--_);if(T=0,c<w){w-=_=c;do{C[a++]=f[T++]}while(--_);T=a-E,x=C}}}else if(T+=c-_,_<w){w-=_;do{C[a++]=f[T++]}while(--_);T=a-E,x=C}for(;w>2;)C[a++]=x[T++],C[a++]=x[T++],C[a++]=x[T++],w-=3;w&&(C[a++]=x[T++],w>1&&(C[a++]=x[T++]))}else{T=a-E;do{C[a++]=C[T++],C[a++]=C[T++],C[a++]=C[T++],w-=3}while(w>2);w&&(C[a++]=C[T++],w>1&&(C[a++]=C[T++]))}break}}break}}while(r<i&&a<s);r-=w=p>>3,h&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=h,n.bits=p}},function(e,t,n){var r=n(8),i=n(28),a=n(27),o=n(47),s=n(46),l=1,u=2,d=0,c=-2,f=1,h=12,p=30,g=852,v=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function y(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(g),t.distcode=t.distdyn=new r.Buf32(v),t.sane=1,t.back=-1,d):c}function b(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,y(e)):c}function _(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,b(e))):c}function w(e,t){var n,i;return e?(i=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=i,i.window=null,(n=_(e,t))!==d&&(e.state=null),n):c}var E,T,x=!0;function S(e){if(x){var t;for(E=new r.Buf32(512),T=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,T,0,e.work,{bits:5}),x=!1}e.lencode=E,e.lenbits=9,e.distcode=T,e.distbits=5}function C(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=b,t.inflateReset2=_,t.inflateResetKeep=y,t.inflateInit=function(e){return w(e,15)},t.inflateInit2=w,t.inflate=function(e,t){var n,g,v,y,b,_,w,E,T,x,O,P,I,M,A,L,D,k,j,R,N,U,B,H,F=0,V=new r.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;(n=e.state).mode===h&&(n.mode=13),b=e.next_out,v=e.output,w=e.avail_out,y=e.next_in,g=e.input,_=e.avail_in,E=n.hold,T=n.bits,x=_,O=w,U=d;e:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;T<16;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(2&n.wrap&&35615===E){n.check=0,V[0]=255&E,V[1]=E>>>8&255,n.check=a(n.check,V,2,0),E=0,T=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&E)<<8)+(E>>8))%31){e.msg="incorrect header check",n.mode=p;break}if(8!=(15&E)){e.msg="unknown compression method",n.mode=p;break}if(T-=4,N=8+(15&(E>>>=4)),0===n.wbits)n.wbits=N;else if(N>n.wbits){e.msg="invalid window size",n.mode=p;break}n.dmax=1<<N,e.adler=n.check=1,n.mode=512&E?10:h,E=0,T=0;break;case 2:for(;T<16;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(n.flags=E,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=p;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=p;break}n.head&&(n.head.text=E>>8&1),512&n.flags&&(V[0]=255&E,V[1]=E>>>8&255,n.check=a(n.check,V,2,0)),E=0,T=0,n.mode=3;case 3:for(;T<32;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}n.head&&(n.head.time=E),512&n.flags&&(V[0]=255&E,V[1]=E>>>8&255,V[2]=E>>>16&255,V[3]=E>>>24&255,n.check=a(n.check,V,4,0)),E=0,T=0,n.mode=4;case 4:for(;T<16;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}n.head&&(n.head.xflags=255&E,n.head.os=E>>8),512&n.flags&&(V[0]=255&E,V[1]=E>>>8&255,n.check=a(n.check,V,2,0)),E=0,T=0,n.mode=5;case 5:if(1024&n.flags){for(;T<16;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}n.length=E,n.head&&(n.head.extra_len=E),512&n.flags&&(V[0]=255&E,V[1]=E>>>8&255,n.check=a(n.check,V,2,0)),E=0,T=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((P=n.length)>_&&(P=_),P&&(n.head&&(N=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,g,y,P,N)),512&n.flags&&(n.check=a(n.check,g,P,y)),_-=P,y+=P,n.length-=P),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===_)break e;P=0;do{N=g[y+P++],n.head&&N&&n.length<65536&&(n.head.name+=String.fromCharCode(N))}while(N&&P<_);if(512&n.flags&&(n.check=a(n.check,g,P,y)),_-=P,y+=P,N)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===_)break e;P=0;do{N=g[y+P++],n.head&&N&&n.length<65536&&(n.head.comment+=String.fromCharCode(N))}while(N&&P<_);if(512&n.flags&&(n.check=a(n.check,g,P,y)),_-=P,y+=P,N)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;T<16;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(E!==(65535&n.check)){e.msg="header crc mismatch",n.mode=p;break}E=0,T=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=h;break;case 10:for(;T<32;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}e.adler=n.check=m(E),E=0,T=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=b,e.avail_out=w,e.next_in=y,e.avail_in=_,n.hold=E,n.bits=T,2;e.adler=n.check=1,n.mode=h;case h:if(5===t||6===t)break e;case 13:if(n.last){E>>>=7&T,T-=7&T,n.mode=27;break}for(;T<3;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}switch(n.last=1&E,T-=1,3&(E>>>=1)){case 0:n.mode=14;break;case 1:if(S(n),n.mode=20,6===t){E>>>=2,T-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=p}E>>>=2,T-=2;break;case 14:for(E>>>=7&T,T-=7&T;T<32;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if((65535&E)!=(E>>>16^65535)){e.msg="invalid stored block lengths",n.mode=p;break}if(n.length=65535&E,E=0,T=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(P=n.length){if(P>_&&(P=_),P>w&&(P=w),0===P)break e;r.arraySet(v,g,y,P,b),_-=P,y+=P,w-=P,b+=P,n.length-=P;break}n.mode=h;break;case 17:for(;T<14;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(n.nlen=257+(31&E),E>>>=5,T-=5,n.ndist=1+(31&E),E>>>=5,T-=5,n.ncode=4+(15&E),E>>>=4,T-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=p;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;T<3;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}n.lens[z[n.have++]]=7&E,E>>>=3,T-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},U=s(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,U){e.msg="invalid code lengths set",n.mode=p;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;L=(F=n.lencode[E&(1<<n.lenbits)-1])>>>16&255,D=65535&F,!((A=F>>>24)<=T);){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(D<16)E>>>=A,T-=A,n.lens[n.have++]=D;else{if(16===D){for(H=A+2;T<H;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(E>>>=A,T-=A,0===n.have){e.msg="invalid bit length repeat",n.mode=p;break}N=n.lens[n.have-1],P=3+(3&E),E>>>=2,T-=2}else if(17===D){for(H=A+3;T<H;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}T-=A,N=0,P=3+(7&(E>>>=A)),E>>>=3,T-=3}else{for(H=A+7;T<H;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}T-=A,N=0,P=11+(127&(E>>>=A)),E>>>=7,T-=7}if(n.have+P>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=p;break}for(;P--;)n.lens[n.have++]=N}}if(n.mode===p)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=p;break}if(n.lenbits=9,B={bits:n.lenbits},U=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,U){e.msg="invalid literal/lengths set",n.mode=p;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},U=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,U){e.msg="invalid distances set",n.mode=p;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(_>=6&&w>=258){e.next_out=b,e.avail_out=w,e.next_in=y,e.avail_in=_,n.hold=E,n.bits=T,o(e,O),b=e.next_out,v=e.output,w=e.avail_out,y=e.next_in,g=e.input,_=e.avail_in,E=n.hold,T=n.bits,n.mode===h&&(n.back=-1);break}for(n.back=0;L=(F=n.lencode[E&(1<<n.lenbits)-1])>>>16&255,D=65535&F,!((A=F>>>24)<=T);){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(L&&0==(240&L)){for(k=A,j=L,R=D;L=(F=n.lencode[R+((E&(1<<k+j)-1)>>k)])>>>16&255,D=65535&F,!(k+(A=F>>>24)<=T);){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}E>>>=k,T-=k,n.back+=k}if(E>>>=A,T-=A,n.back+=A,n.length=D,0===L){n.mode=26;break}if(32&L){n.back=-1,n.mode=h;break}if(64&L){e.msg="invalid literal/length code",n.mode=p;break}n.extra=15&L,n.mode=22;case 22:if(n.extra){for(H=n.extra;T<H;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}n.length+=E&(1<<n.extra)-1,E>>>=n.extra,T-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;L=(F=n.distcode[E&(1<<n.distbits)-1])>>>16&255,D=65535&F,!((A=F>>>24)<=T);){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(0==(240&L)){for(k=A,j=L,R=D;L=(F=n.distcode[R+((E&(1<<k+j)-1)>>k)])>>>16&255,D=65535&F,!(k+(A=F>>>24)<=T);){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}E>>>=k,T-=k,n.back+=k}if(E>>>=A,T-=A,n.back+=A,64&L){e.msg="invalid distance code",n.mode=p;break}n.offset=D,n.extra=15&L,n.mode=24;case 24:if(n.extra){for(H=n.extra;T<H;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}n.offset+=E&(1<<n.extra)-1,E>>>=n.extra,T-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=p;break}n.mode=25;case 25:if(0===w)break e;if(P=O-w,n.offset>P){if((P=n.offset-P)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=p;break}P>n.wnext?(P-=n.wnext,I=n.wsize-P):I=n.wnext-P,P>n.length&&(P=n.length),M=n.window}else M=v,I=b-n.offset,P=n.length;P>w&&(P=w),w-=P,n.length-=P;do{v[b++]=M[I++]}while(--P);0===n.length&&(n.mode=21);break;case 26:if(0===w)break e;v[b++]=n.length,w--,n.mode=21;break;case 27:if(n.wrap){for(;T<32;){if(0===_)break e;_--,E|=g[y++]<<T,T+=8}if(O-=w,e.total_out+=O,n.total+=O,O&&(e.adler=n.check=n.flags?a(n.check,v,O,b-O):i(n.check,v,O,b-O)),O=w,(n.flags?E:m(E))!==n.check){e.msg="incorrect data check",n.mode=p;break}E=0,T=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;T<32;){if(0===_)break e;_--,E+=g[y++]<<T,T+=8}if(E!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=p;break}E=0,T=0}n.mode=29;case 29:U=1;break e;case p:U=-3;break e;case 31:return-4;case 32:default:return c}return e.next_out=b,e.avail_out=w,e.next_in=y,e.avail_in=_,n.hold=E,n.bits=T,(n.wsize||O!==e.avail_out&&n.mode<p&&(n.mode<27||4!==t))&&C(e,e.output,e.next_out,O-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,O-=e.avail_out,e.total_in+=x,e.total_out+=O,n.total+=O,n.wrap&&O&&(e.adler=n.check=n.flags?a(n.check,v,O,e.next_out-O):i(n.check,v,O,e.next_out-O)),e.data_type=n.bits+(n.last?64:0)+(n.mode===h?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===O||4===t)&&U===d&&(U=-5),U)},t.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,d},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?c:(n.head=t,t.done=!1,d):c},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?c:11===n.mode&&i(1,t,r,0)!==n.check?-3:C(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,d):c},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){var r=n(8);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var a=0,o=256,s=o+1+29,l=30,u=19,d=2*s+1,c=15,f=16,h=256,p=16,g=17,v=18,m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],w=new Array(2*(s+2));i(w);var E=new Array(2*l);i(E);var T=new Array(512);i(T);var x=new Array(256);i(x);var S=new Array(29);i(S);var C,O,P,I=new Array(l);function M(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function A(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function L(e){return e<256?T[e]:T[256+(e>>>7)]}function D(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function k(e,t,n){e.bi_valid>f-n?(e.bi_buf|=t<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=t>>f-e.bi_valid,e.bi_valid+=n-f):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function j(e,t,n){k(e,n[2*t],n[2*t+1])}function R(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function N(e,t,n){var r,i,a=new Array(c+1),o=0;for(r=1;r<=c;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=R(a[s]++,s))}}function U(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<u;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*h]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function B(e){e.bi_valid>8?D(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function F(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function V(e,t,n){var r,i,a,s,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?j(e,i,t):(j(e,(a=x[i])+o+1,t),0!==(s=m[a])&&k(e,i-=S[a],s),j(e,a=L(--r),n),0!==(s=y[a])&&k(e,r-=I[a],s))}while(l<e.last_lit);j(e,h,t)}function z(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=d,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)F(e,a,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],F(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,F(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,l=t.dyn_tree,u=t.max_code,f=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,v=t.stat_desc.max_length,m=0;for(a=0;a<=c;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<d;n++)(a=l[2*l[2*(r=e.heap[n])+1]+1]+1)>v&&(a=v,m++),l[2*r+1]=a,r>u||(e.bl_count[a]++,o=0,r>=g&&(o=p[r-g]),s=l[2*r],e.opt_len+=s*(a+o),h&&(e.static_len+=s*(f[2*r+1]+o)));if(0!==m){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,m-=2}while(m>0);for(a=v;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>u||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(e,t),N(a,u,e.bl_count)}function W(e,t,n){var r,i,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*p]++):s<=10?e.bl_tree[2*g]++:e.bl_tree[2*v]++,s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))}function q(e,t,n){var r,i,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<l&&i===o)){if(s<u)do{j(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(j(e,i,e.bl_tree),s--),j(e,p,e.bl_tree),k(e,s-3,2)):s<=10?(j(e,g,e.bl_tree),k(e,s-3,3)):(j(e,v,e.bl_tree),k(e,s-11,7));s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4)}}i(I);var G=!1;function $(e,t,n,i){k(e,(a<<1)+(i?1:0),3),function(e,t,n,i){B(e),D(e,n),D(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}t._tr_init=function(e){G||(function(){var e,t,n,r,i,a=new Array(c+1);for(n=0,r=0;r<28;r++)for(S[r]=n,e=0;e<1<<m[r];e++)x[n++]=r;for(x[n-1]=r,i=0,r=0;r<16;r++)for(I[r]=i,e=0;e<1<<y[r];e++)T[i++]=r;for(i>>=7;r<l;r++)for(I[r]=i<<7,e=0;e<1<<y[r]-7;e++)T[256+i++]=r;for(t=0;t<=c;t++)a[t]=0;for(e=0;e<=143;)w[2*e+1]=8,e++,a[8]++;for(;e<=255;)w[2*e+1]=9,e++,a[9]++;for(;e<=279;)w[2*e+1]=7,e++,a[7]++;for(;e<=287;)w[2*e+1]=8,e++,a[8]++;for(N(w,s+1,a),e=0;e<l;e++)E[2*e+1]=5,E[2*e]=R(e,5);C=new M(w,m,o+1,s,c),O=new M(E,y,0,l,c),P=new M(new Array(0),b,0,u,7)}(),G=!0),e.l_desc=new A(e.dyn_ltree,C),e.d_desc=new A(e.dyn_dtree,O),e.bl_desc=new A(e.bl_tree,P),e.bi_buf=0,e.bi_valid=0,U(e)},t._tr_stored_block=$,t._tr_flush_block=function(e,t,n,r){var i,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),z(e,e.l_desc),z(e,e.d_desc),s=function(e){var t;for(W(e,e.dyn_ltree,e.l_desc.max_code),W(e,e.dyn_dtree,e.d_desc.max_code),z(e,e.bl_desc),t=u-1;t>=3&&0===e.bl_tree[2*_[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?$(e,t,n,r):4===e.strategy||a===i?(k(e,2+(r?1:0),3),V(e,w,E)):(k(e,4+(r?1:0),3),function(e,t,n,r){var i;for(k(e,t-257,5),k(e,n-1,5),k(e,r-4,4),i=0;i<r;i++)k(e,e.bl_tree[2*_[i]+1],3);q(e,e.dyn_ltree,t-1),q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),V(e,e.dyn_ltree,e.dyn_dtree)),U(e),r&&B(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(x[n]+o+1)]++,e.dyn_dtree[2*L(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){k(e,2,3),j(e,h,w),function(e){16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){var r,i=n(8),a=n(50),o=n(28),s=n(27),l=n(49),u=0,d=4,c=0,f=-2,h=-1,p=1,g=4,v=2,m=8,y=9,b=286,_=30,w=19,E=2*b+1,T=15,x=3,S=258,C=S+x+1,O=42,P=103,I=113,M=666,A=1,L=2,D=3,k=4;function j(e,t){return e.msg=l[t],t}function R(e){return(e<<1)-(e>4?9:0)}function N(e){for(var t=e.length;--t>=0;)e[t]=0}function U(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function B(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,U(e.strm)}function H(e,t){e.pending_buf[e.pending++]=t}function F(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function V(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,u=e.window,d=e.w_mask,c=e.prev,f=e.strstart+S,h=u[a+o-1],p=u[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+o]===p&&u[n+o-1]===h&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<f);if(r=S-(f-a),a=f-S,r>o){if(e.match_start=t,o=r,r>=s)break;h=u[a+o-1],p=u[a+o]}}}while((t=c[t&d])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function z(e){var t,n,r,a,l,u,d,c,f,h,p=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-C)){i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=p?r-p:0}while(--n);t=n=p;do{r=e.prev[--t],e.prev[t]=r>=p?r-p:0}while(--n);a+=p}if(0===e.strm.avail_in)break;if(u=e.strm,d=e.window,c=e.strstart+e.lookahead,f=a,h=void 0,(h=u.avail_in)>f&&(h=f),n=0===h?0:(u.avail_in-=h,i.arraySet(d,u.input,u.next_in,h,c),1===u.state.wrap?u.adler=o(u.adler,d,h,c):2===u.state.wrap&&(u.adler=s(u.adler,d,h,c)),u.next_in+=h,u.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=x)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+x-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<C&&0!==e.strm.avail_in)}function W(e,t){for(var n,r;;){if(e.lookahead<C){if(z(e),e.lookahead<C&&t===u)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-C&&(e.match_length=V(e,n)),e.match_length>=x)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(B(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<x-1?e.strstart:x-1,t===d?(B(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?A:L}function q(e,t){for(var n,r,i;;){if(e.lookahead<C){if(z(e),e.lookahead<C&&t===u)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-C&&(e.match_length=V(e,n),e.match_length<=5&&(e.strategy===p||e.match_length===x&&e.strstart-e.match_start>4096)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-x,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=x-1,e.strstart++,r&&(B(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&B(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,t===d?(B(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?A:L}function G(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function $(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=v,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?O:I,e.adler=2===t.wrap?0:1,t.last_flush=u,a._tr_init(t),c):j(e,f)}function Y(e){var t,n=$(e);return n===c&&((t=e.state).window_size=2*t.w_size,N(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=x-1,t.match_available=0,t.ins_h=0),n}function Z(e,t,n,r,a,o){if(!e)return f;var s=1;if(t===h&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>y||n!==m||r<8||r>15||t<0||t>9||o<0||o>g)return j(e,f);8===r&&(r=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*E),this.dyn_dtree=new i.Buf16(2*(2*_+1)),this.bl_tree=new i.Buf16(2*(2*w+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(T+1),this.heap=new i.Buf16(2*b+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,Y(e)}r=[new G(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(z(e),0===e.lookahead&&t===u)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,B(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-C&&(B(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===d?(B(e,!0),0===e.strm.avail_out?D:k):(e.strstart>e.block_start&&(B(e,!1),e.strm.avail_out),A)}),new G(4,4,8,4,W),new G(4,5,16,8,W),new G(4,6,32,32,W),new G(4,4,16,16,q),new G(8,16,32,32,q),new G(8,16,128,128,q),new G(8,32,128,256,q),new G(32,128,258,1024,q),new G(32,258,258,4096,q)],t.deflateInit=function(e,t){return Z(e,t,m,15,8,0)},t.deflateInit2=Z,t.deflateReset=Y,t.deflateResetKeep=$,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,c):f},t.deflate=function(e,t){var n,i,o,l;if(!e||!e.state||t>5||t<0)return e?j(e,f):f;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===M&&t!==d)return j(e,0===e.avail_out?-5:f);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===O)if(2===i.wrap)e.adler=0,H(i,31),H(i,139),H(i,8),i.gzhead?(H(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),H(i,255&i.gzhead.time),H(i,i.gzhead.time>>8&255),H(i,i.gzhead.time>>16&255),H(i,i.gzhead.time>>24&255),H(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),H(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(H(i,255&i.gzhead.extra.length),H(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(H(i,0),H(i,0),H(i,0),H(i,0),H(i,0),H(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),H(i,3),i.status=I);else{var h=m+(i.w_bits-8<<4)<<8;h|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=I,F(i,h),0!==i.strstart&&(F(i,e.adler>>>16),F(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),U(e),o=i.pending,i.pending!==i.pending_buf_size));)H(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),U(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,H(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),U(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,H(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=P)}else i.status=P;if(i.status===P&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&U(e),i.pending+2<=i.pending_buf_size&&(H(i,255&e.adler),H(i,e.adler>>8&255),e.adler=0,i.status=I)):i.status=I),0!==i.pending){if(U(e),0===e.avail_out)return i.last_flush=-1,c}else if(0===e.avail_in&&R(t)<=R(n)&&t!==d)return j(e,-5);if(i.status===M&&0!==e.avail_in)return j(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&i.status!==M){var p=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(z(e),0===e.lookahead)){if(t===u)return A;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(B(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===d?(B(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?A:L}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=S){if(z(e),e.lookahead<=S&&t===u)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+S;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=S-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(n=a._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(B(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===d?(B(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?A:L}(i,t):r[i.level].func(i,t);if(p!==D&&p!==k||(i.status=M),p===A||p===D)return 0===e.avail_out&&(i.last_flush=-1),c;if(p===L&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(N(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),U(e),0===e.avail_out))return i.last_flush=-1,c}return t!==d?c:i.wrap<=0?1:(2===i.wrap?(H(i,255&e.adler),H(i,e.adler>>8&255),H(i,e.adler>>16&255),H(i,e.adler>>24&255),H(i,255&e.total_in),H(i,e.total_in>>8&255),H(i,e.total_in>>16&255),H(i,e.total_in>>24&255)):(F(i,e.adler>>>16),F(i,65535&e.adler)),U(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?c:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==O&&69!==t&&73!==t&&91!==t&&t!==P&&t!==I&&t!==M?j(e,f):(e.state=null,t===I?j(e,-3):c):f},t.deflateSetDictionary=function(e,t){var n,r,a,s,l,u,d,h,p=t.length;if(!e||!e.state)return f;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==O||n.lookahead)return f;for(1===s&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(N(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,p-n.w_size,n.w_size,0),t=h,p=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,z(n);n.lookahead>=x;){r=n.strstart,a=n.lookahead-(x-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+x-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=x-1,z(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=x-1,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=s,c},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==(void 0===e?"undefined":o(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){(function(e,r){var i=n(30),a=n(52),o=n(51),s=n(48),l=n(45);for(var u in l)t[u]=l[u];function d(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||s.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},d.prototype.write=function(e,t,n,r,i,a,o){return this._write(!0,e,t,n,r,i,a,o)},d.prototype.writeSync=function(e,t,n,r,i,a,o){return this._write(!1,e,t,n,r,i,a,o)},d.prototype._write=function(n,a,o,s,l,u,d,c){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),l=0,s=0),this.strm.avail_in=l,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=c,this.strm.output=u,this.strm.next_out=d,this.flush=a,!n)return this._process(),this._checkError()?this._afterSync():void 0;var f=this;return r.nextTick(function(){f._process(),f._after()}),this},d.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},d.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},d.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(e,n,r,a,o){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,o),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(e,n,r,i,l){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=d}).call(this,n(1).Buffer,n(3))},function(e,t,n){e.exports=n(19).PassThrough},function(e,t,n){e.exports=n(19).Transform},function(e,t,n){e.exports=n(2)},function(e,t,n){e.exports=n(18)},function(e,t,n){e.exports=a;var r=n(31),i=n(6);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(5),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation"),r=!0}return e.apply(this,arguments)}}}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,i,a,o,s,l=1,u={},d=!1,c=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,r=function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[l]=i,r(l),l++},f.clearImmediate=h}function h(e){delete u[e]}function p(e){if(d)setTimeout(p,0,e);else{var t=u[e];if(t){d=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(3))},function(e,t,n){(function(e){var r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(62),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t){},function(e,t,n){var r=n(9).Buffer,i=n(64);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i=r.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=i,n=o,a.data.copy(t,n),o+=a.data.length,a=a.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){e.exports=i;var r=n(20).EventEmitter;function i(){r.call(this)}n(5)(i,r),i.Readable=n(19),i.Writable=n(59),i.Duplex=n(58),i.Transform=n(57),i.PassThrough=n(56),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",u),e.on("error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},function(e,t,n){(function(e){var r=n(1).Buffer,i=n(67).Transform,a=n(55),o=n(29),s=n(30).ok,l=n(1).kMaxLength,u="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var d=Object.keys(a),c=0;c<d.length;c++){var f=d[c];f.match(/^Z/)&&Object.defineProperty(t,f,{enumerable:!0,value:a[f],writable:!1})}for(var h={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},p=Object.keys(h),g=0;g<p.length;g++){var v=p[g];h[h[v]]=v}function m(e,t,n){var i=[],a=0;function o(){for(var t;null!==(t=e.read());)i.push(t),a+=t.length;e.once("readable",o)}function s(){var t,o=null;a>=l?o=new RangeError(u):t=r.concat(i,a),i=[],e.close(),n(o,t)}e.on("error",function(t){e.removeListener("end",s),e.removeListener("readable",o),n(t)}),e.on("end",s),e.end(t),o()}function y(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function b(e){if(!(this instanceof b))return new b(e);O.call(this,e,a.DEFLATE)}function _(e){if(!(this instanceof _))return new _(e);O.call(this,e,a.INFLATE)}function w(e){if(!(this instanceof w))return new w(e);O.call(this,e,a.GZIP)}function E(e){if(!(this instanceof E))return new E(e);O.call(this,e,a.GUNZIP)}function T(e){if(!(this instanceof T))return new T(e);O.call(this,e,a.DEFLATERAW)}function x(e){if(!(this instanceof x))return new x(e);O.call(this,e,a.INFLATERAW)}function S(e){if(!(this instanceof S))return new S(e);O.call(this,e,a.UNZIP)}function C(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function O(e,n){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!C(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!C(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){P(s),s._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],s.emit("error",r)};var l=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(l=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,l,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function P(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function I(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(h),writable:!1}),t.Deflate=b,t.Inflate=_,t.Gzip=w,t.Gunzip=E,t.DeflateRaw=T,t.InflateRaw=x,t.Unzip=S,t.createDeflate=function(e){return new b(e)},t.createInflate=function(e){return new _(e)},t.createDeflateRaw=function(e){return new T(e)},t.createInflateRaw=function(e){return new x(e)},t.createGzip=function(e){return new w(e)},t.createGunzip=function(e){return new E(e)},t.createUnzip=function(e){return new S(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new b(t),e,n)},t.deflateSync=function(e,t){return y(new b(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new w(t),e,n)},t.gzipSync=function(e,t){return y(new w(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new T(t),e,n)},t.deflateRawSync=function(e,t){return y(new T(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new S(t),e,n)},t.unzipSync=function(e,t){return y(new S(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new _(t),e,n)},t.inflateSync=function(e,t){return y(new _(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new E(t),e,n)},t.gunzipSync=function(e,t){return y(new E(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new x(t),e,n)},t.inflateRawSync=function(e,t){return y(new x(t),e)},o.inherits(O,i),O.prototype.params=function(n,r,i){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(a.Z_SYNC_FLUSH,function(){s(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,i&&i())})}else e.nextTick(i)},O.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},O.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},O.prototype.flush=function(t,n){var i=this,o=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=a.Z_FULL_FLUSH),o.ended?n&&e.nextTick(n):o.ending?n&&this.once("end",n):o.needDrain?n&&this.once("drain",function(){return i.flush(t,n)}):(this._flushFlag=t,this.write(r.alloc(0),"",n))},O.prototype.close=function(t){P(this,t),e.nextTick(I,this)},O.prototype._transform=function(e,t,n){var i,o=this._writableState,s=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||r.isBuffer(e)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},O.prototype._processChunk=function(e,t,n){var i=e&&e.length,a=this._chunkSize-this._offset,o=0,d=this,c="function"==typeof n;if(!c){var f,h=[],p=0;this.on("error",function(e){f=e}),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(t,e,o,i,this._buffer,this._offset,a)}while(!this._hadError&&y(g[0],g[1]));if(this._hadError)throw f;if(p>=l)throw P(this),new RangeError(u);var v=r.concat(h,p);return P(this),v}s(this._handle,"zlib binding closed");var m=this._handle.write(t,e,o,i,this._buffer,this._offset,a);function y(l,u){if(this&&(this.buffer=null,this.callback=null),!d._hadError){var f=a-u;if(s(f>=0,"have should not go down"),f>0){var g=d._buffer.slice(d._offset,d._offset+f);d._offset+=f,c?d.push(g):(h.push(g),p+=g.length)}if((0===u||d._offset>=d._chunkSize)&&(a=d._chunkSize,d._offset=0,d._buffer=r.allocUnsafe(d._chunkSize)),0===u){if(o+=i-l,i=l,!c)return!0;var v=d._handle.write(t,e,o,i,d._buffer,d._offset,d._chunkSize);return v.callback=y,void(v.buffer=e)}if(!c)return!1;n()}}m.buffer=e,m.callback=y},o.inherits(b,O),o.inherits(_,O),o.inherits(w,O),o.inherits(E,O),o.inherits(T,O),o.inherits(x,O),o.inherits(S,O)}).call(this,n(3))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,f){if(void 0===t)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return function(e,t){for(var n in e.elements)e.elements.hasOwnProperty(n)&&(t.elements[n]=e.elements[n]);return void 0!==e.warnings&&(t.warnings=e.warnings.concat(t.warnings)),t}(h=(0,l.default)(t,f),function(l){var h=function(e){if(void 0===e.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var n=e.elements.x00020010;return d.readFixedString(t,n.dataOffset,n.length)}(l),p="1.2.840.10008.1.2"!==h,g=function(o,l){if("1.2.840.10008.1.2.1.99"===o){if(f&&f.inflater){var d=f.inflater(t,l);return new a.default(s.default,d,0)}if(void 0!==e&&this.module!==e){var c=n(68),h=(0,u.default)(t,l,t.length-l),p=c.inflateRawSync(h),g=(0,r.default)(t,p.length+l);return t.copy(g,0,0,l),p.copy(g,l),new a.default(s.default,g,0)}if("undefined"!=typeof pako){var v=t.slice(l),m=pako.inflateRaw(v),y=(0,r.default)(t,m.length+l);return y.set(t.slice(0,l),0),y.set(m,l),new a.default(s.default,y,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===o?new a.default(i.default,t,l):new a.default(s.default,t,l)}(h,l.position),v=new o.default(g.byteArrayParser,g.byteArray,{});v.warnings=g.warnings;try{p?c.parseDicomDataSetExplicit(v,g,g.byteArray.length,f):c.parseDicomDataSetImplicit(v,g,g.byteArray.length,f)}catch(e){throw{exception:e,dataSet:v}}return v}(h));var h};var r=h(n(22)),i=h(n(37)),a=h(n(12)),o=h(n(7)),s=h(n(21)),l=h(n(36)),u=h(n(11)),d=f(n(14)),c=f(n(16));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}}).call(this,n(69)(e))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default="1.8.1"},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?i-1:0,f=n?-1:1,h=e[t+c];for(c+=f,a=h&(1<<-d)-1,h>>=-d,d+=s;d>0;a=256*a+e[t+c],c+=f,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;d>0;o=256*o+e[t+c],c+=f,d-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,d=(1<<u)-1,c=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=d?(s=0,o=d):o+c>=1?(s=(t*l-1)*Math.pow(2,i),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*g}},function(e,t,n){t.byteLength=function(e){return 3*e.length/4-u(e)},t.toByteArray=function(e){var t,n,r,o,s,l=e.length;o=u(e),s=new a(3*l/4-o),n=o>0?l-4:l;var d=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[d++]=r>>16&255,s[d++]=r>>8&255,s[d++]=255&r;return 2===o?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[d++]=255&r):1===o&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[d++]=r>>8&255,s[d++]=255&r),s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a="",o=[],s=0,l=n-i;s<l;s+=16383)o.push(d(e,s,s+16383>l?l:s+16383));return 1===i?(t=e[n-1],a+=r[t>>2],a+=r[t<<4&63],a+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],a+=r[t>>10],a+=r[t>>4&63],a+=r[t<<2&63],a+="="),o.push(a),o.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function d(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,n){function r(e,t){return 255===e.byteArray[t]&&217===e.byteArray[t+1]}function i(e,t,n){var i=t.fragments[n];return!(!r(e,i.position+i.length-2)&&!r(e,i.position+i.length-3))}function a(e,t,n){for(var r=n;r<t.fragments.length;r++)if(i(e,t,r))return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||t.fragments;for(var r=[],i=0;;){r.push(t.fragments[i].offset);var o=a(e,t,i);if(void 0===o||o===t.fragments.length-1)return r;i=o+1}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){if(void 0===t)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";n=n||{omitPrivateAttibutes:!0,maxElementLength:128};var r={};for(var o in t.elements){var s=t.elements[o];if(!0!==n.omitPrivateAttibutes||!a.isPrivateTag(o))if(s.items){for(var l=[],u=0;u<s.items.length;u++)l.push(e(s.items[u].dataSet,n));r[o]=l}else{var d;d=void 0,s.length<n.maxElementLength&&(d=(0,i.default)(t,s)),r[o]=void 0!==d?d:{dataOffset:s.dataOffset,length:s.length}}}return r};var r,i=(r=n(43))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(25))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e&&8===e.length){var n=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6,8),10);if(t&&!0!==function(e,t,n){return!isNaN(n)&&t>0&&t<=12&&e>0&&e<=function(e,t){switch(e){case 2:return t%4==0&&t%100||t%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(t,n)}(i,r,n))throw"invalid DA '"+e+"'";return{year:n,month:r,day:i}}if(t)throw"invalid DA '"+e+"'"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.length>=2){var n=parseInt(e.substring(0,2),10),r=e.length>=4?parseInt(e.substring(2,4),10):void 0,i=e.length>=6?parseInt(e.substring(4,6),10):void 0,a=e.length>=8?parseInt(e.substring(7,13),10):void 0;if(t&&(isNaN(n)||void 0!==r&&isNaN(r)||void 0!==i&&isNaN(i)||void 0!==a&&isNaN(a)||n<0||n>23||r&&(r<0||r>59)||i&&(i<0||i>59)||a&&(a<0||a>999999)))throw"invalid TM '"+e+"'";return{hours:n,minutes:r,seconds:i,fractionalSeconds:a}}if(t)throw"invalid TM '"+e+"'"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(77);Object.defineProperty(t,"parseTM",{enumerable:!0,get:function(){return u(i).default}});var a=n(76);Object.defineProperty(t,"parseDA",{enumerable:!0,get:function(){return u(a).default}});var o=n(43);Object.defineProperty(t,"explicitElementToString",{enumerable:!0,get:function(){return u(o).default}});var s=n(75);Object.defineProperty(t,"explicitDataSetToJS",{enumerable:!0,get:function(){return u(s).default}});var l=n(74);function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"createJPEGBasicOffsetTable",{enumerable:!0,get:function(){return u(l).default}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(78);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(16);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(14);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var o=n(22);Object.defineProperty(t,"alloc",{enumerable:!0,get:function(){return O(o).default}});var s=n(71);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return O(s).default}});var l=n(37);Object.defineProperty(t,"bigEndianByteArrayParser",{enumerable:!0,get:function(){return O(l).default}});var u=n(12);Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return O(u).default}});var d=n(11);Object.defineProperty(t,"sharedCopy",{enumerable:!0,get:function(){return O(d).default}});var c=n(7);Object.defineProperty(t,"DataSet",{enumerable:!0,get:function(){return O(c).default}});var f=n(41);Object.defineProperty(t,"findAndSetUNElementLength",{enumerable:!0,get:function(){return O(f).default}});var h=n(42);Object.defineProperty(t,"findEndOfEncapsulatedElement",{enumerable:!0,get:function(){return O(h).default}});var p=n(24);Object.defineProperty(t,"findItemDelimitationItemAndSetElementLength",{enumerable:!0,get:function(){return O(p).default}});var g=n(21);Object.defineProperty(t,"littleEndianByteArrayParser",{enumerable:!0,get:function(){return O(g).default}});var v=n(70);Object.defineProperty(t,"parseDicom",{enumerable:!0,get:function(){return O(v).default}});var m=n(15);Object.defineProperty(t,"readDicomElementExplicit",{enumerable:!0,get:function(){return O(m).default}});var y=n(23);Object.defineProperty(t,"readDicomElementImplicit",{enumerable:!0,get:function(){return O(y).default}});var b=n(26);Object.defineProperty(t,"readEncapsulatedImageFrame",{enumerable:!0,get:function(){return O(b).default}});var _=n(44);Object.defineProperty(t,"readEncapsulatedPixelData",{enumerable:!0,get:function(){return O(_).default}});var w=n(17);Object.defineProperty(t,"readEncapsulatedPixelDataFromFragments",{enumerable:!0,get:function(){return O(w).default}});var E=n(36);Object.defineProperty(t,"readPart10Header",{enumerable:!0,get:function(){return O(E).default}});var T=n(40);Object.defineProperty(t,"readSequenceItemsExplicit",{enumerable:!0,get:function(){return O(T).default}});var x=n(39);Object.defineProperty(t,"readSequenceItemsImplicit",{enumerable:!0,get:function(){return O(x).default}});var S=n(13);Object.defineProperty(t,"readSequenceItem",{enumerable:!0,get:function(){return O(S).default}});var C=n(4);function O(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"readTag",{enumerable:!0,get:function(){return O(C).default}})}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(1)(e))},,,function(e,t,n){"use strict";var r=n(13),i=n(14),a="undefined"!=typeof Float64Array;function o(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(o);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function l(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var a="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(a)()}if(0===t)return a="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",new Function("TrivialArray",a)(u[e][0]);a=["'use strict'"];var o=r(t),l=o.map(function(e){return"i"+e}),d="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),c=o.map(function(e){return"b"+e}).join(","),f=o.map(function(e){return"c"+e}).join(",");a.push("function "+n+"(a,"+c+","+f+",d){this.data=a","this.shape=["+c+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+n+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+n+"_set("+l.join(",")+",v){"),i?a.push("return this.data.set("+d+",v)}"):a.push("return this.data["+d+"]=v}"),a.push("proto.get=function "+n+"_get("+l.join(",")+"){"),i?a.push("return this.data.get("+d+")}"):a.push("return this.data["+d+"]}"),a.push("proto.index=function "+n+"_index(",l.join(),"){return "+d+"}"),a.push("proto.hi=function "+n+"_hi("+l.join(",")+"){return new "+n+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var h=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),p=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+n+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+p.join(","));for(var g=0;g<t;++g)a.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");for(a.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),a.push("proto.step=function "+n+"_step("+l.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),g=0;g<t;++g)a.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");a.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");var v=new Array(t),m=new Array(t);for(g=0;g<t;++g)v[g]="a[i"+g+"]",m[g]="b[i"+g+"]";for(a.push("proto.transpose=function "+n+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+v.join(",")+","+m.join(",")+",this.offset)}"),a.push("proto.pick=function "+n+"_pick("+l+"){var a=[],b=[],c=this.offset"),g=0;g<t;++g)a.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(u[e],s)}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e)return(0,u.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===n){n=new Array(o);for(var s=o-1,d=1;s>=0;--s)n[s]=d,d*=t[s]}if(void 0===r)for(r=0,s=0;s<o;++s)n[s]<0&&(r-=(t[s]-1)*n[s]);for(var c=function(e){if(i(e))return"buffer";if(a)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),f=u[c];f.length<=o+1;)f.push(l(c,f.length-1));return(0,f[o+1])(e,t,n,r)}},function(e,t,n){"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},function(e,t,n){"use strict";
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";(function(e){var n,r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,
/*! cornerstone-core - 2.2.7 - 2018-10-25 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstone */
a=function(){return function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(w[e]&&_[e]){for(var n in _[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(g[n]=t[n]);0==--m&&0===y&&S()}}(e,n),t&&t(e,n)};var n,r=!0,i="236f9d7982d2d4eff8cb",a=1e4,s={},l=[],u=[];function d(e){var t=O[e];if(!t)return P;var r=function(r){return t.hot.active?(O[r]?-1===O[r].parents.indexOf(e)&&O[r].parents.push(e):(l=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):l=[],P(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return P[e]},set:function(t){P[e]=t}}};for(var a in P)Object.prototype.hasOwnProperty.call(P,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,i(a));return r.e=function(e){return"ready"===f&&h("prepare"),y++,P.e(e).then(t,function(e){throw t(),e});function t(){y--,"prepare"===f&&(b[e]||x(e),0===y&&0===m&&S())}},r.t=function(e,t){return 1&t&&(e=r(e)),P.t(e,-2&t)},r}var c=[],f="idle";function h(e){f=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,g,v,m=0,y=0,b={},_={},w={};function E(e){return+e+""===e?+e:e}function T(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=e,h("check"),(t=a,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=P.p+""+i+".hot-update.json";r.open("GET",a,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return h("idle"),null;_={},b={},w=e.c,v=e.h,h("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return g={},x("cornerstone"),"prepare"===f&&0===y&&0===m&&S(),t});var t}function x(e){w[e]?(_[e]=!0,m++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=P.p+""+e+"."+i+".hot-update.js",t.appendChild(n)}(e)):b[e]=!0}function S(){h("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return C(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&t.push(E(n));e.resolve(t)}}function C(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,a,o,u;function d(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var i=r.pop(),a=i.id,s=i.chain;if((o=O[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var l=0;l<o.parents.length;l++){var u=o.parents[l],d=O[u];if(d){if(d.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([u]),moduleId:a,parentId:u};-1===t.indexOf(u)&&(d.hot._acceptedDependencies[a]?(n[u]||(n[u]=[]),c(n[u],[a])):(delete n[u],t.push(u),r.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},m=[],y={},b=function(){};for(var _ in g)if(Object.prototype.hasOwnProperty.call(g,_)){var T;u=E(_);var x=!1,S=!1,C=!1,I="";switch((T=g[_]?d(u):{type:"disposed",moduleId:_}).chain&&(I="\nUpdate propagation: "+T.chain.join(" -> ")),T.type){case"self-declined":t.onDeclined&&t.onDeclined(T),t.ignoreDeclined||(x=new Error("Aborted because of self decline: "+T.moduleId+I));break;case"declined":t.onDeclined&&t.onDeclined(T),t.ignoreDeclined||(x=new Error("Aborted because of declined dependency: "+T.moduleId+" in "+T.parentId+I));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(T),t.ignoreUnaccepted||(x=new Error("Aborted because "+u+" is not accepted"+I));break;case"accepted":t.onAccepted&&t.onAccepted(T),S=!0;break;case"disposed":t.onDisposed&&t.onDisposed(T),C=!0;break;default:throw new Error("Unexception type "+T.type)}if(x)return h("abort"),Promise.reject(x);if(S)for(u in y[u]=g[u],c(m,T.outdatedModules),T.outdatedDependencies)Object.prototype.hasOwnProperty.call(T.outdatedDependencies,u)&&(p[u]||(p[u]=[]),c(p[u],T.outdatedDependencies[u]));C&&(c(m,[T.moduleId]),y[u]=b)}var M,A=[];for(r=0;r<m.length;r++)u=m[r],O[u]&&O[u].hot._selfAccepted&&A.push({module:u,errorHandler:O[u].hot._selfAccepted});h("dispose"),Object.keys(w).forEach(function(e){!1===w[e]&&function(e){delete installedChunks[e]}(e)});for(var L,D,k=m.slice();k.length>0;)if(u=k.pop(),o=O[u]){var j={},R=o.hot._disposeHandlers;for(a=0;a<R.length;a++)(n=R[a])(j);for(s[u]=j,o.hot.active=!1,delete O[u],delete p[u],a=0;a<o.children.length;a++){var N=O[o.children[a]];N&&(M=N.parents.indexOf(u))>=0&&N.parents.splice(M,1)}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(o=O[u]))for(D=p[u],a=0;a<D.length;a++)L=D[a],(M=o.children.indexOf(L))>=0&&o.children.splice(M,1);for(u in h("apply"),i=v,y)Object.prototype.hasOwnProperty.call(y,u)&&(e[u]=y[u]);var U=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(o=O[u])){D=p[u];var B=[];for(r=0;r<D.length;r++)if(L=D[r],n=o.hot._acceptedDependencies[L]){if(-1!==B.indexOf(n))continue;B.push(n)}for(r=0;r<B.length;r++){n=B[r];try{n(D)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[r],error:e}),t.ignoreErrored||U||(U=e)}}}for(r=0;r<A.length;r++){var H=A[r];u=H.module,l=[u];try{P(u)}catch(e){if("function"==typeof H.errorHandler)try{H.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||U||(U=n),U||(U=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||U||(U=e)}}return U?(h("fail"),Promise.reject(U)):(h("idle"),new Promise(function(e){e(m)}))}var O={};function P(t){if(O[t])return O[t].exports;var r=O[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"===(void 0===e?"undefined":o(e)))for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"===(void 0===e?"undefined":o(e)))for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:T,apply:C,status:function(e){if(!e)return f;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:s[e]};return n=void 0,t}(t),parents:(u=l,l=[],u),children:[]};return e[t].call(r.exports,r,r.exports,d(t)),r.l=!0,r.exports}return P.m=e,P.c=O,P.d=function(e,t,n){P.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},P.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},P.t=function(e,t){if(1&t&&(e=P(e)),8&t)return e;if(4&t&&"object"===(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var n=Object.create(null);if(P.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)P.d(n,r,function(t){return e[t]}.bind(null,r));return n},P.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return P.d(t,"a",t),t},P.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},P.p="",P.h=function(){return i},d("./index.js")(P.s="./index.js")}({"./canvasToPixel.js":
/*!**************************!*\
        !*** ./canvasToPixel.js ***!
        \**************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/getTransform.js */"./internal/getTransform.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e),a=Object(i.default)(n);return a.invert(),a.transformPoint(t.x,t.y)}},"./colors/colormap.js":
/*!****************************!*\
        !*** ./colors/colormap.js ***!
        \****************************/
/*! exports provided: getColormapsList, getColormap */function(e,t,n){n.r(t),n.d(t,"getColormapsList",function(){return l}),n.d(t,"getColormap",function(){return u});var r=n(/*! ./lookupTable.js */"./colors/lookupTable.js"),i=[0,0,0,0],a={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}};function o(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+Math.floor((r-n)/2),a=e[i];if(a===t)return i;t<a?r=i-1:n=i+1}return n}function s(e,t,n){var r,i=[],a=[],s=[],l=[];for(n=null===n?1:n,r=0;r<t.length;r++){var u=t[r];i.push((e-1)*u[0]),a.push(u[1]),s.push(u[1])}var d=function(e,t,n){for(var r=(1-e)/((n=null===n?100:n)-1),i=[];n-- >0;)i.push(e),e+=r;return i[i.length-1]=1,i}(0,0,e);for(r=0;r<e;r++)d[r]=(e-1)*Math.pow(d[r],n);var c=function(e,t){var n,r=[],i=t.length;for(e.sort(function(e,t){return e-t}),n=0;n<i;n++)r[n]=o(e,t[n]);return r}(i,d);for(r=1;r<e-1;r++){var f=c[r],h=(d[r]-i[f-1])/(i[f]-i[f-1]),p=a[f]-s[f-1];l[r]=h*p+s[f-1]}return l[0]=s[0],l[e-1]=a[t.length-1],l}function l(){var e=[];return Object.keys(a).forEach(function(t){if(a.hasOwnProperty(t)){var n=a[t];e.push({id:t,name:n.name})}}),e.sort(function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n===r?0:n<r?-1:1}),e}function u(e,t){var n=a[e];return n||(n=a[e]=t||{name:"",colors:[]}),!n.colors&&n.segmentedData&&(n.colors=function(e,t,n){var r,i=[];t=null===t?256:t,n=null===n?1:n;var a=s(t,e.red,n),o=s(t,e.green,n),l=s(t,e.blue,n);for(r=0;r<t;r++){var u=[Math.round(255*a[r]),Math.round(255*o[r]),Math.round(255*l[r]),255];i.push(u)}return i}(n.segmentedData,n.numColors,n.gamma)),{getId:function(){return e},getColorSchemeName:function(){return n.name},setColorSchemeName:function(e){n.name=e},getNumberOfColors:function(){return n.colors.length},setNumberOfColors:function(e){for(;n.colors.length<e;)n.colors.push(i);n.colors.length=e},getColor:function(e){return this.isValidIndex(e)?n.colors[e]:i},getColorRepeating:function(e){var t=n.colors.length;return e=t?e%t:0,this.getColor(e)},setColor:function(e,t){this.isValidIndex(e)&&(n.colors[e]=t)},addColor:function(e){n.colors.push(e)},insertColor:function(e,t){this.isValidIndex(e)&&n.colors.splice(e,1,t)},removeColor:function(e){this.isValidIndex(e)&&n.colors.splice(e,1)},clearColors:function(){n.colors=[]},buildLookupTable:function(e){if(e){var t=n.colors.length;e.setNumberOfTableValues(t);for(var r=0;r<t;r++)e.setTableValue(r,n.colors[r])}},createLookupTable:function(){var e=new r.default;return this.buildLookupTable(e),e},isValidIndex:function(e){return e>=0&&e<n.colors.length}}}},"./colors/index.js":
/*!*************************!*\
        !*** ./colors/index.js ***!
        \*************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./colormap.js */"./colors/colormap.js"),i=n(/*! ./lookupTable.js */"./colors/lookupTable.js");t.default={getColormap:r.getColormap,getColormapsList:r.getColormapsList,LookupTable:i.default}},"./colors/lookupTable.js":
/*!*******************************!*\
        !*** ./colors/lookupTable.js ***!
        \*******************************/
/*! exports provided: default */function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);function i(e,t,n){if(e>1)throw new Error("HSVToRGB expects hue < 1");var r=[];if(0===t)return r[0]=n,r[1]=n,r[2]=n,r;var i=Math.floor(6*e),a=6*e-i,o=n*(1-t),s=n*(1-t*a),l=n*(1-t*(1-a));switch(i){case 0:case 6:r[0]=n,r[1]=l,r[2]=o;break;case 1:r[0]=s,r[1]=n,r[2]=o;break;case 2:r[0]=o,r[1]=n,r[2]=l;break;case 3:r[0]=o,r[1]=s,r[2]=n;break;case 4:r[0]=l,r[1]=o,r[2]=n;break;case 5:r[0]=n,r[1]=o,r[2]=s}return r}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}var t,n;return t=e,(n=[{key:"setNumberOfTableValues",value:function(e){this.NumberOfColors=e}},{key:"setRamp",value:function(e){this.Ramp=e}},{key:"setTableRange",value:function(e,t){this.TableRange[0]=e,this.TableRange[1]=t}},{key:"setHueRange",value:function(e,t){this.HueRange[0]=e,this.HueRange[1]=t}},{key:"setSaturationRange",value:function(e,t){this.SaturationRange[0]=e,this.SaturationRange[1]=t}},{key:"setValueRange",value:function(e,t){this.ValueRange[0]=e,this.ValueRange[1]=t}},{key:"setRange",value:function(e,t){this.InputRange[0]=e,this.InputRange[1]=t}},{key:"setAlphaRange",value:function(e,t){this.AlphaRange[0]=e,this.AlphaRange[1]=t}},{key:"getColor",value:function(e){return this.mapValue(e)}},{key:"build",value:function(e){if(!(this.Table.length>1)||e){this.Table=[];var t,n,r,a,o=this.NumberOfColors-1;o?(t=(this.HueRange[1]-this.HueRange[0])/o,n=(this.SaturationRange[1]-this.SaturationRange[0])/o,r=(this.ValueRange[1]-this.ValueRange[0])/o,a=(this.AlphaRange[1]-this.AlphaRange[0])/o):t=n=r=a=0;for(var s=0;s<=o;s++){var l=this.HueRange[0]+s*t,u=this.SaturationRange[0]+s*n,d=this.ValueRange[0]+s*r,c=this.AlphaRange[0]+s*a,f=i(l,u,d),h=[];switch(this.Ramp){case"scurve":h[0]=Math.floor(127.5*(1+Math.cos((1-f[0])*Math.PI))),h[1]=Math.floor(127.5*(1+Math.cos((1-f[1])*Math.PI))),h[2]=Math.floor(127.5*(1+Math.cos((1-f[2])*Math.PI))),h[3]=Math.floor(255*c);break;case"linear":h[0]=Math.floor(255*f[0]+.5),h[1]=Math.floor(255*f[1]+.5),h[2]=Math.floor(255*f[2]+.5),h[3]=Math.floor(255*c+.5);break;case"sqrt":h[0]=Math.floor(255*Math.sqrt(f[0])+.5),h[1]=Math.floor(255*Math.sqrt(f[1])+.5),h[2]=Math.floor(255*Math.sqrt(f[2])+.5),h[3]=Math.floor(255*Math.sqrt(c)+.5);break;default:throw new Error("Invalid Ramp value (".concat(this.Ramp,")"))}this.Table.push(h)}this.buildSpecialColors()}}},{key:"buildSpecialColors",value:function(){var e=this.NumberOfColors,t=e+0,n=e+1,r=e+2;this.UseBelowRangeColor||0===e?this.Table[t]=this.BelowRangeColor:this.Table[t]=this.Table[0],this.UseAboveRangeColor||0===e?this.Table[n]=this.AboveRangeColor:this.Table[n]=this.Table[e-1],this.Table[r]=this.NaNColor}},{key:"mapValue",value:function(e){var t=this.getIndex(e);if(t<0)return this.NaNColor;if(0===t){if(this.UseBelowRangeColor&&e<this.TableRange[0])return this.BelowRangeColor}else if(t===this.NumberOfColors-1&&this.UseAboveRangeColor&&e>this.TableRange[1])return this.AboveRangeColor;return this.Table[t]}},{key:"getIndex",value:function(e){var t={Range:[]};if(t.MaxIndex=this.NumberOfColors-1,t.Shift=-this.TableRange[0],this.TableRange[1]<=this.TableRange[0]?t.Scale=Number.MAX_VALUE:t.Scale=t.MaxIndex/(this.TableRange[1]-this.TableRange[0]),t.Range[0]=this.TableRange[0],t.Range[1]=this.TableRange[1],isNaN(e))return-1;var n=function(e,t){var n;return n=e<t.Range[0]?t.MaxIndex+0+1.5:e>t.Range[1]?t.MaxIndex+1+1.5:(e+t.Shift)*t.Scale,Math.floor(n)}(e,t);return n===this.NumberOfColors+0?n=0:n===this.NumberOfColors+1&&(n=this.NumberOfColors-1),n}},{key:"setTableValue",value:function(e,t){if(5===arguments.length&&(t=Array.prototype.slice.call(arguments,1)),e<0)throw new Error("Can't set the table value for negative index (".concat(e,")"));e>=this.NumberOfColors&&new Error("Index ".concat(e," is greater than the number of colors ").concat(this.NumberOfColors)),this.Table[e]=t,0!==e&&e!==this.NumberOfColors-1||this.buildSpecialColors()}}])&&r(t.prototype,n),e}();t.default=a},"./disable.js":
/*!********************!*\
        !*** ./disable.js ***!
        \********************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./triggerEvent.js */"./triggerEvent.js"),a=n(/*! ./events.js */"./events.js");t.default=function(e){if(void 0===e)throw new Error("disable: element must not be undefined");for(var t=Object(r.getEnabledElements)(),n=0;n<t.length;n++)if(t[n].element===e){var o={element:e};Object(i.default)(e,a.default.ELEMENT_DISABLED,o),Object(i.default)(a.events,a.default.ELEMENT_DISABLED,o),t[n].element.removeChild(t[n].canvas),t[n].canvas=void 0,t.splice(n,1);break}}},"./displayImage.js":
/*!*************************!*\
        !*** ./displayImage.js ***!
        \*************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/getDefaultViewport.js */"./internal/getDefaultViewport.js"),a=n(/*! ./updateImage.js */"./updateImage.js"),o=n(/*! ./internal/now.js */"./internal/now.js"),s=n(/*! ./layers.js */"./layers.js"),l=n(/*! ./triggerEvent.js */"./triggerEvent.js"),u=n(/*! ./events.js */"./events.js");t.default=function(e,t,n){if(void 0===e)throw new Error("displayImage: parameter element must not be undefined");if(void 0===t)throw new Error("displayImage: parameter image must not be undefined");var d,c=Object(r.getEnabledElement)(e),f=c.image;if(c.image=t,c.layers&&c.layers.length&&Object(s.setLayerImage)(e,t),void 0===c.viewport&&(c.viewport=Object(i.default)(c.canvas,t)),n)for(var h in n)null!==n[h]&&(c.viewport[h]=n[h]);void 0!==c.lastImageTimeStamp&&(d=(1e3/(Object(o.default)()-c.lastImageTimeStamp)).toFixed()),c.lastImageTimeStamp=Object(o.default)();var p={viewport:c.viewport,element:c.element,image:c.image,oldImage:f,enabledElement:c,frameRate:d};Object(l.default)(c.element,u.default.NEW_IMAGE,p),Object(a.default)(e)}},"./draw.js":
/*!*****************!*\
        !*** ./draw.js ***!
        \*****************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/drawImage.js */"./internal/drawImage.js");t.default=function(e){var t=Object(r.getEnabledElement)(e);if(void 0===t.image)throw new Error("draw: image has not been loaded yet");Object(i.default)(t)}},"./drawInvalidated.js":
/*!****************************!*\
        !*** ./drawInvalidated.js ***!
        \****************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/drawImage.js */"./internal/drawImage.js");t.default=function(){for(var e=Object(r.getEnabledElements)(),t=0;t<e.length;t++){var n=e[t];!0===n.invalid&&Object(i.default)(n,!0)}}},"./enable.js":
/*!*******************!*\
        !*** ./enable.js ***!
        \*******************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./resize.js */"./resize.js"),a=n(/*! ./internal/drawImageSync.js */"./internal/drawImageSync.js"),o=n(/*! ./internal/requestAnimationFrame.js */"./internal/requestAnimationFrame.js"),s=n(/*! ./internal/tryEnableWebgl.js */"./internal/tryEnableWebgl.js"),l=n(/*! ./triggerEvent.js */"./triggerEvent.js"),u=n(/*! ./generateUUID.js */"./generateUUID.js"),d=n(/*! ./events.js */"./events.js"),c=n(/*! ./internal/getCanvas.js */"./internal/getCanvas.js");t.default=function(e,t){if(void 0===e)throw new Error("enable: parameter element cannot be undefined");t&&t.renderer&&"webgl"===t.renderer.toLowerCase()&&Object(s.default)(t);var n={element:e,canvas:Object(c.default)(e),image:void 0,invalid:!1,needsRedraw:!0,options:t,layers:[],data:{},renderingTools:{},uuid:Object(u.default)()};Object(r.addEnabledElement)(n),Object(l.default)(d.events,d.default.ELEMENT_ENABLED,n),Object(i.default)(e,!0),function e(t){if(void 0!==n.canvas){var r={enabledElement:n,timestamp:t};Object(l.default)(n.element,d.default.PRE_RENDER,r),n.needsRedraw&&(void 0!==n.image||n.layers.length>0)&&Object(a.default)(n,n.invalid),Object(o.default)(e)}}()}},"./enabledElementData.js":
/*!*******************************!*\
        !*** ./enabledElementData.js ***!
        \*******************************/
/*! exports provided: getElementData, removeElementData */function(e,t,n){n.r(t),n.d(t,"getElementData",function(){return i}),n.d(t,"removeElementData",function(){return a});var r=n(/*! ./enabledElements.js */"./enabledElements.js");function i(e,t){var n=Object(r.getEnabledElement)(e);return!1===n.data.hasOwnProperty(t)&&(n.data[t]={}),n.data[t]}function a(e,t){delete Object(r.getEnabledElement)(e).data[t]}},"./enabledElements.js":
/*!****************************!*\
        !*** ./enabledElements.js ***!
        \****************************/
/*! exports provided: getEnabledElement, addEnabledElement, getEnabledElementsByImageId, getEnabledElements */function(e,t,n){n.r(t),n.d(t,"getEnabledElement",function(){return i}),n.d(t,"addEnabledElement",function(){return a}),n.d(t,"getEnabledElementsByImageId",function(){return o}),n.d(t,"getEnabledElements",function(){return s});var r=[];function i(e){if(void 0===e)throw new Error("getEnabledElement: parameter element must not be undefined");for(var t=0;t<r.length;t++)if(r[t].element===e)return r[t];throw new Error("element not enabled")}function a(e){if(void 0===e)throw new Error("getEnabledElement: enabledElement element must not be undefined");r.push(e)}function o(e){var t=[];return r.forEach(function(n){n.image&&n.image.imageId===e&&t.push(n)}),t}function s(){return r}},"./events.js":
/*!*******************!*\
        !*** ./events.js ***!
        \*******************/
/*! exports provided: default, events */function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"events",function(){return i}),t.default={NEW_IMAGE:"cornerstonenewimage",INVALIDATED:"cornerstoneinvalidated",PRE_RENDER:"cornerstoneprerender",IMAGE_CACHE_MAXIMUM_SIZE_CHANGED:"cornerstoneimagecachemaximumsizechanged",IMAGE_CACHE_PROMISE_REMOVED:"cornerstoneimagecachepromiseremoved",IMAGE_CACHE_FULL:"cornerstoneimagecachefull",IMAGE_CACHE_CHANGED:"cornerstoneimagecachechanged",WEBGL_TEXTURE_REMOVED:"cornerstonewebgltextureremoved",WEBGL_TEXTURE_CACHE_FULL:"cornerstonewebgltexturecachefull",IMAGE_LOADED:"cornerstoneimageloaded",IMAGE_LOAD_FAILED:"cornerstoneimageloadfailed",ELEMENT_RESIZED:"cornerstoneelementresized",IMAGE_RENDERED:"cornerstoneimagerendered",LAYER_ADDED:"cornerstonelayeradded",LAYER_REMOVED:"cornerstonelayerremoved",ACTIVE_LAYER_CHANGED:"cornerstoneactivelayerchanged",ELEMENT_DISABLED:"cornerstoneelementdisabled",ELEMENT_ENABLED:"cornerstoneelementenabled"};var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={},this.namespaces={}}var t,n;return t=e,(n=[{key:"addEventNamespaceListener",value:function(e,t){e.indexOf(".")<=0||(this.namespaces[e]=t,this.addEventListener(e.split(".")[0],t))}},{key:"removeEventNamespaceListener",value:function(e){e.indexOf(".")<=0||!this.namespaces[e]||(this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e])}},{key:"addEventListener",value:function(e,t){e.indexOf(".")>0?this.addEventNamespaceListener(e,t):(e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t))}},{key:"removeEventListener",value:function(e,t){if(e.indexOf(".")>0)this.removeEventNamespaceListener(e);else if(e in this.listeners)for(var n=this.listeners[e],r=0,i=n.length;r<i;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type],n=0,r=t.length;n<r;n++)t[n].call(this,e);return!e.defaultPrevented}}])&&r(t.prototype,n),e}())},"./falseColorMapping.js":
/*!******************************!*\
        !*** ./falseColorMapping.js ***!
        \******************************/
/*! exports provided: convertImageToFalseColorImage, convertToFalseColorImage, restoreImage */function(e,t,n){n.r(t),n.d(t,"convertImageToFalseColorImage",function(){return s}),n.d(t,"convertToFalseColorImage",function(){return l}),n.d(t,"restoreImage",function(){return o});var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./pixelDataToFalseColorData.js */"./pixelDataToFalseColorData.js"),a=n(/*! ./colors/colormap.js */"./colors/colormap.js");function o(e){return!(!e.restore||"function"!=typeof e.restore||(e.restore(),0))}function s(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var n=(t=function(e){return e&&"string"==typeof e&&(e=Object(a.getColormap)(e)),e}(t)).getId();if(e.colormapId===n)return!1;if(o(e),n){var r=e.minPixelValue||0,s=e.maxPixelValue||255;e.restore=function(e){if(e.restore)return e.restore;var t=e.color,n=e.rgba,r=e.cachedLut,i=e.slope,a=e.windowWidth,o=e.windowCenter,s=e.minPixelValue,l=e.maxPixelValue;return function(){if(e.color=t,e.rgba=n,e.cachedLut=r,e.slope=i,e.windowWidth=a,e.windowCenter=o,e.minPixelValue=s,e.maxPixelValue=l,e.origPixelData){var u=e.origPixelData;e.getPixelData=function(){return u}}e.origPixelData=void 0,e.colormapId=void 0,e.falseColor=void 0}}(e);var l=t.createLookupTable();l.setTableRange(r,s),Object(i.default)(e,l);var u=function(e){for(var t,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=e.length,a=0;a<i;a++)n=n<(t=e[a])?n:t,r=r>t?r:t;return{minPixelValue:n,maxPixelValue:r}}(e.getPixelData());e.minPixelValue=u.minPixelValue,e.maxPixelValue=u.maxPixelValue,e.windowWidth=255,e.windowCenter=128,e.colormapId=n}return!0}function l(e,t){return s(Object(r.getEnabledElement)(e).image,t)}},"./fitToWindow.js":
/*!************************!*\
        !*** ./fitToWindow.js ***!
        \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./updateImage.js */"./updateImage.js"),a=n(/*! ./internal/getImageFitScale.js */"./internal/getImageFitScale.js");t.default=function(e){var t=Object(r.getEnabledElement)(e),n=t.image;t.viewport.scale=Object(a.default)(t.canvas,n,t.viewport.rotation).scaleFactor,t.viewport.translation.x=0,t.viewport.translation.y=0,Object(i.default)(e)}},"./generateUUID.js":
/*!*************************!*\
        !*** ./generateUUID.js ***!
        \*************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}},"./getDefaultViewportForImage.js":
/*!***************************************!*\
        !*** ./getDefaultViewportForImage.js ***!
        \***************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/getDefaultViewport.js */"./internal/getDefaultViewport.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e);return Object(i.default)(n.canvas,t)}},"./getImage.js":
/*!*********************!*\
        !*** ./getImage.js ***!
        \*********************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js");t.default=function(e){return Object(r.getEnabledElement)(e).image}},"./getPixels.js":
/*!**********************!*\
        !*** ./getPixels.js ***!
        \**********************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./getStoredPixels.js */"./getStoredPixels.js"),a=n(/*! ./internal/getModalityLUT.js */"./internal/getModalityLUT.js");t.default=function(e,t,n,o,s){var l=Object(i.default)(e,t,n,o,s),u=Object(r.getEnabledElement)(e),d=Object(a.default)(u.image.slope,u.image.intercept,u.viewport.modalityLUT);return l.map(d)}},"./getStoredPixels.js":
/*!****************************!*\
        !*** ./getStoredPixels.js ***!
        \****************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js");t.default=function(e,t,n,i,a){if(void 0===e)throw new Error("getStoredPixels: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);for(var o=Object(r.getEnabledElement)(e),s=[],l=0,u=o.image.getPixelData(),d=0;d<a;d++)for(var c=0;c<i;c++){var f=(d+n)*o.image.columns+(c+t);s[l++]=u[f]}return s}},"./getViewport.js":
/*!************************!*\
        !*** ./getViewport.js ***!
        \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js");t.default=function(e){var t=Object(r.getEnabledElement)(e).viewport;if(void 0!==t)return Object.assign({},t)}},"./imageCache.js":
/*!***********************!*\
        !*** ./imageCache.js ***!
        \***********************/
/*! exports provided: cachedImages, setMaximumSizeBytes, putImageLoadObject, getImageLoadObject, removeImageLoadObject, getCacheInfo, purgeCache, changeImageIdCacheSize, default */function(e,t,n){n.r(t),n.d(t,"cachedImages",function(){return l}),n.d(t,"setMaximumSizeBytes",function(){return u}),n.d(t,"putImageLoadObject",function(){return c}),n.d(t,"getImageLoadObject",function(){return f}),n.d(t,"removeImageLoadObject",function(){return h}),n.d(t,"getCacheInfo",function(){return p}),n.d(t,"purgeCache",function(){return g}),n.d(t,"changeImageIdCacheSize",function(){return v});var r=n(/*! ./events.js */"./events.js"),i=n(/*! ./triggerEvent.js */"./triggerEvent.js"),a=1073741824,o=0,s={},l=[];function u(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");a=e,Object(i.default)(r.events,r.default.IMAGE_CACHE_MAXIMUM_SIZE_CHANGED),d()}function d(){if(!(o<=a)){for(l.sort(function(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0});o>a;){var e=l[l.length-1].imageId;h(e),Object(i.default)(r.events,r.default.IMAGE_CACHE_PROMISE_REMOVED,{imageId:e})}var t=p();Object(i.default)(r.events,r.default.IMAGE_CACHE_FULL,t)}}function c(e,t){if(void 0===e)throw new Error("putImageLoadObject: imageId must not be undefined");if(void 0===t.promise)throw new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===s.hasOwnProperty(e))throw new Error("putImageLoadObject: imageId already in cache");if(t.cancelFn&&"function"!=typeof t.cancelFn)throw new Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");var n={loaded:!1,imageId:e,sharedCacheKey:void 0,imageLoadObject:t,timeStamp:Date.now(),sizeInBytes:0};s[e]=n,l.push(n),t.promise.then(function(e){if(-1!==l.indexOf(n)){if(n.loaded=!0,n.image=e,void 0===e.sizeInBytes)throw new Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===e.sizeInBytes.toFixed)throw new Error("putImageLoadObject: image.sizeInBytes is not a number");n.sizeInBytes=e.sizeInBytes,o+=n.sizeInBytes;var t={action:"addImage",image:n};Object(i.default)(r.events,r.default.IMAGE_CACHE_CHANGED,t),n.sharedCacheKey=e.sharedCacheKey,d()}},function(){var t=s[e];l.splice(l.indexOf(t),1),delete s[e]})}function f(e){if(void 0===e)throw new Error("getImageLoadObject: imageId must not be undefined");var t=s[e];if(void 0!==t)return t.timeStamp=Date.now(),t.imageLoadObject}function h(e){if(void 0===e)throw new Error("removeImageLoadObject: imageId must not be undefined");var t=s[e];if(void 0===t)throw new Error("removeImageLoadObject: imageId was not present in imageCache");l.splice(l.indexOf(t),1),o-=t.sizeInBytes;var n,a={action:"deleteImage",image:t};Object(i.default)(r.events,r.default.IMAGE_CACHE_CHANGED,a),(n=t.imageLoadObject).promise.then(function(){n.decache&&n.decache()},function(){n.decache&&n.decache()}),delete s[e]}function p(){return{maximumSizeInBytes:a,cacheSizeInBytes:o,numberOfImagesCached:l.length}}function g(){for(;l.length>0;)h(l[0].imageId)}function v(e,t){var n=s[e];n&&n.imageLoadObject.promise.then(function(e){var a=t-e.sizeInBytes;e.sizeInBytes=t,n.sizeInBytes=t,o+=a;var s={action:"changeImageSize",image:e};Object(i.default)(r.events,r.default.IMAGE_CACHE_CHANGED,s)})}t.default={imageCache:s,cachedImages:l,setMaximumSizeBytes:u,putImageLoadObject:c,getImageLoadObject:f,removeImageLoadObject:h,getCacheInfo:p,purgeCache:g,changeImageIdCacheSize:v}},"./imageLoader.js":
/*!************************!*\
        !*** ./imageLoader.js ***!
        \************************/
/*! exports provided: loadImage, loadAndCacheImage, registerImageLoader, registerUnknownImageLoader */function(e,t,n){n.r(t),n.d(t,"loadImage",function(){return u}),n.d(t,"loadAndCacheImage",function(){return d}),n.d(t,"registerImageLoader",function(){return c}),n.d(t,"registerUnknownImageLoader",function(){return f});var r,i=n(/*! ./imageCache.js */"./imageCache.js"),a=n(/*! ./events.js */"./events.js"),o=n(/*! ./triggerEvent.js */"./triggerEvent.js"),s={};function l(e,t){var n=e.indexOf(":"),i=e.substring(0,n),l=s[i];if(void 0===l||null===l){if(void 0!==r)return r(e);throw new Error("loadImageFromImageLoader: no image loader for imageId")}var u=l(e,t);return u.promise.then(function(e){Object(o.default)(a.events,a.default.IMAGE_LOADED,{image:e})},function(t){var n={imageId:e,error:t};Object(o.default)(a.events,a.default.IMAGE_LOAD_FAILED,n)}),u}function u(e,t){if(void 0===e)throw new Error("loadImage: parameter imageId must not be undefined");var n=Object(i.getImageLoadObject)(e);return void 0!==n?n.promise:l(e,t).promise}function d(e,t){if(void 0===e)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");var n=Object(i.getImageLoadObject)(e);return void 0!==n?n.promise:(n=l(e,t),Object(i.putImageLoadObject)(e,n),n.promise)}function c(e,t){s[e]=t}function f(e){var t=r;return r=e,t}},"./index.js":
/*!******************!*\
        !*** ./index.js ***!
        \******************/
/*! exports provided: drawImage, generateLut, getDefaultViewport, requestAnimationFrame, storedPixelDataToCanvasImageData, storedColorPixelDataToCanvasImageData, storedPixelDataToCanvasImageDataColorLUT, storedPixelDataToCanvasImageDataPseudocolorLUT, internal, renderLabelMapImage, renderPseudoColorImage, renderColorImage, renderGrayscaleImage, renderWebImage, renderToCanvas, canvasToPixel, disable, displayImage, draw, drawInvalidated, enable, getElementData, removeElementData, getEnabledElement, addEnabledElement, getEnabledElementsByImageId, getEnabledElements, addLayer, removeLayer, getLayer, getLayers, getVisibleLayers, setActiveLayer, getActiveLayer, purgeLayers, setLayerImage, fitToWindow, getDefaultViewportForImage, getImage, getPixels, getStoredPixels, getViewport, loadImage, loadAndCacheImage, registerImageLoader, registerUnknownImageLoader, invalidate, invalidateImageId, pageToPixel, pixelToCanvas, reset, resize, setToPixelCoordinateSystem, setViewport, updateImage, pixelDataToFalseColorData, rendering, imageCache, metaData, webGL, colors, convertImageToFalseColorImage, convertToFalseColorImage, restoreImage, EVENTS, events, triggerEvent */function(e,t,n){n.r(t);var r=n(/*! ./internal/drawImage.js */"./internal/drawImage.js");n.d(t,"drawImage",function(){return r.default});var i=n(/*! ./internal/generateLut.js */"./internal/generateLut.js");n.d(t,"generateLut",function(){return i.default});var a=n(/*! ./internal/getDefaultViewport.js */"./internal/getDefaultViewport.js");n.d(t,"getDefaultViewport",function(){return a.default});var o=n(/*! ./internal/requestAnimationFrame.js */"./internal/requestAnimationFrame.js");n.d(t,"requestAnimationFrame",function(){return o.default});var s=n(/*! ./internal/storedPixelDataToCanvasImageData.js */"./internal/storedPixelDataToCanvasImageData.js");n.d(t,"storedPixelDataToCanvasImageData",function(){return s.default});var l=n(/*! ./internal/storedColorPixelDataToCanvasImageData.js */"./internal/storedColorPixelDataToCanvasImageData.js");n.d(t,"storedColorPixelDataToCanvasImageData",function(){return l.default});var u=n(/*! ./internal/storedPixelDataToCanvasImageDataColorLUT.js */"./internal/storedPixelDataToCanvasImageDataColorLUT.js");n.d(t,"storedPixelDataToCanvasImageDataColorLUT",function(){return u.default});var d=n(/*! ./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js */"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js");n.d(t,"storedPixelDataToCanvasImageDataPseudocolorLUT",function(){return d.default});var c=n(/*! ./internal/index.js */"./internal/index.js");n.d(t,"internal",function(){return c.default});var f=n(/*! ./rendering/renderLabelMapImage.js */"./rendering/renderLabelMapImage.js");n.d(t,"renderLabelMapImage",function(){return f.renderLabelMapImage});var h=n(/*! ./rendering/renderPseudoColorImage.js */"./rendering/renderPseudoColorImage.js");n.d(t,"renderPseudoColorImage",function(){return h.renderPseudoColorImage});var p=n(/*! ./rendering/renderColorImage.js */"./rendering/renderColorImage.js");n.d(t,"renderColorImage",function(){return p.renderColorImage});var g=n(/*! ./rendering/renderGrayscaleImage.js */"./rendering/renderGrayscaleImage.js");n.d(t,"renderGrayscaleImage",function(){return g.renderGrayscaleImage});var v=n(/*! ./rendering/renderWebImage.js */"./rendering/renderWebImage.js");n.d(t,"renderWebImage",function(){return v.renderWebImage});var m=n(/*! ./rendering/renderToCanvas.js */"./rendering/renderToCanvas.js");n.d(t,"renderToCanvas",function(){return m.default});var y=n(/*! ./canvasToPixel.js */"./canvasToPixel.js");n.d(t,"canvasToPixel",function(){return y.default});var b=n(/*! ./disable.js */"./disable.js");n.d(t,"disable",function(){return b.default});var _=n(/*! ./displayImage.js */"./displayImage.js");n.d(t,"displayImage",function(){return _.default});var w=n(/*! ./draw.js */"./draw.js");n.d(t,"draw",function(){return w.default});var E=n(/*! ./drawInvalidated.js */"./drawInvalidated.js");n.d(t,"drawInvalidated",function(){return E.default});var T=n(/*! ./enable.js */"./enable.js");n.d(t,"enable",function(){return T.default});var x=n(/*! ./enabledElementData.js */"./enabledElementData.js");n.d(t,"getElementData",function(){return x.getElementData}),n.d(t,"removeElementData",function(){return x.removeElementData});var S=n(/*! ./enabledElements.js */"./enabledElements.js");n.d(t,"getEnabledElement",function(){return S.getEnabledElement}),n.d(t,"addEnabledElement",function(){return S.addEnabledElement}),n.d(t,"getEnabledElementsByImageId",function(){return S.getEnabledElementsByImageId}),n.d(t,"getEnabledElements",function(){return S.getEnabledElements});var C=n(/*! ./layers.js */"./layers.js");n.d(t,"addLayer",function(){return C.addLayer}),n.d(t,"removeLayer",function(){return C.removeLayer}),n.d(t,"getLayer",function(){return C.getLayer}),n.d(t,"getLayers",function(){return C.getLayers}),n.d(t,"getVisibleLayers",function(){return C.getVisibleLayers}),n.d(t,"setActiveLayer",function(){return C.setActiveLayer}),n.d(t,"getActiveLayer",function(){return C.getActiveLayer}),n.d(t,"purgeLayers",function(){return C.purgeLayers}),n.d(t,"setLayerImage",function(){return C.setLayerImage});var O=n(/*! ./fitToWindow.js */"./fitToWindow.js");n.d(t,"fitToWindow",function(){return O.default});var P=n(/*! ./getDefaultViewportForImage.js */"./getDefaultViewportForImage.js");n.d(t,"getDefaultViewportForImage",function(){return P.default});var I=n(/*! ./getImage.js */"./getImage.js");n.d(t,"getImage",function(){return I.default});var M=n(/*! ./getPixels.js */"./getPixels.js");n.d(t,"getPixels",function(){return M.default});var A=n(/*! ./getStoredPixels.js */"./getStoredPixels.js");n.d(t,"getStoredPixels",function(){return A.default});var L=n(/*! ./getViewport.js */"./getViewport.js");n.d(t,"getViewport",function(){return L.default});var D=n(/*! ./imageLoader.js */"./imageLoader.js");n.d(t,"loadImage",function(){return D.loadImage}),n.d(t,"loadAndCacheImage",function(){return D.loadAndCacheImage}),n.d(t,"registerImageLoader",function(){return D.registerImageLoader}),n.d(t,"registerUnknownImageLoader",function(){return D.registerUnknownImageLoader});var k=n(/*! ./invalidate.js */"./invalidate.js");n.d(t,"invalidate",function(){return k.default});var j=n(/*! ./invalidateImageId.js */"./invalidateImageId.js");n.d(t,"invalidateImageId",function(){return j.default});var R=n(/*! ./pageToPixel.js */"./pageToPixel.js");n.d(t,"pageToPixel",function(){return R.default});var N=n(/*! ./pixelToCanvas.js */"./pixelToCanvas.js");n.d(t,"pixelToCanvas",function(){return N.default});var U=n(/*! ./reset.js */"./reset.js");n.d(t,"reset",function(){return U.default});var B=n(/*! ./resize.js */"./resize.js");n.d(t,"resize",function(){return B.default});var H=n(/*! ./setToPixelCoordinateSystem.js */"./setToPixelCoordinateSystem.js");n.d(t,"setToPixelCoordinateSystem",function(){return H.default});var F=n(/*! ./setViewport.js */"./setViewport.js");n.d(t,"setViewport",function(){return F.default});var V=n(/*! ./updateImage.js */"./updateImage.js");n.d(t,"updateImage",function(){return V.default});var z=n(/*! ./pixelDataToFalseColorData.js */"./pixelDataToFalseColorData.js");n.d(t,"pixelDataToFalseColorData",function(){return z.default});var W=n(/*! ./rendering/index.js */"./rendering/index.js");n.d(t,"rendering",function(){return W.default});var q=n(/*! ./imageCache.js */"./imageCache.js");n.d(t,"imageCache",function(){return q.default});var G=n(/*! ./metaData.js */"./metaData.js");n.d(t,"metaData",function(){return G.default});var $=n(/*! ./webgl/index.js */"./webgl/index.js");n.d(t,"webGL",function(){return $.default});var Y=n(/*! ./colors/index.js */"./colors/index.js");n.d(t,"colors",function(){return Y.default});var Z=n(/*! ./falseColorMapping.js */"./falseColorMapping.js");n.d(t,"convertImageToFalseColorImage",function(){return Z.convertImageToFalseColorImage}),n.d(t,"convertToFalseColorImage",function(){return Z.convertToFalseColorImage}),n.d(t,"restoreImage",function(){return Z.restoreImage});var K=n(/*! ./events.js */"./events.js");n.d(t,"EVENTS",function(){return K.default}),n.d(t,"events",function(){return K.events});var X=n(/*! ./triggerEvent.js */"./triggerEvent.js");n.d(t,"triggerEvent",function(){return X.default})},"./internal/calculateTransform.js":
/*!****************************************!*\
        !*** ./internal/calculateTransform.js ***!
        \****************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./transform.js */"./internal/transform.js");t.default=function(e,t){var n=new r.Transform;n.translate(e.canvas.width/2,e.canvas.height/2);var i=e.viewport.rotation;0!==i&&n.rotate(i*Math.PI/180);var a=e.viewport.scale,o=e.viewport.scale,s=e.viewport.displayedArea.brhc.x-(e.viewport.displayedArea.tlhc.x-1),l=e.viewport.displayedArea.brhc.y-(e.viewport.displayedArea.tlhc.y-1);if("NONE"===e.viewport.displayedArea.presentationSizeMode)e.image.rowPixelSpacing<e.image.columnPixelSpacing?a*=e.image.columnPixelSpacing/e.image.rowPixelSpacing:e.image.columnPixelSpacing<e.image.rowPixelSpacing&&(o*=e.image.rowPixelSpacing/e.image.columnPixelSpacing);else if(a=e.viewport.displayedArea.columnPixelSpacing,o=e.viewport.displayedArea.rowPixelSpacing,"SCALE TO FIT"===e.viewport.displayedArea.presentationSizeMode){var u=e.canvas.height/(l*o),d=e.canvas.width/(s*a);a=o=Math.min(d,u),e.viewport.displayedArea.rowPixelSpacing<e.viewport.displayedArea.columnPixelSpacing?a*=e.viewport.displayedArea.columnPixelSpacing/e.viewport.displayedArea.rowPixelSpacing:e.viewport.displayedArea.columnPixelSpacing<e.viewport.displayedArea.rowPixelSpacing&&(o*=e.viewport.displayedArea.rowPixelSpacing/e.viewport.displayedArea.columnPixelSpacing)}return n.scale(a,o),0!==i&&n.rotate(-i*Math.PI/180),n.translate(e.viewport.translation.x,e.viewport.translation.y),0!==i&&n.rotate(i*Math.PI/180),void 0!==t&&n.scale(t,t),e.viewport.hflip&&n.scale(-1,1),e.viewport.vflip&&n.scale(1,-1),n.translate(-s/2,-l/2),n}},"./internal/computeAutoVoi.js":
/*!************************************!*\
        !*** ./internal/computeAutoVoi.js ***!
        \************************************/
/*! exports provided: default */function(e,t,n){function r(e,t){if(!function(e){return e.voiLUT&&e.voiLUT.lut&&e.voiLUT.lut.length>0||void 0!==e.voi.windowWidth&&void 0!==e.voi.windowCenter}(e)){var n=t.maxPixelValue*t.slope+t.intercept,r=t.minPixelValue*t.slope+t.intercept,i=n-r,a=(n+r)/2;void 0===e.voi?e.voi={windowWidth:i,windowCenter:a}:(e.voi.windowWidth=i,e.voi.windowCenter=a)}}n.r(t),n.d(t,"default",function(){return r})},"./internal/drawCompositeImage.js":
/*!****************************************!*\
        !*** ./internal/drawCompositeImage.js ***!
        \****************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ../layers.js */"./layers.js"),i=n(/*! ../rendering/renderGrayscaleImage.js */"./rendering/renderGrayscaleImage.js"),a=n(/*! ../rendering/renderColorImage.js */"./rendering/renderColorImage.js"),o=n(/*! ../rendering/renderPseudoColorImage.js */"./rendering/renderPseudoColorImage.js"),s=n(/*! ../rendering/renderLabelMapImage.js */"./rendering/renderLabelMapImage.js"),l=n(/*! ../setToPixelCoordinateSystem.js */"./setToPixelCoordinateSystem.js");function u(e){var t=e.syncProps||{};t.originalScale=e.viewport.scale,e.syncProps=t}t.default=function(e,t){var n=e.element,d=Object(r.getLayers)(n),c=Object(r.getActiveLayer)(n),f=Object(r.getVisibleLayers)(n),h=!e.lastSyncViewportsState&&e.syncViewports;e.lastSyncViewportsState=e.syncViewports,h&&d.forEach(function(e){e.viewport&&u(e)}),!0===e.syncViewports&&function(e,t){e.forEach(function(e){if(e!==t&&e.viewport&&t.viewport){e.syncProps||u(e);var n,r,i=(r=e,(n=t).syncProps||u(n),r.syncProps||u(r),r.syncProps.originalScale/n.syncProps.originalScale);e.viewport.scale=t.viewport.scale*i,e.viewport.rotation=t.viewport.rotation,e.viewport.translation={x:t.viewport.translation.x/i,y:t.viewport.translation.y/i},e.viewport.hflip=t.viewport.hflip,e.viewport.vflip=t.viewport.vflip}})}(f,c);var p=e.canvas.getContext("2d");p.setTransform(1,0,0,1,0,0),p.fillStyle="black",p.fillRect(0,0,e.canvas.width,e.canvas.height),function(e,t,n){f.forEach(function(t,r){if(t.image){e.save(),t.canvas=e.canvas,Object(l.default)(t,e);var u=t.viewport.colormap||t.options.colormap,d=t.viewport.labelmap,c=t.invalid||n;if(u&&""!==u&&!0===d)Object(s.addLabelMapLayer)(t,c);else if(u&&""!==u)Object(o.addPseudoColorLayer)(t,c);else if(!0===t.image.color)Object(a.addColorLayer)(t,c);else{var f=0===r;Object(i.addGrayscaleLayer)(t,c,f)}t.options&&t.options.opacity?e.globalAlpha=t.options.opacity:e.globalAlpha=1,t.options&&t.options.fillStyle&&(e.fillStyle=t.options.fillStyle),e.imageSmoothingEnabled=!t.viewport.pixelReplication,e.mozImageSmoothingEnabled=e.imageSmoothingEnabled;var h=t.viewport.displayedArea.tlhc.x-1,p=t.viewport.displayedArea.tlhc.y-1,g=t.viewport.displayedArea.brhc.x-h,v=t.viewport.displayedArea.brhc.y-p;e.drawImage(t.canvas,h,p,g,v,0,0,g,v),e.restore(),t.invalid=!1}})}(p,0,t)}},"./internal/drawImage.js":
/*!*******************************!*\
        !*** ./internal/drawImage.js ***!
        \*******************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.needsRedraw=!0,t&&(e.invalid=!0)}},"./internal/drawImageSync.js":
/*!***********************************!*\
        !*** ./internal/drawImageSync.js ***!
        \***********************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./now.js */"./internal/now.js"),i=n(/*! ./drawCompositeImage.js */"./internal/drawCompositeImage.js"),a=n(/*! ../rendering/renderColorImage.js */"./rendering/renderColorImage.js"),o=n(/*! ../rendering/renderGrayscaleImage.js */"./rendering/renderGrayscaleImage.js"),s=n(/*! ../rendering/renderPseudoColorImage.js */"./rendering/renderPseudoColorImage.js"),l=n(/*! ../rendering/renderLabelMapImage.js */"./rendering/renderLabelMapImage.js"),u=n(/*! ../triggerEvent.js */"./triggerEvent.js"),d=n(/*! ../events.js */"./events.js");t.default=function(e,t){var n=e.image,c=e.element,f=e.layers||[];if(e.canvas&&(e.image||f.length)){var h=Object(r.default)();if(n.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},f&&f.length)Object(i.default)(e,t);else if(n){var p=n.render;p||(p=e.viewport.colormap&&""!==e.viewport.colormap&&!0===e.image.labelmap?l.renderLabelMapImage:e.viewport.colormap&&""!==e.viewport.colormap?s.renderPseudoColorImage:n.color?a.renderColorImage:o.renderGrayscaleImage),p(e,t)}var g=Object(r.default)()-h,v={viewport:e.viewport,element:c,image:n,enabledElement:e,canvasContext:e.canvas.getContext("2d"),renderTimeInMs:g};n.stats.lastRenderTime=g,e.invalid=!1,e.needsRedraw=!1,Object(u.default)(c,d.default.IMAGE_RENDERED,v)}}},"./internal/generateColorLut.js":
/*!**************************************!*\
        !*** ./internal/generateColorLut.js ***!
        \**************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./getVOILut.js */"./internal/getVOILut.js");t.default=function(e,t,n,i,a){var o=e.maxPixelValue,s=e.minPixelValue,l=Math.min(s,0);if(void 0===e.cachedLut){var u=o-l+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(u)}var d=e.cachedLut.lutArray,c=Object(r.default)(t,n,a);if(!0===i)for(var f=s;f<=o;f++)d[f+-l]=255-c(f);else for(var h=s;h<=o;h++)d[h+-l]=c(h);return d}},"./internal/generateLut.js":
/*!*********************************!*\
        !*** ./internal/generateLut.js ***!
        \*********************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./getModalityLUT.js */"./internal/getModalityLUT.js"),i=n(/*! ./getVOILut.js */"./internal/getVOILut.js");t.default=function(e,t,n,a,o,s){var l=e.maxPixelValue,u=e.minPixelValue,d=Math.min(u,0);if(void 0===e.cachedLut){var c=l-d+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(c)}var f=e.cachedLut.lutArray,h=Object(r.default)(e.slope,e.intercept,o),p=Object(i.default)(t,n,s);if(!0===a)for(var g=u;g<=l;g++)f[g+-d]=255-p(h(g));else for(var v=u;v<=l;v++)f[v+-d]=p(h(v));return f}},"./internal/getCanvas.js":
/*!*******************************!*\
        !*** ./internal/getCanvas.js ***!
        \*******************************/
/*! exports provided: default */function(e,t,n){n.r(t),n.d(t,"default",function(){return i});var r="cornerstone-canvas";function i(e){var t="canvas.".concat(r);return e.querySelector(t)||function(e){var t=document.createElement("canvas");return t.style.display="block",t.classList.add(r),e.appendChild(t),t}(e)}},"./internal/getDefaultViewport.js":
/*!****************************************!*\
        !*** ./internal/getDefaultViewport.js ***!
        \****************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./getImageFitScale.js */"./internal/getImageFitScale.js");t.default=function(e,t){if(void 0===e)throw new Error("getDefaultViewport: parameter canvas must not be undefined");return void 0===t?{scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1,displayedArea:{tlhc:{x:1,y:1},brhc:{x:1,y:1},rowPixelSpacing:1,columnPixelSpacing:1,presentationSizeMode:"NONE"}}:{scale:Object(r.default)(e,t,0).scaleFactor,translation:{x:0,y:0},voi:{windowWidth:t.windowWidth,windowCenter:t.windowCenter},invert:t.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:t.modalityLUT,voiLUT:t.voiLUT,colormap:t.colormap,labelmap:Boolean(t.labelmap),displayedArea:{tlhc:{x:1,y:1},brhc:{x:t.columns,y:t.rows},rowPixelSpacing:void 0===t.rowPixelSpacing?1:t.rowPixelSpacing,columnPixelSpacing:void 0===t.columnPixelSpacing?1:t.columnPixelSpacing,presentationSizeMode:"NONE"}}}},"./internal/getImageFitScale.js":
/*!**************************************!*\
        !*** ./internal/getImageFitScale.js ***!
        \**************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./validator.js */"./internal/validator.js"),i=n(/*! ./getImageSize.js */"./internal/getImageSize.js");t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.validateParameterUndefinedOrNull)(e,"getImageScale: parameter windowSize must not be undefined"),Object(r.validateParameterUndefinedOrNull)(t,"getImageScale: parameter image must not be undefined");var a=Object(i.default)(t,n),o=t.rowPixelSpacing||1,s=t.columnPixelSpacing||1,l=1,u=1;o<s?u=s/o:l=o/s;var d=e.height/a.height/l,c=e.width/a.width/u;return{verticalScale:d,horizontalScale:c,scaleFactor:Math.min(c,d)}}},"./internal/getImageSize.js":
/*!**********************************!*\
        !*** ./internal/getImageSize.js ***!
        \**********************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./validator.js */"./internal/validator.js");t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(r.validateParameterUndefinedOrNull)(e,"getImageSize: parameter image must not be undefined"),Object(r.validateParameterUndefinedOrNull)(e.width,"getImageSize: parameter image must have width"),Object(r.validateParameterUndefinedOrNull)(e.height,"getImageSize: parameter image must have height"),null!==t&&void 0!==t&&0!==t&&180!==t?{height:e.width,width:e.height}:{width:e.width,height:e.height}}},"./internal/getModalityLUT.js":
/*!************************************!*\
        !*** ./internal/getModalityLUT.js ***!
        \************************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e,t,n){return n?function(e){var t=e.lut[0],n=e.lut[e.lut.length-1],r=e.firstValueMapped+e.lut.length;return function(i){return i<e.firstValueMapped?t:i>=r?n:e.lut[i]}}(n):function(e,t){return function(n){return n*e+t}}(e,t)}},"./internal/getTransform.js":
/*!**********************************!*\
        !*** ./internal/getTransform.js ***!
        \**********************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./calculateTransform.js */"./internal/calculateTransform.js");t.default=function(e){return Object(r.default)(e)}},"./internal/getVOILut.js":
/*!*******************************!*\
        !*** ./internal/getVOILut.js ***!
        \*******************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e,t,n){return n?function(e){var t=Math.max.apply(Math,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(e.lut)).toString(2).length-8,n=e.lut[0]>>t,r=e.lut[e.lut.length-1]>>t,i=e.firstValueMapped+e.lut.length-1;return function(a){return a<e.firstValueMapped?n:a>=i?r:e.lut[a-e.firstValueMapped]>>t}}(n):function(e,t){return function(n){return 255*((n-t)/e+.5)}}(e,t)}},"./internal/guid.js":
/*!**************************!*\
        !*** ./internal/guid.js ***!
        \**************************/
/*! exports provided: default */function(e,t,n){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}n.r(t),t.default=function(){return"".concat(r()+r(),"-").concat(r(),"-").concat(r(),"-").concat(r(),"-").concat(r()).concat(r()).concat(r())}},"./internal/index.js":
/*!***************************!*\
        !*** ./internal/index.js ***!
        \***************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./drawImage.js */"./internal/drawImage.js"),i=n(/*! ./generateLut.js */"./internal/generateLut.js"),a=n(/*! ./getDefaultViewport.js */"./internal/getDefaultViewport.js"),o=n(/*! ./requestAnimationFrame.js */"./internal/requestAnimationFrame.js"),s=n(/*! ./storedPixelDataToCanvasImageData.js */"./internal/storedPixelDataToCanvasImageData.js"),l=n(/*! ./storedPixelDataToCanvasImageDataRGBA.js */"./internal/storedPixelDataToCanvasImageDataRGBA.js"),u=n(/*! ./storedColorPixelDataToCanvasImageData.js */"./internal/storedColorPixelDataToCanvasImageData.js"),d=n(/*! ./storedPixelDataToCanvasImageDataColorLUT.js */"./internal/storedPixelDataToCanvasImageDataColorLUT.js"),c=n(/*! ./storedPixelDataToCanvasImageDataPseudocolorLUT.js */"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js"),f=n(/*! ./getTransform.js */"./internal/getTransform.js"),h=n(/*! ./calculateTransform.js */"./internal/calculateTransform.js"),p=n(/*! ./transform.js */"./internal/transform.js");t.default={drawImage:r.default,generateLut:i.default,getDefaultViewport:a.default,requestAnimationFrame:o.default,storedPixelDataToCanvasImageData:s.default,storedPixelDataToCanvasImageDataRGBA:l.default,storedPixelDataToCanvasImageDataColorLUT:d.default,storedPixelDataToCanvasImageDataPseudocolorLUT:c.default,storedColorPixelDataToCanvasImageData:u.default,getTransform:f.default,calculateTransform:h.default,Transform:p.Transform}},"./internal/now.js":
/*!*************************!*\
        !*** ./internal/now.js ***!
        \*************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(){return window.performance?performance.now():Date.now()}},"./internal/requestAnimationFrame.js":
/*!*******************************************!*\
        !*** ./internal/requestAnimationFrame.js ***!
        \*******************************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e){return window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.oRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||function(e){window.setTimeout(e,1e3/60)}(e)}},"./internal/storedColorPixelDataToCanvasImageData.js":
/*!***********************************************************!*\
        !*** ./internal/storedColorPixelDataToCanvasImageData.js ***!
        \***********************************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./now.js */"./internal/now.js");t.default=function(e,t,n){var i=Object(r.default)(),a=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-i;var o=e.minPixelValue,s=0,l=0,u=a.length;if(i=Object(r.default)(),o<0)for(;l<u;)n[s++]=t[a[l++]+-o],n[s++]=t[a[l++]+-o],n[s]=t[a[l]+-o],l+=2,s+=2;else for(;l<u;)n[s++]=t[a[l++]],n[s++]=t[a[l++]],n[s]=t[a[l]],l+=2,s+=2;e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-i}},"./internal/storedPixelDataToCanvasImageData.js":
/*!******************************************************!*\
        !*** ./internal/storedPixelDataToCanvasImageData.js ***!
        \******************************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./now.js */"./internal/now.js");t.default=function(e,t,n){var i=Object(r.default)(),a=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-i;var o=a.length,s=e.minPixelValue,l=3,u=0;if(i=Object(r.default)(),a instanceof Int16Array)if(s<0)for(;u<o;)n[l]=t[a[u++]+-s],l+=4;else for(;u<o;)n[l]=t[a[u++]],l+=4;else if(a instanceof Uint16Array)for(;u<o;)n[l]=t[a[u++]],l+=4;else if(s<0)for(;u<o;)n[l]=t[a[u++]+-s],l+=4;else for(;u<o;)n[l]=t[a[u++]],l+=4;e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-i}},"./internal/storedPixelDataToCanvasImageDataColorLUT.js":
/*!**************************************************************!*\
        !*** ./internal/storedPixelDataToCanvasImageDataColorLUT.js ***!
        \**************************************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ../colors/index.js */"./colors/index.js"),i=n(/*! ./now.js */"./internal/now.js");t.default=function(e,t,n){var a=Object(i.default)(),o=e.getPixelData();e.stats.lastGetPixelDataTime=Object(i.default)()-a;var s,l,u=o.length,d=e.minPixelValue,c=0,f=0;if(a=Object(i.default)(),l=t instanceof r.default.LookupTable?t.Table:t,d<0)for(;f<u;)s=l[o[f++]+-d],n[c++]=s[0],n[c++]=s[1],n[c++]=s[2],n[c++]=s[3];else for(;f<u;)s=l[o[f++]],n[c++]=s[0],n[c++]=s[1],n[c++]=s[2],n[c++]=s[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(i.default)()-a}},"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js":
/*!********************************************************************!*\
        !*** ./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js ***!
        \********************************************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ../colors/index.js */"./colors/index.js"),i=n(/*! ./now.js */"./internal/now.js");t.default=function(e,t,n,a){var o=Object(i.default)(),s=e.getPixelData();e.stats.lastGetPixelDataTime=Object(i.default)()-o;var l,u,d=s.length,c=e.minPixelValue,f=0,h=0;if(o=Object(i.default)(),u=n instanceof r.default.LookupTable?n.Table:n,c<0)for(;h<d;)l=u[t[s[h++]+-c]],a[f++]=l[0],a[f++]=l[1],a[f++]=l[2],a[f++]=l[3];else for(;h<d;)l=u[t[s[h++]]],a[f++]=l[0],a[f++]=l[1],a[f++]=l[2],a[f++]=l[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(i.default)()-o}},"./internal/storedPixelDataToCanvasImageDataRGBA.js":
/*!**********************************************************!*\
        !*** ./internal/storedPixelDataToCanvasImageDataRGBA.js ***!
        \**********************************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./now.js */"./internal/now.js");t.default=function(e,t,n){var i=Object(r.default)(),a=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-i;var o,s=a.length,l=e.minPixelValue,u=0,d=0;if(i=Object(r.default)(),a instanceof Int16Array)if(l<0)for(;d<s;)o=t[a[d++]+-l],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else for(;d<s;)o=t[a[d++]],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else if(a instanceof Uint16Array)for(;d<s;)o=t[a[d++]],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else if(l<0)for(;d<s;)o=t[a[d++]+-l],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else for(;d<s;)o=t[a[d++]],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-i}},"./internal/storedRGBAPixelDataToCanvasImageData.js":
/*!**********************************************************!*\
        !*** ./internal/storedRGBAPixelDataToCanvasImageData.js ***!
        \**********************************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./now.js */"./internal/now.js");t.default=function(e,t,n){var i=Object(r.default)(),a=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-i;var o=e.minPixelValue,s=0,l=0,u=a.length;if(i=Object(r.default)(),o<0)for(;l<u;)n[s++]=t[a[l++]+-o],n[s++]=t[a[l++]+-o],n[s++]=t[a[l++]+-o],n[s++]=a[l++];else for(;l<u;)n[s++]=t[a[l++]],n[s++]=t[a[l++]],n[s++]=t[a[l++]],n[s++]=a[l++];e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-i}},"./internal/transform.js":
/*!*******************************!*\
        !*** ./internal/transform.js ***!
        \*******************************/
/*! exports provided: Transform */function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"Transform",function(){return i});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n;return t=e,(n=[{key:"reset",value:function(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function(){var t=new e;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t}},{key:"multiply",value:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o}},{key:"invert",value:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,a=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=o}},{key:"translate",value:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}},{key:"scale",value:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}},{key:"transformPoint",value:function(e,t){var n=e,r=t;return{x:e=n*this.m[0]+r*this.m[2]+this.m[4],y:t=n*this.m[1]+r*this.m[3]+this.m[5]}}}])&&r(t.prototype,n),e}()},"./internal/tryEnableWebgl.js":
/*!************************************!*\
        !*** ./internal/tryEnableWebgl.js ***!
        \************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ../webgl/index.js */"./webgl/index.js");t.default=function(e){return r.default.renderer.isWebGLAvailable()?(r.default.renderer.initRenderer(),e.renderer="webgl",!0):(delete e.renderer,!1)}},"./internal/validator.js":
/*!*******************************!*\
        !*** ./internal/validator.js ***!
        \*******************************/
/*! exports provided: validateParameterUndefined, validateParameterUndefinedOrNull */function(e,t,n){function r(e,t){if(void 0===e)throw new Error(t)}function i(e,t){if(void 0===e||null===e)throw new Error(t)}n.r(t),n.d(t,"validateParameterUndefined",function(){return r}),n.d(t,"validateParameterUndefinedOrNull",function(){return i})},"./invalidate.js":
/*!***********************!*\
        !*** ./invalidate.js ***!
        \***********************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./triggerEvent.js */"./triggerEvent.js"),a=n(/*! ./events.js */"./events.js");t.default=function(e){var t=Object(r.getEnabledElement)(e);t.invalid=!0,t.needsRedraw=!0;var n={element:e};Object(i.default)(e,a.default.INVALIDATED,n)}},"./invalidateImageId.js":
/*!******************************!*\
        !*** ./invalidateImageId.js ***!
        \******************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/drawImage.js */"./internal/drawImage.js");t.default=function(e){Object(r.getEnabledElementsByImageId)(e).forEach(function(e){Object(i.default)(e,!0)})}},"./layers.js":
/*!*******************!*\
        !*** ./layers.js ***!
        \*******************/
/*! exports provided: rescaleImage, addLayer, removeLayer, getLayer, getLayers, getVisibleLayers, setActiveLayer, setLayerImage, getActiveLayer, purgeLayers */function(e,t,n){n.r(t),n.d(t,"rescaleImage",function(){return d}),n.d(t,"addLayer",function(){return c}),n.d(t,"removeLayer",function(){return f}),n.d(t,"getLayer",function(){return h}),n.d(t,"getLayers",function(){return p}),n.d(t,"getVisibleLayers",function(){return g}),n.d(t,"setActiveLayer",function(){return v}),n.d(t,"setLayerImage",function(){return m}),n.d(t,"getActiveLayer",function(){return y}),n.d(t,"purgeLayers",function(){return b});var r=n(/*! ./internal/guid.js */"./internal/guid.js"),i=n(/*! ./enabledElements.js */"./enabledElements.js"),a=n(/*! ./internal/getDefaultViewport.js */"./internal/getDefaultViewport.js"),o=n(/*! ./updateImage.js */"./updateImage.js"),s=n(/*! ./triggerEvent.js */"./triggerEvent.js"),l=n(/*! ./events.js */"./events.js");function u(e,t,n){var r=t.element,i={viewport:t.viewport,element:t.element,image:t.image,enabledElement:t,layerId:n};Object(s.default)(r,e,i)}function d(e,t){if(e.layerId===t.layerId)throw new Error("rescaleImage: both arguments represent the same layer");var n=e.image,r=t.image;if(n.imageId&&r.imageId){var i=t.viewport.displayedArea.columnPixelSpacing*r.width/(e.viewport.displayedArea.columnPixelSpacing*n.width),a=t.viewport.scale/e.viewport.scale*i;t.viewport.scale=e.viewport.scale*a}}function c(e,t,n){var o,s=Object(r.default)(),c=Object(i.getEnabledElement)(e),f=c.layers;t&&(o=Object(a.default)(c.canvas,t),n&&n.viewport&&(o=Object.assign(o,n.viewport))),!1!==c.syncViewports&&(c.syncViewports=!0);var h={image:t,layerId:s,viewport:o,options:n||{},renderingTools:{}};return f.length&&t&&d(f[0],h),f.push(h),u(l.default.LAYER_ADDED,c,s),1===f.length&&t&&v(e,s),s}function f(e,t){var n=Object(i.getEnabledElement)(e),r=n.layers,a=n.layers.findIndex(function(e){return e.layerId===t});-1!==a&&(r.splice(a,1),t===n.activeLayerId&&r.length&&v(e,r[0].layerId),u(l.default.LAYER_REMOVED,n,t))}function h(e,t){return Object(i.getEnabledElement)(e).layers.find(function(e){return e.layerId===t})}function p(e){return Object(i.getEnabledElement)(e).layers}function g(e){return Object(i.getEnabledElement)(e).layers.filter(function(e){return e.options&&!1!==e.options.visible&&0!==e.options.opacity})}function v(e,t){var n=Object(i.getEnabledElement)(e);if(n.activeLayerId!==t){var r=n.layers.findIndex(function(e){return e.layerId===t});if(-1===r)throw new Error("setActiveLayer: layer not found in layers array");var a=n.layers[r];if(!a.image)throw new Error("setActiveLayer: layer with undefined image cannot be set as active.");n.activeLayerId=t,n.image=a.image,n.viewport=a.viewport,Object(o.default)(e),u(l.default.ACTIVE_LAYER_CHANGED,n,t)}}function m(e,t,n){var r,o=Object(i.getEnabledElement)(e),s=o.layers[0];if(!(r=n?h(e,n):y(e)))throw new Error("setLayerImage: Layer not found");if(r.image=t,t){if(!r.viewport){var l=Object(a.default)(o.canvas,t);r.options&&r.options.viewport&&(r.viewport=Object.assign(l,r.options.viewport)),s.layerId!==n&&d(s,r)}}else r.viewport=void 0}function y(e){var t=Object(i.getEnabledElement)(e);return t.layers.find(function(e){return e.layerId===t.activeLayerId})}function b(e){var t=Object(i.getEnabledElement)(e);t.layers=[],delete t.activeLayerId,delete t.lastSyncViewportsState}},"./metaData.js":
/*!*********************!*\
        !*** ./metaData.js ***!
        \*********************/
/*! exports provided: addProvider, removeProvider, default */function(e,t,n){n.r(t),n.d(t,"addProvider",function(){return i}),n.d(t,"removeProvider",function(){return a});var r=[];function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(t=0;t<r.length&&!(r[t].priority<=n);t++);r.splice(t,0,{priority:n,provider:e})}function a(e){for(var t=0;t<r.length;t++)if(r[t].provider===e){r.splice(t,1);break}}t.default={addProvider:i,removeProvider:a,get:function(e,t){for(var n=0;n<r.length;n++){var i=r[n].provider(e,t);if(void 0!==i)return i}}}},"./pageToPixel.js":
/*!************************!*\
        !*** ./pageToPixel.js ***!
        \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/getTransform.js */"./internal/getTransform.js");t.default=function(e,t,n){var a=Object(r.getEnabledElement)(e);if(void 0===a.image)throw new Error("image has not been loaded yet");var o=e.getBoundingClientRect(),s={x:t-o.left-window.pageXOffset,y:n-o.top-window.pageYOffset},l=Object(i.default)(a);return l.invert(),l.transformPoint(s.x,s.y)}},"./pixelDataToFalseColorData.js":
/*!**************************************!*\
        !*** ./pixelDataToFalseColorData.js ***!
        \**************************************/
/*! exports provided: default */function(e,t,n){n.r(t),n.d(t,"default",function(){return i});var r=n(/*! ./colors/index.js */"./colors/index.js");function i(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var n,i,a=e.minPixelValue,o=0,s=0,l=e.width*e.height,u=e.origPixelData||e.getPixelData(),d=new Uint8Array(4*l);if(e.color=!0,e.falseColor=!0,e.origPixelData=u,t instanceof r.default.LookupTable)for(t.build();s<l;)n=u[s++],i=t.mapValue(n),d[o++]=i[0],d[o++]=i[1],d[o++]=i[2],d[o++]=i[3];else if(a<0)for(;s<l;)n=u[s++],d[o++]=t[n+-a][0],d[o++]=t[n+-a][1],d[o++]=t[n+-a][2],d[o++]=t[n+-a][3];else for(;s<l;)n=u[s++],d[o++]=t[n][0],d[o++]=t[n][1],d[o++]=t[n][2],d[o++]=t[n][3];e.rgba=!0,e.cachedLut=void 0,e.render=void 0,e.slope=1,e.intercept=0,e.minPixelValue=0,e.maxPixelValue=255,e.windowWidth=255,e.windowCenter=128,e.getPixelData=function(){return d}}},"./pixelToCanvas.js":
/*!**************************!*\
        !*** ./pixelToCanvas.js ***!
        \**************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/getTransform.js */"./internal/getTransform.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e);return Object(i.default)(n).transformPoint(t.x,t.y)}},"./rendering/doesImageNeedToBeRendered.js":
/*!************************************************!*\
        !*** ./rendering/doesImageNeedToBeRendered.js ***!
        \************************************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e,t){var n=e.renderingTools.lastRenderedImageId,r=e.renderingTools.lastRenderedViewport;return t.imageId!==n||!r||r.windowCenter!==e.viewport.voi.windowCenter||r.windowWidth!==e.viewport.voi.windowWidth||r.invert!==e.viewport.invert||r.rotation!==e.viewport.rotation||r.hflip!==e.viewport.hflip||r.vflip!==e.viewport.vflip||r.modalityLUT!==e.viewport.modalityLUT||r.voiLUT!==e.viewport.voiLUT||r.colormap!==e.viewport.colormap}},"./rendering/getLut.js":
/*!*****************************!*\
        !*** ./rendering/getLut.js ***!
        \*****************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ../internal/computeAutoVoi.js */"./internal/computeAutoVoi.js"),i=n(/*! ./lutMatches.js */"./rendering/lutMatches.js"),a=n(/*! ../internal/generateLut.js */"./internal/generateLut.js");t.default=function(e,t,n){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&Object(i.default)(e.cachedLut.modalityLUT,t.modalityLUT)&&Object(i.default)(e.cachedLut.voiLUT,t.voiLUT)&&e.cachedLut.invert===t.invert&&!0!==n?e.cachedLut.lutArray:(Object(r.default)(t,e),Object(a.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert,t.modalityLUT,t.voiLUT),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.voiLUT=t.voiLUT,e.cachedLut.modalityLUT=t.modalityLUT,e.cachedLut.lutArray)}},"./rendering/index.js":
/*!****************************!*\
        !*** ./rendering/index.js ***!
        \****************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./renderColorImage.js */"./rendering/renderColorImage.js"),i=n(/*! ./renderGrayscaleImage.js */"./rendering/renderGrayscaleImage.js"),a=n(/*! ./renderWebImage.js */"./rendering/renderWebImage.js"),o=n(/*! ./renderPseudoColorImage.js */"./rendering/renderPseudoColorImage.js"),s=n(/*! ./renderLabelMapImage.js */"./rendering/renderLabelMapImage.js"),l=n(/*! ./renderToCanvas.js */"./rendering/renderToCanvas.js");t.default={colorImage:r.renderColorImage,grayscaleImage:i.renderGrayscaleImage,webImage:a.renderWebImage,pseudoColorImage:o.renderPseudoColorImage,labelMapImage:s.renderLabelMapImage,toCanvas:l.default}},"./rendering/initializeRenderCanvas.js":
/*!*********************************************!*\
        !*** ./rendering/initializeRenderCanvas.js ***!
        \*********************************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e,t){var n=e.renderingTools.renderCanvas;n.width=t.width,n.height=t.height;var r=n.getContext("2d");r.fillStyle="white",r.fillRect(0,0,n.width,n.height);var i=r.getImageData(0,0,t.width,t.height);e.renderingTools.renderCanvasContext=r,e.renderingTools.renderCanvasData=i}},"./rendering/lutMatches.js":
/*!*********************************!*\
        !*** ./rendering/lutMatches.js ***!
        \*********************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e,t){return!e&&!t||!(!e||!t)&&e.id===t.id}},"./rendering/renderColorImage.js":
/*!***************************************!*\
        !*** ./rendering/renderColorImage.js ***!
        \***************************************/
/*! exports provided: renderColorImage, addColorLayer */function(e,t,n){n.r(t),n.d(t,"renderColorImage",function(){return h}),n.d(t,"addColorLayer",function(){return p});var r=n(/*! ../internal/now.js */"./internal/now.js"),i=n(/*! ../internal/generateColorLut.js */"./internal/generateColorLut.js"),a=n(/*! ../internal/storedColorPixelDataToCanvasImageData.js */"./internal/storedColorPixelDataToCanvasImageData.js"),o=n(/*! ../internal/storedRGBAPixelDataToCanvasImageData.js */"./internal/storedRGBAPixelDataToCanvasImageData.js"),s=n(/*! ../setToPixelCoordinateSystem.js */"./setToPixelCoordinateSystem.js"),l=n(/*! ../webgl/index.js */"./webgl/index.js"),u=n(/*! ./doesImageNeedToBeRendered.js */"./rendering/doesImageNeedToBeRendered.js"),d=n(/*! ./initializeRenderCanvas.js */"./rendering/initializeRenderCanvas.js"),c=n(/*! ./saveLastRendered.js */"./rendering/saveLastRendered.js");function f(e,t,n){var s=!0===e.renderingTools.lastRenderedIsColor;e.renderingTools.renderCanvas&&s||(e.renderingTools.renderCanvas=document.createElement("canvas"));var l=e.renderingTools.renderCanvas;if(255===e.viewport.voi.windowWidth&&128===e.viewport.voi.windowCenter&&!1===e.viewport.invert&&t.getCanvas&&t.getCanvas())return t.getCanvas();if(!1===Object(u.default)(e,t)&&!0!==n)return l;l.width===t.width&&l.height===t.height||Object(d.default)(e,t);var c=Object(r.default)(),f=function(e,t){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&e.cachedLut.invert===t.invert?e.cachedLut.lutArray:(Object(i.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.lutArray)}(t,e.viewport);t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(r.default)()-c;var h=e.renderingTools.renderCanvasData,p=e.renderingTools.renderCanvasContext;return t.rgba?Object(o.default)(t,f,h.data):Object(a.default)(t,f,h.data),c=Object(r.default)(),p.putImageData(h,0,0),t.stats.lastPutImageDataTime=Object(r.default)()-c,l}function h(e,t){if(void 0===e)throw new Error("renderColorImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderColorImage: image must be loaded before it can be drawn");var r,i=e.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),i.fillStyle="black",i.fillRect(0,0,e.canvas.width,e.canvas.height),i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,Object(s.default)(e,i),r=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?l.default.renderer.render(e):f(e,n,t);var a=e.viewport.displayedArea.tlhc.x-1,o=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-a,d=e.viewport.displayedArea.brhc.y-o;i.drawImage(r,a,o,u,d,0,0,u,d),e.renderingTools=Object(c.default)(e)}function p(e,t){if(void 0===e)throw new Error("addColorLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addColorLayer: image must be loaded before it can be drawn");n.rgba=!0,e.canvas=f(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=Object(c.default)(e)}},"./rendering/renderGrayscaleImage.js":
/*!*******************************************!*\
        !*** ./rendering/renderGrayscaleImage.js ***!
        \*******************************************/
/*! exports provided: renderGrayscaleImage, addGrayscaleLayer */function(e,t,n){n.r(t),n.d(t,"renderGrayscaleImage",function(){return h}),n.d(t,"addGrayscaleLayer",function(){return p});var r=n(/*! ../internal/storedPixelDataToCanvasImageData.js */"./internal/storedPixelDataToCanvasImageData.js"),i=n(/*! ../internal/storedPixelDataToCanvasImageDataRGBA.js */"./internal/storedPixelDataToCanvasImageDataRGBA.js"),a=n(/*! ../setToPixelCoordinateSystem.js */"./setToPixelCoordinateSystem.js"),o=n(/*! ../internal/now.js */"./internal/now.js"),s=n(/*! ../webgl/index.js */"./webgl/index.js"),l=n(/*! ./getLut.js */"./rendering/getLut.js"),u=n(/*! ./doesImageNeedToBeRendered.js */"./rendering/doesImageNeedToBeRendered.js"),d=n(/*! ./initializeRenderCanvas.js */"./rendering/initializeRenderCanvas.js"),c=n(/*! ./saveLastRendered.js */"./rendering/saveLastRendered.js");function f(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!0===e.renderingTools.lastRenderedIsColor;e.renderingTools.renderCanvas&&!s||(e.renderingTools.renderCanvas=document.createElement("canvas"),Object(d.default)(e,t));var c=e.renderingTools.renderCanvas;if(!1===Object(u.default)(e,t)&&!0!==n)return c;c.width===t.width&&c.height===t.height||Object(d.default)(e,t);var f=Object(o.default)(),h=Object(l.default)(t,e.viewport,n);t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(o.default)()-f;var p=e.renderingTools.renderCanvasData,g=e.renderingTools.renderCanvasContext;return a?Object(r.default)(t,h,p.data):Object(i.default)(t,h,p.data),f=Object(o.default)(),g.putImageData(p,0,0),t.stats.lastPutImageDataTime=Object(o.default)()-f,c}function h(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("drawImage: image must be loaded before it can be drawn");var r,i=e.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),i.fillStyle="black",i.fillRect(0,0,e.canvas.width,e.canvas.height),i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,Object(a.default)(e,i),r=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?s.default.renderer.render(e):f(e,n,t);var o=e.viewport.displayedArea.tlhc.x-1,l=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-o,d=e.viewport.displayedArea.brhc.y-l;i.drawImage(r,o,l,u,d,0,0,u,d),e.renderingTools=Object(c.default)(e)}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e)throw new Error("addGrayscaleLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addGrayscaleLayer: image must be loaded before it can be drawn");e.canvas=f(e,r,t,n);var i=e.canvas.getContext("2d");i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,e.renderingTools=Object(c.default)(e)}},"./rendering/renderLabelMapImage.js":
/*!******************************************!*\
        !*** ./rendering/renderLabelMapImage.js ***!
        \******************************************/
/*! exports provided: renderLabelMapImage, addLabelMapLayer */function(e,t,n){n.r(t),n.d(t,"renderLabelMapImage",function(){return c}),n.d(t,"addLabelMapLayer",function(){return f});var r=n(/*! ../setToPixelCoordinateSystem.js */"./setToPixelCoordinateSystem.js"),i=n(/*! ../internal/now.js */"./internal/now.js"),a=n(/*! ./initializeRenderCanvas.js */"./rendering/initializeRenderCanvas.js"),o=n(/*! ./saveLastRendered.js */"./rendering/saveLastRendered.js"),s=n(/*! ./doesImageNeedToBeRendered.js */"./rendering/doesImageNeedToBeRendered.js"),l=n(/*! ../internal/storedPixelDataToCanvasImageDataColorLUT.js */"./internal/storedPixelDataToCanvasImageDataColorLUT.js"),u=n(/*! ../colors/index.js */"./colors/index.js");function d(e,t,n){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var r=e.renderingTools.renderCanvas,o=e.viewport.colormap||e.options.colormap;if(e.options.colormap,o&&"string"==typeof o&&(o=u.default.getColormap(o)),!o)throw new Error("renderLabelMapImage: colormap not found.");var d=o.getId();if(!1===Object(s.default)(e,t)&&!0!==n&&e.renderingTools.colormapId===d)return r;r.width===t.width&&r.height===t.height||Object(a.default)(e,t);var c=Object(i.default)();e.renderingTools.colorLut&&!n&&e.renderingTools.colormapId===d||(e.renderingTools.colorLut=o.createLookupTable(),e.renderingTools.colormapId=d),t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(i.default)()-c;var f=e.renderingTools.colorLut,h=e.renderingTools.renderCanvasData,p=e.renderingTools.renderCanvasContext;return Object(l.default)(t,f,h.data),c=Object(i.default)(),p.putImageData(h,0,0),t.stats.lastPutImageDataTime=Object(i.default)()-c,r}function c(e,t){if(void 0===e)throw new Error("renderLabelMapImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderLabelMapImage: image must be loaded before it can be drawn");var i=e.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),i.fillStyle="black",i.fillRect(0,0,e.canvas.width,e.canvas.height),i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,Object(r.default)(e,i);var a=d(e,n,t),s=e.viewport.displayedArea.tlhc.x-1,l=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-s,c=e.viewport.displayedArea.brhc.y-l;i.drawImage(a,s,l,u,c,0,0,u,c),e.renderingTools=Object(o.default)(e)}function f(e,t){if(void 0===e)throw new Error("addLabelMapLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addLabelMapLayer: image must be loaded before it can be drawn");e.canvas=d(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=Object(o.default)(e)}},"./rendering/renderPseudoColorImage.js":
/*!*********************************************!*\
        !*** ./rendering/renderPseudoColorImage.js ***!
        \*********************************************/
/*! exports provided: renderPseudoColorImage, addPseudoColorLayer */function(e,t,n){n.r(t),n.d(t,"renderPseudoColorImage",function(){return f}),n.d(t,"addPseudoColorLayer",function(){return h});var r=n(/*! ../setToPixelCoordinateSystem.js */"./setToPixelCoordinateSystem.js"),i=n(/*! ../internal/now.js */"./internal/now.js"),a=n(/*! ./initializeRenderCanvas.js */"./rendering/initializeRenderCanvas.js"),o=n(/*! ./getLut.js */"./rendering/getLut.js"),s=n(/*! ./saveLastRendered.js */"./rendering/saveLastRendered.js"),l=n(/*! ./doesImageNeedToBeRendered.js */"./rendering/doesImageNeedToBeRendered.js"),u=n(/*! ../internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js */"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js"),d=n(/*! ../colors/index.js */"./colors/index.js");function c(e,t,n){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var r=e.renderingTools.renderCanvas,s=e.viewport.colormap||e.options.colormap;if(e.options.colormap,s&&"string"==typeof s&&(s=d.default.getColormap(s)),!s)throw new Error("renderPseudoColorImage: colormap not found.");var c=s.getId();if(!1===Object(l.default)(e,t)&&!0!==n&&e.renderingTools.colormapId===c)return r;r.width===t.width&&r.height===t.height||Object(a.default)(e,t);var f=Object(i.default)();e.renderingTools.colorLut&&!n&&e.renderingTools.colormapId===c||(s.setNumberOfColors(256),e.renderingTools.colorLut=s.createLookupTable(),e.renderingTools.colormapId=c);var h=Object(o.default)(t,e.viewport,n);t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(i.default)()-f;var p=e.renderingTools.colorLut,g=e.renderingTools.renderCanvasData,v=e.renderingTools.renderCanvasContext;return Object(u.default)(t,h,p,g.data),f=Object(i.default)(),v.putImageData(g,0,0),t.stats.lastPutImageDataTime=Object(i.default)()-f,r}function f(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("drawImage: image must be loaded before it can be drawn");var i=e.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),i.fillStyle="black",i.fillRect(0,0,e.canvas.width,e.canvas.height),i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,Object(r.default)(e,i);var a=c(e,n,t),o=e.viewport.displayedArea.tlhc.x-1,l=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-o,d=e.viewport.displayedArea.brhc.y-l;i.drawImage(a,o,l,u,d,0,0,u,d),e.renderingTools=Object(s.default)(e)}function h(e,t){if(void 0===e)throw new Error("addPseudoColorLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addPseudoColorLayer: image must be loaded before it can be drawn");e.canvas=c(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=Object(s.default)(e)}},"./rendering/renderToCanvas.js":
/*!*************************************!*\
        !*** ./rendering/renderToCanvas.js ***!
        \*************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ../triggerEvent.js */"./triggerEvent.js"),i=n(/*! ../events.js */"./events.js"),a=n(/*! ../internal/drawImageSync.js */"./internal/drawImageSync.js"),o=n(/*! ../internal/getDefaultViewport.js */"./internal/getDefaultViewport.js"),s=n(/*! ../internal/tryEnableWebgl.js */"./internal/tryEnableWebgl.js");t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===e)throw new Error("renderToCanvas: parameter canvas cannot be undefined");l&&l.renderer&&"webgl"===l.renderer.toLowerCase()&&Object(s.default)(l);var u=Object(o.default)(e,t);n&&Object.assign(u,n);var d=function(e,t,n,r){return{element:e,canvas:e,image:t,invalid:!0,needsRedraw:!0,options:l,layers:[],data:{},renderingTools:{},viewport:u}}(e,t),c={enabledElement:d,timestamp:Date.now()};Object(r.default)(d.element,i.default.PRE_RENDER,c),Object(a.default)(d,d.invalid)}},"./rendering/renderWebImage.js":
/*!*************************************!*\
        !*** ./rendering/renderWebImage.js ***!
        \*************************************/
/*! exports provided: renderWebImage */function(e,t,n){n.r(t),n.d(t,"renderWebImage",function(){return a});var r=n(/*! ../setToPixelCoordinateSystem.js */"./setToPixelCoordinateSystem.js"),i=n(/*! ./renderColorImage.js */"./rendering/renderColorImage.js");function a(e,t){if(void 0===e)throw new Error("renderWebImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderWebImage: image must be loaded before it can be drawn");if(e.viewport.voi.windowWidth===e.image.windowWidth&&e.viewport.voi.windowCenter===e.image.windowCenter&&!1===e.viewport.invert){var a=e.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.fillStyle="black",a.fillRect(0,0,e.canvas.width,e.canvas.height),a.imageSmoothingEnabled=!e.viewport.pixelReplication,a.mozImageSmoothingEnabled=a.imageSmoothingEnabled,Object(r.default)(e,a);var o=e.viewport.displayedArea.tlhc.x-1,s=e.viewport.displayedArea.tlhc.y-1,l=e.viewport.displayedArea.brhc.x-o,u=e.viewport.displayedArea.brhc.y-s;a.drawImage(n.getImage(),o,s,l,u,0,0,l,u)}else Object(i.renderColorImage)(e,t)}},"./rendering/saveLastRendered.js":
/*!***************************************!*\
        !*** ./rendering/saveLastRendered.js ***!
        \***************************************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default=function(e){var t=e.image.imageId,n=e.viewport,r=e.image.color;return e.renderingTools.lastRenderedImageId=t,e.renderingTools.lastRenderedIsColor=r,e.renderingTools.lastRenderedViewport={windowCenter:n.voi.windowCenter,windowWidth:n.voi.windowWidth,invert:n.invert,rotation:n.rotation,hflip:n.hflip,vflip:n.vflip,modalityLUT:n.modalityLUT,voiLUT:n.voiLUT,colormap:n.colormap},e.renderingTools}},"./reset.js":
/*!******************!*\
        !*** ./reset.js ***!
        \******************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/getDefaultViewport.js */"./internal/getDefaultViewport.js"),a=n(/*! ./updateImage.js */"./updateImage.js");t.default=function(e){var t=Object(r.getEnabledElement)(e);t.viewport=Object(i.default)(t.canvas,t.image),Object(a.default)(e)}},"./resize.js":
/*!*******************!*\
        !*** ./resize.js ***!
        \*******************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./fitToWindow.js */"./fitToWindow.js"),a=n(/*! ./updateImage.js */"./updateImage.js"),o=n(/*! ./triggerEvent.js */"./triggerEvent.js"),s=n(/*! ./internal/getImageSize.js */"./internal/getImageSize.js"),l=n(/*! ./events.js */"./events.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e),u=n.canvas.width,d=n.canvas.height;!function(e,t){t.width!==e.clientWidth&&(t.width=e.clientWidth,t.style.width="".concat(e.clientWidth,"px")),t.height!==e.clientHeight&&(t.height=e.clientHeight,t.style.height="".concat(e.clientHeight,"px"))}(e,n.canvas);var c={element:e};Object(o.default)(e,l.default.ELEMENT_RESIZED,c),void 0!==n.image&&(t||function(e,t,n){var r=e.viewport.scale,i=Object(s.default)(e.image,e.viewport.rotation),a=Math.round(i.width*r),o=Math.round(i.height*r),l=e.viewport.translation.x,u=e.viewport.translation.y;return a===t&&o<=n||a<=t&&o===n&&0===l&&0===u}(n,u,d)?Object(i.default)(e):(function(e,t,n){var r=e.viewport.scale,i=e.canvas.width/t,a=e.canvas.height/n,o=Math.sqrt(i*a);e.viewport.scale=o*r}(n,u,d),Object(a.default)(e)))}},"./setToPixelCoordinateSystem.js":
/*!***************************************!*\
        !*** ./setToPixelCoordinateSystem.js ***!
        \***************************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./internal/calculateTransform.js */"./internal/calculateTransform.js");t.default=function(e,t,n){if(void 0===e)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===t)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");var i=Object(r.default)(e,n);t.setTransform(i.m[0],i.m[1],i.m[2],i.m[3],i.m[4],i.m[5])}},"./setViewport.js":
/*!************************!*\
        !*** ./setViewport.js ***!
        \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./internal/getDefaultViewport.js */"./internal/getDefaultViewport.js"),i=n(/*! ./enabledElements.js */"./enabledElements.js"),a=n(/*! ./updateImage.js */"./updateImage.js");t.default=function(e,t){var n=Object(i.getEnabledElement)(e);if(void 0===n.viewport&&(n.viewport=Object(r.default)(n.canvas)),t)for(var o in t)null!==t[o]&&(n.viewport[o]=t[o]);n.viewport.voi.windowWidth&&(n.viewport.voi.windowWidth=Math.max(t.voi.windowWidth,1e-6)),n.viewport.scale&&(n.viewport.scale=Math.max(t.scale,1e-4)),n.viewport.rotation%=360,n.viewport.rotation<0&&(n.viewport.rotation+=360),n.image&&Object(a.default)(e)}},"./triggerEvent.js":
/*!*************************!*\
        !*** ./triggerEvent.js ***!
        \*************************/
/*! exports provided: default */function(e,t,n){function r(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof window.CustomEvent?n=new CustomEvent(t,{detail:r,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r),e.dispatchEvent(n)}n.r(t),n.d(t,"default",function(){return r})},"./updateImage.js":
/*!************************!*\
        !*** ./updateImage.js ***!
        \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./enabledElements.js */"./enabledElements.js"),i=n(/*! ./internal/drawImage.js */"./internal/drawImage.js");t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.getEnabledElement)(e);if(void 0===n.image&&!n.layers.length)throw new Error("updateImage: image has not been loaded yet");Object(i.default)(n,t)}},"./webgl/createProgramFromString.js":
/*!******************************************!*\
        !*** ./webgl/createProgramFromString.js ***!
        \******************************************/
/*! exports provided: default */function(e,t,n){function r(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||e.isContextLost()||e.getShaderInfoLog(r),r}n.r(t),t.default=function(e,t,n){return function(e,t,n){var r=e.createProgram();return e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||e.isContextLost()||e.getProgramInfoLog(r),r}(e,r(e,t,e.VERTEX_SHADER),r(e,n,e.FRAGMENT_SHADER))}},"./webgl/index.js":
/*!************************!*\
        !*** ./webgl/index.js ***!
        \************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ./renderer.js */"./webgl/renderer.js"),i=n(/*! ./createProgramFromString.js */"./webgl/createProgramFromString.js"),a=n(/*! ./textureCache.js */"./webgl/textureCache.js"),o={createProgramFromString:i.default,renderer:{render:r.render,initRenderer:r.initRenderer,getRenderCanvas:r.getRenderCanvas,isWebGLAvailable:r.isWebGLAvailable},textureCache:a.default};Object.defineProperty(o,"isWebGLInitialized",{enumerable:!0,configurable:!1,get:function(){return r.isWebGLInitialized}}),t.default=o},"./webgl/renderer.js":
/*!***************************!*\
        !*** ./webgl/renderer.js ***!
        \***************************/
/*! exports provided: isWebGLInitialized, getRenderCanvas, initRenderer, render, isWebGLAvailable */function(e,t,n){n.r(t),n.d(t,"isWebGLInitialized",function(){return c}),n.d(t,"getRenderCanvas",function(){return f}),n.d(t,"initRenderer",function(){return h}),n.d(t,"render",function(){return b}),n.d(t,"isWebGLAvailable",function(){return _});var r,i,a,o=n(/*! ./shaders/index.js */"./webgl/shaders/index.js"),s=n(/*! ./vertexShader.js */"./webgl/vertexShader.js"),l=n(/*! ./textureCache.js */"./webgl/textureCache.js"),u=n(/*! ./createProgramFromString.js */"./webgl/createProgramFromString.js"),d=document.createElement("canvas"),c=!1;function f(){return d}function h(){!0!==c&&function(e){r=null;try{var t={preserveDrawingBuffer:!0};r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),e.removeEventListener("webglcontextlost",p,!1),e.addEventListener("webglcontextlost",p,!1),e.removeEventListener("webglcontextrestored",g,!1),e.addEventListener("webglcontextrestored",g,!1)}catch(e){throw new Error("Error creating WebGL context")}return r||(r=null),r}(d)&&(a=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),r.STATIC_DRAW),i=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),r.STATIC_DRAW),function(){for(var e in o.shaders){var t=o.shaders[e];t.attributes={},t.uniforms={},t.vert=s.vertexShader,t.program=Object(u.default)(r,t.vert,t.frag),t.attributes.texCoordLocation=r.getAttribLocation(t.program,"a_texCoord"),r.enableVertexAttribArray(t.attributes.texCoordLocation),t.attributes.positionLocation=r.getAttribLocation(t.program,"a_position"),r.enableVertexAttribArray(t.attributes.positionLocation),t.uniforms.resolutionLocation=r.getUniformLocation(t.program,"u_resolution")}}(),c=!0)}function p(e){e.preventDefault()}function g(e){e.preventDefault(),c=!1,l.default.purgeCache(),h()}function v(e){if(e.color)return"rgb";var t=e.getPixelData();return t instanceof Int16Array?"int16":t instanceof Uint16Array?"uint16":t instanceof Int8Array?"int8":"uint8"}function m(e){var t=l.default.getImageTexture(e.imageId);return t||(t=function(e){var t={uint8:r.LUMINANCE,int8:r.LUMINANCE_ALPHA,uint16:r.LUMINANCE_ALPHA,int16:r.RGB,rgb:r.RGB},n=v(e),i=t[n],a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_ALIGNMENT,1);var s=o.dataUtilities[n].storedPixelDataToImageData(e,e.width,e.height);return r.texImage2D(r.TEXTURE_2D,0,i,e.width,e.height,0,i,r.UNSIGNED_BYTE,s),{texture:a,sizeInBytes:e.width*e.height*{int8:1,uint16:2,int16:3,rgb:3}[n]}}(e),l.default.putImageTexture(e,t)),t.texture}function y(e,t,n,o,s){for(var l in r.clearColor(1,0,0,1),r.viewport(0,0,o,s),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.useProgram(e.program),r.bindBuffer(r.ARRAY_BUFFER,i),r.vertexAttribPointer(e.attributes.texCoordLocation,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,a),r.vertexAttribPointer(e.attributes.positionLocation,2,r.FLOAT,!1,0,0),t){var u=r.getUniformLocation(e.program,l);if(u){var d=t[l],c=d.type,f=d.value;"i"===c?r.uniform1i(u,f):"f"===c?r.uniform1f(u,f):"2f"===c&&r.uniform2f(u,f[0],f[1])}}!function(e,t,n){e.bufferData(e.ARRAY_BUFFER,new Float32Array([t,n,0,n,t,0,0,0]),e.STATIC_DRAW)}(r,o,s),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n),r.drawArrays(r.TRIANGLE_STRIP,0,4)}function b(e){var t=e.image;d.width=t.width,d.height=t.height;var n=e.viewport,r=function(e){var t=v(e);return o.shaders.hasOwnProperty(t)?o.shaders[t]:o.shaders.rgb}(t),i=m(t);return y(r,{u_resolution:{type:"2f",value:[t.width,t.height]},wc:{type:"f",value:n.voi.windowCenter},ww:{type:"f",value:n.voi.windowWidth},slope:{type:"f",value:t.slope},intercept:{type:"f",value:t.intercept},minPixelValue:{type:"f",value:t.minPixelValue},invert:{type:"i",value:n.invert?1:0}},i,t.width,t.height),d}function _(){var e={failIfMajorPerformanceCaveat:!0};try{var t=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch(e){return!1}}},"./webgl/shaders/index.js":
/*!********************************!*\
        !*** ./webgl/shaders/index.js ***!
        \********************************/
/*! exports provided: shaders, dataUtilities */function(e,t,n){n.r(t),n.d(t,"shaders",function(){return l}),n.d(t,"dataUtilities",function(){return u});var r=n(/*! ./int16.js */"./webgl/shaders/int16.js"),i=n(/*! ./int8.js */"./webgl/shaders/int8.js"),a=n(/*! ./rgb.js */"./webgl/shaders/rgb.js"),o=n(/*! ./uint16.js */"./webgl/shaders/uint16.js"),s=n(/*! ./uint8.js */"./webgl/shaders/uint8.js"),l={int16:r.int16Shader,int8:i.int8Shader,rgb:a.rgbShader,uint16:o.uint16Shader,uint8:s.uint8Shader},u={int16:r.int16DataUtilities,int8:i.int8DataUtilities,rgb:a.rgbDataUtilities,uint16:o.uint16DataUtilities,uint8:s.uint8DataUtilities}},"./webgl/shaders/int16.js":
/*!********************************!*\
        !*** ./webgl/shaders/int16.js ***!
        \********************************/
/*! exports provided: int16DataUtilities, int16Shader */function(e,t,n){n.r(t),n.d(t,"int16DataUtilities",function(){return i}),n.d(t,"int16Shader",function(){return r});var r={},i={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),n=new Uint8Array(e.width*e.height*3),r=0,i=0;i<t.length;i++){var a=Math.abs(t[i]);n[r++]=255&a,n[r++]=a>>8,n[r++]=t[i]<0?0:1}return n}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/int8.js":
/*!*******************************!*\
        !*** ./webgl/shaders/int8.js ***!
        \*******************************/
/*! exports provided: int8DataUtilities, int8Shader */function(e,t,n){n.r(t),n.d(t,"int8DataUtilities",function(){return i}),n.d(t,"int8Shader",function(){return r});var r={},i={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),n=new Uint8Array(e.width*e.height*2),r=0,i=0;i<t.length;i++)n[r++]=t[i],n[r++]=t[i]<0?0:1;return n}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/rgb.js":
/*!******************************!*\
        !*** ./webgl/shaders/rgb.js ***!
        \******************************/
/*! exports provided: rgbDataUtilities, rgbShader */function(e,t,n){n.r(t),n.d(t,"rgbDataUtilities",function(){return i}),n.d(t,"rgbShader",function(){return r});var r={},i={storedPixelDataToImageData:function(e){var t=e.minPixelValue,n=0,r=0,i=e.width*e.height*4,a=e.width*e.height*3,o=e.getPixelData(),s=new Uint8Array(a);if(t<0)for(;r<i;)s[n++]=o[r++]+-t,s[n++]=o[r++]+-t,s[n++]=o[r++]+-t,r+=1;else for(;r<i;)s[n++]=o[r++],s[n++]=o[r++],s[n++]=o[r++],r+=1;return s}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}"},"./webgl/shaders/uint16.js":
/*!*********************************!*\
        !*** ./webgl/shaders/uint16.js ***!
        \*********************************/
/*! exports provided: uint16DataUtilities, uint16Shader */function(e,t,n){n.r(t),n.d(t,"uint16DataUtilities",function(){return i}),n.d(t,"uint16Shader",function(){return r});var r={},i={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),n=new Uint8Array(e.width*e.height*2),r=0,i=0;i<t.length;i++){var a=t[i];n[r++]=255&a,n[r++]=a>>8}return n}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/uint8.js":
/*!********************************!*\
        !*** ./webgl/shaders/uint8.js ***!
        \********************************/
/*! exports provided: uint8DataUtilities, uint8Shader */function(e,t,n){n.r(t),n.d(t,"uint8DataUtilities",function(){return i}),n.d(t,"uint8Shader",function(){return r});var r={},i={storedPixelDataToImageData:function(e){return e.getPixelData()}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/textureCache.js":
/*!*******************************!*\
        !*** ./webgl/textureCache.js ***!
        \*******************************/
/*! exports provided: default */function(e,t,n){n.r(t);var r=n(/*! ../events.js */"./events.js"),i=n(/*! ../triggerEvent.js */"./triggerEvent.js"),a={},o=[],s=268435456,l=0;function u(){if(!(l<=s)){for(o.sort(function(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0});l>s;){var e=o[o.length-1];l-=e.sizeInBytes,delete a[e.imageId],o.pop(),Object(i.default)(r.events,r.default.WEBGL_TEXTURE_REMOVED,{imageId:e.imageId})}var t={maximumSizeInBytes:s,cacheSizeInBytes:l,numberOfImagesCached:o.length};Object(i.default)(r.events,r.default.WEBGL_TEXTURE_CACHE_FULL,t)}}t.default={purgeCache:function(){for(;o.length>0;){var e=o.pop();delete a[e.imageId]}l=0},getImageTexture:function(e){if(void 0===e)throw new Error("getImageTexture: imageId must not be undefined");var t=a[e];if(void 0!==t)return t.timeStamp=new Date,t.imageTexture},putImageTexture:function(e,t){var n=e.imageId;if(void 0===e)throw new Error("putImageTexture: image must not be undefined");if(void 0===n)throw new Error("putImageTexture: imageId must not be undefined");if(void 0===t)throw new Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(a,n))throw new Error("putImageTexture: imageId already in cache");var r={imageId:n,imageTexture:t,timeStamp:new Date,sizeInBytes:t.sizeInBytes};if(a[n]=r,o.push(r),void 0===t.sizeInBytes)throw new Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===t.sizeInBytes.toFixed)throw new Error("putImageTexture: imageTexture.sizeInBytes is not a number");l+=r.sizeInBytes,u()},removeImageTexture:function(e){if(void 0===e)throw new Error("removeImageTexture: imageId must not be undefined");var t=a[e];if(void 0===t)throw new Error("removeImageTexture: imageId must not be undefined");return o.splice(o.indexOf(t),1),l-=t.sizeInBytes,delete a[e],t.imageTexture},setMaximumSizeBytes:function(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");s=e,u()}}},"./webgl/vertexShader.js":
/*!*******************************!*\
        !*** ./webgl/vertexShader.js ***!
        \*******************************/
/*! exports provided: vertexShader */function(e,t,n){n.r(t),n.d(t,"vertexShader",function(){return r});var r="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}"}})},"object"===o(t)&&"object"===o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(1)(e))},function(e,t,n){"use strict";(function(e){var n,r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=function(e,t,n){return e<t?t:e>n?n:e},t.degToRad=function(e){return e*(Math.PI/180)},t.radToDeg=function(e){return e*(180/Math.PI)},t.sign=function(e){return"number"==typeof e?e?e<0?-1:1:e==e?0:NaN:NaN}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),i=n(0),a=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0};a.prototype={constructor:a,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?this.multiplyVectors(e,t):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyAxisAngle:function(){var e=void 0;return function(t,n){return void 0===e&&(e=new r.default),this.applyQuaternion(e.setFromAxisAngle(t,n)),this}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,u=s*n+o*t-i*r,d=s*r+i*n-a*t,c=-i*t-a*n-o*r;return this.x=l*s+c*-i+u*-o-d*-a,this.y=u*s+c*-a+d*-i-l*-o,this.z=d*s+c*-o+l*-a-u*-i,this},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e=void 0,t=void 0;return function(n,r){return void 0===e&&(e=new a,t=new a),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(){var e=void 0,t=void 0;return function(n){return void 0===e&&(e=new a),e.copy(n).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e=void 0;return function(t){return void 0===e&&(e=new a),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=void 0;return function(t){return void 0===e&&(e=new a),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos((0,i.clamp)(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){var n=4*e,r=t.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new a(this.x,this.y,this.z)}},t.default=a},function(e,t,n){function r(e){return e*e}function i(e,t){return r(e.x-t.x)+r(e.y-t.y)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o={distanceToPoint:function(e,t){return Math.sqrt(function(e,t){var n=i(e.start,e.end);if(0===n)return i(t,e.start);var r=((t.x-e.start.x)*(e.end.x-e.start.x)+(t.y-e.start.y)*(e.end.y-e.start.y))/n;return i(t,r<0?e.start:r>1?e.end:{x:e.start.x+r*(e.end.x-e.start.x),y:e.start.y+r*(e.end.y-e.start.y)})}(e,t))},intersectLine:function(e,t){var n,r,i,o,s,l={},u=e.start.x,d=e.start.y,c=e.end.x,f=e.end.y,h=t.start.x,p=t.start.y,g=t.end.x,v=t.end.y,m=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,T=void 0;if(s=(n=f-d)*g+(r=u-c)*v+(i=c*d-u*f),(0===(o=n*h+r*p+i)||0===s||(0,a.sign)(o)!==(0,a.sign)(s))&&(w=(m=v-p)*c+(y=h-g)*f+(b=g*p-h*v),0===(_=m*u+y*d+b)||0===w||(0,a.sign)(_)!==(0,a.sign)(w))){E=n*y-m*r,T=r*b-y*i;var x=parseFloat(T/E);T=m*i-n*b;var S=parseFloat(T/E);return l.x=x,l.y=S,l}}};t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1};r.prototype.setFromAxisAngle=function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},r.prototype.multiplyQuaternions=function(e,t){var n=e.x,r=e.y,i=e.z,a=e.w,o=t.x,s=t.y,l=t.z,u=t.w;return this.x=n*u+a*o+r*l-i*s,this.y=r*u+a*s+i*o-n*l,this.z=i*u+a*l+n*s-r*o,this.w=a*u-n*o-r*s-i*l,this},r.prototype.setFromRotationMatrix=function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],d=t[10],c=n+o+d,f=void 0;return c>0?(f=.5/Math.sqrt(c+1),this.w=.25/f,this.x=(u-s)*f,this.y=(i-l)*f,this.z=(a-r)*f):n>o&&n>d?(f=2*Math.sqrt(1+n-o-d),this.w=(u-s)/f,this.x=.25*f,this.y=(r+a)/f,this.z=(i+l)/f):o>d?(f=2*Math.sqrt(1+o-n-d),this.w=(i-l)/f,this.x=(r+a)/f,this.y=.25*f,this.z=(s+u)/f):(f=2*Math.sqrt(1+d-n-o),this.w=(a-r)/f,this.x=(i+l)/f,this.y=(s+u)/f,this.z=.25*f),this},t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),a=n(0),o=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.start=void 0!==t?t:new i.default,this.end=void 0!==n?n:new i.default}return r(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"center",value:function(e){return(e||new i.default).addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return(e||new i.default).subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){var n=t||new i.default;return this.delta(n).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(){var e=new i.default,t=new i.default;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e)/i;return r&&(o=(0,a.clamp)(o,0,1)),o}}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t),a=n||new i.default;return this.delta(a).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"intersectLine",value:function(e){var t=this.end.clone().sub(this.start),n=e.end.clone().sub(e.start),r=e.start.clone().sub(this.start),i=t.clone().cross(n),a=r.clone().cross(n);if(0!==r.dot(t)){var o=a.dot(i)/i.lengthSq();if(!(o>1||isNaN(o))){var s=this.start.clone().add(t.clone().multiplyScalar(o));return s.clone().sub(e.start).lengthSq()+s.clone().sub(e.end).lengthSq()<=e.distanceSq()?s:void 0}}}}]),e}();t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=function(e,t,n,r,i,a,o,s,l,u,d,c,f,h,p,g){this.elements=new Float32Array(16);var v=this.elements;v[0]=void 0!==e?e:1,v[4]=t||0,v[8]=n||0,v[12]=r||0,v[1]=i||0,v[5]=void 0!==a?a:1,v[9]=o||0,v[13]=s||0,v[2]=l||0,v[6]=u||0,v[10]=void 0!==d?d:1,v[14]=c||0,v[3]=f||0,v[7]=h||0,v[11]=p||0,v[15]=void 0!==g?g:1};i.prototype.makeRotationFromQuaternion=function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=e.w,o=n+n,s=r+r,l=i+i,u=n*o,d=n*s,c=n*l,f=r*s,h=r*l,p=i*l,g=a*o,v=a*s,m=a*l;return t[0]=1-(f+p),t[4]=d-m,t[8]=c+v,t[1]=d+m,t[5]=1-(u+p),t[9]=h-g,t[2]=c-v,t[6]=h+g,t[10]=1-(u+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},i.prototype.multiplyMatrices=function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],d=n[5],c=n[9],f=n[13],h=n[2],p=n[6],g=n[10],v=n[14],m=n[3],y=n[7],b=n[11],_=n[15],w=r[0],E=r[4],T=r[8],x=r[12],S=r[1],C=r[5],O=r[9],P=r[13],I=r[2],M=r[6],A=r[10],L=r[14],D=r[3],k=r[7],j=r[11],R=r[15];return i[0]=a*w+o*S+s*I+l*D,i[4]=a*E+o*C+s*M+l*k,i[8]=a*T+o*O+s*A+l*j,i[12]=a*x+o*P+s*L+l*R,i[1]=u*w+d*S+c*I+f*D,i[5]=u*E+d*C+c*M+f*k,i[9]=u*T+d*O+c*A+f*j,i[13]=u*x+d*P+c*L+f*R,i[2]=h*w+p*S+g*I+v*D,i[6]=h*E+p*C+g*M+v*k,i[10]=h*T+p*O+g*A+v*j,i[14]=h*x+p*P+g*L+v*R,i[3]=m*w+y*S+b*I+_*D,i[7]=m*E+y*C+b*M+_*k,i[11]=m*T+y*O+b*A+_*j,i[15]=m*x+y*P+b*L+_*R,this},i.prototype.multiply=function(e,t){return void 0!==t?this.multiplyMatrices(e,t):this.multiplyMatrices(this,e)},i.prototype.getInverse=function(e,t){var n=this.elements,r=e.elements,i=r[0],a=r[4],o=r[8],s=r[12],l=r[1],u=r[5],d=r[9],c=r[13],f=r[2],h=r[6],p=r[10],g=r[14],v=r[3],m=r[7],y=r[11],b=r[15];n[0]=d*g*m-c*p*m+c*h*y-u*g*y-d*h*b+u*p*b,n[4]=s*p*m-o*g*m-s*h*y+a*g*y+o*h*b-a*p*b,n[8]=o*c*m-s*d*m+s*u*y-a*c*y-o*u*b+a*d*b,n[12]=s*d*h-o*c*h-s*u*p+a*c*p+o*u*g-a*d*g,n[1]=c*p*v-d*g*v-c*f*y+l*g*y+d*f*b-l*p*b,n[5]=o*g*v-s*p*v+s*f*y-i*g*y-o*f*b+i*p*b,n[9]=s*d*v-o*c*v-s*l*y+i*c*y+o*l*b-i*d*b,n[13]=o*c*f-s*d*f+s*l*p-i*c*p-o*l*g+i*d*g,n[2]=u*g*v-c*h*v+c*f*m-l*g*m-u*f*b+l*h*b,n[6]=s*h*v-a*g*v-s*f*m+i*g*m+a*f*b-i*h*b,n[10]=a*c*v-s*u*v+s*l*m-i*c*m-a*l*b+i*u*b,n[14]=s*u*f-a*c*f-s*l*h+i*c*h+a*l*g-i*u*g,n[3]=d*h*v-u*p*v-d*f*m+l*p*m+u*f*y-l*h*y,n[7]=a*p*v-o*h*v+o*f*m-i*p*m-a*f*y+i*h*y,n[11]=o*u*v-a*d*v-o*l*m+i*d*m+a*l*y-i*u*y,n[15]=a*d*f-o*u*f+o*l*h-i*d*h-a*l*p+i*u*p;var _=i*n[0]+l*n[4]+f*n[8]+v*n[12];if(0===_){if(t)throw new Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity(),this}return this.multiplyScalar(1/_),this},i.prototype.applyToVector3Array=function(){var e=new r.default;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,a=n;i<r;i+=3,a+=3)e.x=t[a],e.y=t[a+1],e.z=t[a+2],e.applyMatrix4(this),t[a]=e.x,t[a+1]=e.y,t[a+2]=e.z;return t}},i.prototype.makeTranslation=function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},i.prototype.multiplyScalar=function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},i.prototype.set=function(e,t,n,r,i,a,o,s,l,u,d,c,f,h,p,g){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=d,v[14]=c,v[3]=f,v[7]=h,v[11]=p,v[15]=g,this},i.prototype.makeScale=function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=function(e,t){this.normal=void 0!==e?e:new r.default(1,0,0),this.constant=void 0!==t?t:0};i.prototype={constructor:i,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new r.default,t=new r.default;return function(n,r,i){var a=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new r.default).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectLine:function(){var e=new r.default;return function(t,n){var i=n||new r.default,a=t.delta(e),o=this.normal.dot(a);if(0!==o){var s=-(t.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return i.copy(a).multiplyScalar(s).add(t.start)}else if(0===this.distanceToPoint(t.start))return i.copy(t.start)}}(),intersectPlane:function(e){var t=this.normal.clone().cross(e.normal),n={origin:new r.default,direction:t};if(this.normal.clone().cross(e.normal).length<1e-10)return n.direction=new r.default,n;var i=this.constant,a=e.constant,o=this.normal.clone().dot(e.normal),s=-(i-a*o)/(1-o*o),l=-(a-i*o)/(1-o*o);return n.origin=this.normal.clone().multiplyScalar(s).add(e.normal.clone().multiplyScalar(l)),n},coplanarPoint:function(e){return(e||new r.default).copy(this.normal).multiplyScalar(-this.constant)},translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant},clone:function(){return(new i).copy(this)}},t.default=i},function(e,t,n){function r(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i(e,t){return Math.sqrt(a(e,t))}function a(e,t){var n=r(e,t);return n.x*n.x+n.y*n.y}Object.defineProperty(t,"__esModule",{value:!0});var o={subtract:r,copy:function(e){return{x:e.x,y:e.y}},pageToPoint:function(e){return{x:e.pageX,y:e.pageY}},distance:i,distanceSquared:a,insideRect:function(e,t){return!(e.x<t.left||e.x>t.left+t.width||e.y<t.top||e.y>t.top+t.height)},findClosestPoint:function(e,t){var n=[],r=void 0;return e.forEach(function(e,a){var o=i(e,t);n.push(o),r=0===a?o:Math.min(o,r)}),e[n.indexOf(r)]}};t.default=o},function(e,t,n){function r(e){return{topLeft:{x:e.left,y:e.top},bottomRight:{x:e.left+e.width,y:e.top+e.height}}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),a={distanceToPoint:function(e,t){var n=655535;return function(e){return[{start:{x:e.left,y:e.top},end:{x:e.left+e.width,y:e.top}},{start:{x:e.left+e.width,y:e.top},end:{x:e.left+e.width,y:e.top+e.height}},{start:{x:e.left+e.width,y:e.top+e.height},end:{x:e.left,y:e.top+e.height}},{start:{x:e.left,y:e.top+e.height},end:{x:e.left,y:e.top}}]}(e).forEach(function(e){var r=i.default.distanceToPoint(e,t);r<n&&(n=r)}),n},getIntersectionRect:function(e,t){var n={topLeft:{},bottomRight:{}};if(function(e,t){var n,i,a=r(e),o=r(t);return n=e.width>=0?t.width>=0?!(a.bottomRight.x<=o.topLeft.x||o.bottomRight.x<=a.topLeft.x):!(a.bottomRight.x<=o.bottomRight.x||o.topLeft.x<=a.topLeft.x):t.width>=0?!(a.topLeft.x<=o.topLeft.x||o.bottomRight.x<=a.bottomRight.x):!(a.topLeft.x<=o.bottomRight.x||o.topLeft.x<=a.bottomRight.x),i=e.height>=0?t.height>=0?!(a.bottomRight.y<=o.topLeft.y||o.bottomRight.y<=a.topLeft.y):!(a.bottomRight.y<=o.bottomRight.y||o.topLeft.y<=a.topLeft.y):t.height>=0?!(a.topLeft.y<=o.topLeft.y||o.bottomRight.y<=a.bottomRight.y):!(a.topLeft.y<=o.bottomRight.y||o.top<=a.bottomRight.y),n&&i}(e,t)){var i=r(e),a=r(t);return e.width>=0?t.width>=0?(n.topLeft.x=Math.max(i.topLeft.x,a.topLeft.x),n.bottomRight.x=Math.min(i.bottomRight.x,a.bottomRight.x)):(n.topLeft.x=Math.max(i.topLeft.x,a.bottomRight.x),n.bottomRight.x=Math.min(i.bottomRight.x,a.topLeft.x)):t.width>=0?(n.topLeft.x=Math.min(i.topLeft.x,a.bottomRight.x),n.bottomRight.x=Math.max(i.bottomRight.x,a.topLeft.x)):(n.topLeft.x=Math.min(i.topLeft.x,a.topLeft.x),n.bottomRight.x=Math.max(i.bottomRight.x,a.bottomRight.x)),e.height>=0?t.height>=0?(n.topLeft.y=Math.max(i.topLeft.y,a.topLeft.y),n.bottomRight.y=Math.min(i.bottomRight.y,a.bottomRight.y)):(n.topLeft.y=Math.max(i.topLeft.y,a.bottomRight.y),n.bottomRight.y=Math.min(i.bottomRight.y,a.topLeft.y)):t.height>=0?(n.topLeft.y=Math.min(i.topLeft.y,a.bottomRight.y),n.bottomRight.y=Math.max(i.bottomRight.y,a.topLeft.y)):(n.topLeft.y=Math.min(i.topLeft.y,a.topLeft.y),n.bottomRight.y=Math.max(i.bottomRight.y,a.bottomRight.y)),n}}};t.default=a},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);Object.defineProperty(t,"Line3",{enumerable:!0,get:function(){return r(i).default}});var a=n(2);Object.defineProperty(t,"lineSegment",{enumerable:!0,get:function(){return r(a).default}});var o=n(0);Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return o.clamp}}),Object.defineProperty(t,"degToRad",{enumerable:!0,get:function(){return o.degToRad}}),Object.defineProperty(t,"radToDeg",{enumerable:!0,get:function(){return o.radToDeg}}),Object.defineProperty(t,"sign",{enumerable:!0,get:function(){return o.sign}});var s=n(5);Object.defineProperty(t,"Matrix4",{enumerable:!0,get:function(){return r(s).default}});var l=n(6);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return r(l).default}});var u=n(7);Object.defineProperty(t,"point",{enumerable:!0,get:function(){return r(u).default}});var d=n(3);Object.defineProperty(t,"quaternion",{enumerable:!0,get:function(){return r(d).default}});var c=n(8);Object.defineProperty(t,"rect",{enumerable:!0,get:function(){return r(c).default}});var f=n(1);Object.defineProperty(t,"Vector3",{enumerable:!0,get:function(){return r(f).default}})}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(1)(e))},function(e,t,n){"use strict";(function(e){var n,r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=47)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=window.cornerstone,i=window.cornerstoneMath,a=window.Hammer;t.default={set cornerstone(e){r=e},get cornerstone(){return r},set cornerstoneMath(e){i=e},get cornerstoneMath(){return i},set Hammer(e){a=e},get Hammer(){return a}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={MOUSE_DOWN:"cornerstonetoolsmousedown",MOUSE_UP:"cornerstonetoolsmouseup",MOUSE_DOWN_ACTIVATE:"cornerstonetoolsmousedownactivate",MOUSE_DRAG:"cornerstonetoolsmousedrag",MOUSE_MOVE:"cornerstonetoolsmousemove",MOUSE_CLICK:"cornerstonetoolsmouseclick",MOUSE_DOUBLE_CLICK:"cornerstonetoolsmousedoubleclick",MOUSE_WHEEL:"cornerstonetoolsmousewheel",TOUCH_START:"cornerstonetoolstouchstart",TOUCH_START_ACTIVE:"cornerstonetoolstouchstartactive",TOUCH_END:"cornerstonetoolstouchend",TOUCH_DRAG:"cornerstonetoolstouchdrag",TOUCH_DRAG_END:"cornerstonetoolstouchdragend",TOUCH_PINCH:"cornerstonetoolstouchpinch",TOUCH_ROTATE:"cornerstonetoolstouchrotate",TOUCH_PRESS:"cornerstonetoolstouchpress",TAP:"cornerstonetoolstap",DOUBLE_TAP:"cornerstonetoolsdoubletap",MULTI_TOUCH_START:"cornerstonetoolsmultitouchstart",MULTI_TOUCH_START_ACTIVE:"cornerstonetoolsmultitouchstartactive",MULTI_TOUCH_DRAG:"cornerstonetoolsmultitouchdrag",KEY_DOWN:"cornerstonetoolskeydown",KEY_UP:"cornerstonetoolskeyup",KEY_PRESS:"cornerstonetoolskeypress",MEASUREMENT_ADDED:"cornerstonetoolsmeasurementadded",MEASUREMENT_MODIFIED:"cornerstonetoolsmeasurementmodified",MEASUREMENT_REMOVED:"cornerstonemeasurementremoved",TOOL_DEACTIVATED:"cornerstonetoolstooldeactivated",CLIP_STOPPED:"cornerstonetoolsclipstopped",STACK_SCROLL:"cornerstonestackscroll",LINE_SAMPLE_UPDATED:"cornerstonelinesampleupdated"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getElementToolStateManager=t.setElementToolStateManager=t.clearToolState=t.removeToolState=t.getToolState=t.addToolState=void 0;var r=s(n(1)),i=s(n(0)),a=n(26),o=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=i.default.cornerstone.getEnabledElement(e);return void 0===t.toolStateManager&&(t.toolStateManager=a.globalImageIdSpecificToolStateManager),t.toolStateManager}t.addToolState=function(e,t,n){l(e).add(e,t,n);var i=r.default.MEASUREMENT_ADDED,a={toolType:t,element:e,measurementData:n};(0,o.default)(e,i,a)},t.getToolState=function(e,t){return l(e).get(e,t)},t.removeToolState=function(e,t,n){for(var i=l(e).get(e,t),a=-1,s=0;s<i.data.length;s++)i.data[s]===n&&(a=s);if(-1!==a){i.data.splice(a,1);var u=r.default.MEASUREMENT_REMOVED,d={toolType:t,element:e,measurementData:n};(0,o.default)(e,u,d)}},t.clearToolState=function(e,t){var n=l(e).get(e,t);void 0!==n&&(n.data=[])},t.setElementToolStateManager=function(e,t){i.default.cornerstone.getEnabledElement(e).toolStateManager=t},t.getElementToolStateManager=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getNewContext=function(e){var t=e.getContext("2d");return t.setTransform(1,0,0,1,0,0),t},t.draw=function(e,t){e.save(),t(e),e.restore()},t.path=o,t.setShadow=function(e,t){t.shadow&&(e.shadowColor=t.shadowColor||"#000000",e.shadowOffsetX=t.shadowOffsetX||1,e.shadowOffsetY=t.shadowOffsetY||1)},t.drawLine=function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";o(e,a,function(e){if("pixel"===s){var a=i.default.cornerstone;n=a.pixelToCanvas(t,n),r=a.pixelToCanvas(t,r)}e.moveTo(n.x,n.y),e.lineTo(r.x,r.y)})},t.drawLines=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"pixel";o(e,r,function(e){n.forEach(function(n){var r=n.start,o=n.end;if("pixel"===a){var s=i.default.cornerstone;r=s.pixelToCanvas(t,r),o=s.pixelToCanvas(t,o)}e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)})})},t.drawJoinedLines=function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";o(e,a,function(e){if("pixel"===s){var a=i.default.cornerstone;n=a.pixelToCanvas(t,n),r=r.map(function(e){return a.pixelToCanvas(t,e)})}e.moveTo(n.x,n.y),r.forEach(function(t){var n=t.x,r=t.y;e.lineTo(n,r)})})},t.drawCircle=function(e,t,n,r,a){"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(n=i.default.cornerstone.pixelToCanvas(t,n)),o(e,a,function(e){e.arc(n.x,n.y,r,0,2*Math.PI)})},t.drawEllipse=function(e,t,n,r,a){"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(n=i.default.cornerstone.pixelToCanvas(t,n),r=i.default.cornerstone.pixelToCanvas(t,r));var s=Math.min(n.x,r.x),l=Math.min(n.y,r.y),u=Math.abs(n.x-r.x),d=Math.abs(n.y-r.y),c=u/2*.5522848,f=d/2*.5522848,h=s+u,p=l+d,g=s+u/2,v=l+d/2;o(e,a,function(e){e.moveTo(s,v),e.bezierCurveTo(s,v-f,g-c,l,g,l),e.bezierCurveTo(g+c,l,h,v-f,h,v),e.bezierCurveTo(h,v+f,g+c,p,g,p),e.bezierCurveTo(g-c,p,s,v+f,s,v),e.closePath()})},t.drawRect=function(e,t,n,r,a){if("pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")){var s=i.default.cornerstone;n=s.pixelToCanvas(t,n),r=s.pixelToCanvas(t,r)}var l=Math.min(n.x,r.x),u=Math.min(n.y,r.y),d=Math.abs(n.x-r.x),c=Math.abs(n.y-r.y);o(e,a,function(e){e.rect(l,u,d,c)})},t.fillOutsideRect=function(e,t,n,r,a){if("pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")){var s=i.default.cornerstone;n=s.pixelToCanvas(t,n),r=s.pixelToCanvas(t,r)}var l=Math.min(n.x,r.x),u=Math.min(n.y,r.y),d=Math.abs(n.x-r.x),c=Math.abs(n.y-r.y);o(e,a,function(e){e.rect(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.rect(l+d,u,-d,c)})},t.fillBox=function(e,t,n){e.fillStyle=n,e.fillRect(t.left,t.top,t.width,t.height)},t.fillTextLines=function(e,t,n,r,i){var o=a.textStyle.getFontSize();e.font=a.textStyle.getFont(),e.textBaseline="top",e.fillStyle=r,n.forEach(function(n,r){e.fillText(n,t.left+i,t.top+i+r*(o+i))})};var r,i=(r=n(0))&&r.__esModule?r:{default:r},a=n(47);function o(e,t,n){var r=t.color,i=t.lineWidth,o=t.fillStyle,s=t.lineDash;e.beginPath(),e.strokeStyle=r||e.strokeStyle,e.lineWidth=i||void 0===i&&a.toolStyle.getToolWidth()||e.lineWidth,s&&e.setLineDash(s),n(e),o&&(e.fillStyle=o,e.fill()),e.stroke(),s&&e.setLineDash([])}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={};t.getToolOptions=function(e,t){if(!r[e])return{};var n=r[e].find(function(e){return e.element===t});return n?n.options:{}},t.setToolOptions=function(e,t,n){if(r[e]){var i=r[e].findIndex(function(e){return e.element===t});if(-1===i)r[e].push({element:t,options:n});else{var a=r[e][i].options||{};r[e][i].options=Object.assign(a,n)}}else r[e]=[{element:t,options:n}]},t.clearToolOptions=function(e,t){var n=r[e];n&&(r[e]=n.filter(function(e){return e.element!==t}))},t.clearToolOptionsByToolType=function(e){delete r[e]},t.clearToolOptionsByElement=function(e){for(var t in r)r[t]=r[t].filter(function(t){return t.element!==e})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return 0!=(t&1<<e-1)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=void 0;return"function"==typeof window.CustomEvent?r=new CustomEvent(t,{detail:n,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="white",i="greenyellow",a="transparent",o={setFillColor:function(e){a=e},getFillColor:function(){return a},setToolColor:function(e){r=e},getToolColor:function(){return r},setActiveColor:function(e){i=e},getActiveColor:function(){return i},getColorIfActive:function(e){return e.color?e.color:e.active?i:r}};t.default=o},function(e,t,n){function r(e,t,n){return Math.min(Math.max(t,e),n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.clipToBox=function(e,t){e.x=r(e.x,0,t.width),e.y=r(e.y,0,t.height)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,s){Object.keys(n).forEach(function(l){var u=n[l];if(!0!==u.drawnIndependently&&(!s||!0!==s.drawHandlesIfActive||u.active)){var d=function(e){return e&&e.handleRadius?e.handleRadius:o}(s),c={color:r,lineWidth:u.active?i.default.getActiveWidth():i.default.getToolWidth(),fillStyle:s&&s.fill};(0,a.drawCircle)(e,t.element,u,d,c)}})};var r,i=(r=n(14))&&r.__esModule?r:{default:r},a=n(3),o=6},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},n=e.toolType;function v(t){var a=t.detail,o=a.element,s=(0,g.getToolOptions)(n,o);(0,f.default)(a.which,s.mouseButtonMask)&&(e.addNewMeasurement?e.addNewMeasurement(a):function(t){var a=i.default.cornerstone,o=t.element,s=e.createNewMeasurement(t);if(s){(0,h.addToolState)(t.element,n,s),o.removeEventListener(r.default.MOUSE_MOVE,b),o.removeEventListener(r.default.MOUSE_DOWN,_),o.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,w),E&&o.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,E),a.updateImage(o);var d,f=void 0;f=1===Object.keys(s.handles).length?l.default:u.default,d=!(!e.options||void 0===e.options.preventHandleOutsideImage)&&e.options.preventHandleOutsideImage,f(t,n,s,s.handles.end,function(){s.active=!1,s.invalidated=!0,(0,c.default)(t,s.handles)&&(0,h.removeToolState)(o,n,s),o.addEventListener(r.default.MOUSE_MOVE,b),o.addEventListener(r.default.MOUSE_DOWN,_),o.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,w),E&&o.addEventListener(r.default.MOUSE_DOUBLE_CLICK,E),a.updateImage(o)},d)}}(a),t.preventDefault(),t.stopPropagation())}function m(t){var r=t.detail;a.default.setCoords(r);var o=(0,h.getToolState)(r.element,n);if(o){for(var l=!1,u=0;u<o.data.length;u++){var d=r.currentPoints.canvas,c=o.data[u];!0===(0,s.default)(r.element,c.handles,d)&&(l=!0),(e.pointNearTool(r.element,c,d)&&!c.active||!e.pointNearTool(r.element,c,d)&&c.active)&&(c.active=!c.active,l=!0)}!0===l&&i.default.cornerstone.updateImage(r.element)}}function y(t){var a=t.detail,s=void 0,u=a.element,p=(0,g.getToolOptions)(n,u);if((0,f.default)(a.which,p.mouseButtonMask)){var v=a.startPoints.canvas,m=(0,h.getToolState)(t.currentTarget,n);if(m){var y,_=void 0;for(y=!(!e.options||void 0===e.options.preventHandleOutsideImage)&&e.options.preventHandleOutsideImage,_=0;_<m.data.length;_++){s=m.data[_];var w=(0,o.default)(u,s.handles,v,6);if(w)return u.removeEventListener(r.default.MOUSE_MOVE,b),s.active=!0,(0,l.default)(a,n,s,w,T,y),t.stopImmediatePropagation(),t.stopPropagation(),void t.preventDefault()}if(e.pointNearTool){var E=e.options||{deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:!1};for(_=0;_<m.data.length;_++)if((s=m.data[_]).active=!1,e.pointNearTool(u,s,v))return s.active=!0,u.removeEventListener(r.default.MOUSE_MOVE,b),(0,d.default)(t,s,m,n,E,T),t.stopImmediatePropagation(),t.stopPropagation(),void t.preventDefault()}}}function T(){s.invalidated=!0,(0,c.default)(a,s.handles)&&(0,h.removeToolState)(u,n,s),i.default.cornerstone.updateImage(u),u.addEventListener(r.default.MOUSE_MOVE,b)}}var b=e.mouseMoveCallback||m,_=e.mouseDownCallback||y,w=e.mouseDownActivateCallback||v,E=e.mouseDoubleClickCallback,T={enable:function(t){t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,_),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,w),E&&t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,E),t.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.default.cornerstone.updateImage(t)},disable:function(t){t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,_),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,w),E&&t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,E),i.default.cornerstone.updateImage(t)},activate:function(t,a){(0,g.setToolOptions)(n,t,{mouseButtonMask:a}),t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,_),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,w),t.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,b),t.addEventListener(r.default.MOUSE_DOWN,_),t.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,w),E&&(t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,E),t.addEventListener(r.default.MOUSE_DOUBLE_CLICK,E)),i.default.cornerstone.updateImage(t)},deactivate:function(t,a){(0,g.setToolOptions)(n,t,{mouseButtonMask:a});var o=r.default.TOOL_DEACTIVATED,s={mouseButtonMask:a,toolType:n,type:o};(0,p.default)(t,o,s),t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,_),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,w),t.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,b),t.addEventListener(r.default.MOUSE_DOWN,_),E&&(t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,E),t.addEventListener(r.default.MOUSE_DOUBLE_CLICK,E)),e.deactivate&&e.deactivate(t,a),i.default.cornerstone.updateImage(t)},getConfiguration:function(){return t},setConfiguration:function(e){t=e},mouseDownCallback:y,mouseMoveCallback:m,mouseDownActivateCallback:v};return e.pointNearTool&&(T.pointNearTool=e.pointNearTool),E&&(T.mouseDoubleClickCallback=E),e.addNewMeasurement&&(T.addNewMeasurement=e.addNewMeasurement),T};var r=v(n(1)),i=v(n(0)),a=v(n(39)),o=v(n(25)),s=v(n(32)),l=v(n(31)),u=v(n(30)),d=v(n(38)),c=v(n(15)),f=v(n(5)),h=n(2),p=v(n(6)),g=n(4);function v(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.textBoxWidth=o,t.default=function(e,t,n,r,s,l){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var u=i.default.getFontSize(),d=i.default.getBackgroundColor(),c=0;t.forEach(function(t){var n=o(e,t,5);c=Math.max(c,n)});var f={width:c,height:5+t.length*(u+5)};return(0,a.draw)(e,function(e){e.strokeStyle=s,l&&l.centering&&!0===l.centering.x&&(n-=f.width/2),l&&l.centering&&!0===l.centering.y&&(r-=f.height/2),f.left=n,f.top=r;var i=l&&!0===l.debug?"#FF0000":d;(0,a.fillBox)(e,f,i),(0,a.fillTextLines)(e,f,t,s,5)}),f};var r,i=(r=n(21))&&r.__esModule?r:{default:r},a=n(3);function o(e,t,n){var r=i.default.getFont(),a=e.font;r&&r!==a&&(e.font=r);var o=e.measureText(t).width;return r&&r!==a&&(e.font=a),o+2*n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(1)),i=f(n(0)),a=f(n(15)),o=f(n(25)),s=f(n(59)),l=f(n(28)),u=f(n(60)),d=n(2),c=f(n(6));function f(e){return e&&e.__esModule?e:{default:e}}function h(e){Object.keys(e).forEach(function(t){e[t].active=!1})}function p(e){if(e)for(var t=0;t<e.data.length;t++){var n=e.data[t];n.active=!1,n.handles&&h(n.handles)}}t.default=function(e){function t(o){var s=o.detail;e.addNewMeasurement?e.addNewMeasurement(s):function(o){var s=i.default.cornerstone,u=o.element,c=e.createNewMeasurement(o);if(c){if((0,d.addToolState)(u,e.toolType,c),1===Object.keys(c.handles).length&&o.type===r.default.TAP)return c.active=!1,c.handles.end.active=!1,c.handles.end.highlight=!1,c.invalidated=!0,(0,a.default)(o,c.handles)&&(0,d.removeToolState)(u,e.toolType,c),void s.updateImage(u);u.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),u.removeEventListener(r.default.TAP,e.tapCallback||n),u.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),s.updateImage(u),(0,l.default)(o,e.toolType,c,c.handles.end,function(){c.active=!1,c.invalidated=!0,(0,a.default)(o,c.handles)&&(0,d.removeToolState)(u,e.toolType,c),u.addEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),u.addEventListener(r.default.TAP,e.tapCallback||n),u.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),s.updateImage(u)})}}(s),o.stopImmediatePropagation(),o.preventDefault()}function n(l){var c=l.detail,h=i.default.cornerstone,g=c.element,v=c.currentPoints.canvas,m=(0,d.getToolState)(l.currentTarget,e.toolType),y=void 0,b=void 0;function _(){p(m),(0,a.default)(c,y.handles)&&(0,d.removeToolState)(g,e.toolType,y),h.updateImage(g),g.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),g.addEventListener(r.default.TAP,e.tapCallback||n)}if(p(m),m)for(b=0;b<m.data.length;b++){y=m.data[b];var w=(0,o.default)(g,y.handles,v,25);if(w)return g.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),g.removeEventListener(r.default.TAP,e.tapCallback||n),y.active=!0,w.active=!0,h.updateImage(g),(0,s.default)(l,e.toolType,y,w,_),l.stopImmediatePropagation(),void l.preventDefault()}if(m&&e.pointNearTool)for(b=0;b<m.data.length;b++)if(y=m.data[b],e.pointNearTool(g,y,v))return g.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),g.removeEventListener(r.default.TAP,e.tapCallback||n),y.active=!0,h.updateImage(g),(0,u.default)(l,y,m,e.toolType,!0,_),l.stopImmediatePropagation(),void l.preventDefault();return e.touchDownActivateCallback?e.touchDownActivateCallback(l):t(l),!1}function f(t){var l=t.detail,h=i.default.cornerstone,p=l.element,g=l.startPoints.canvas,v=void 0,m=(0,d.getToolState)(t.currentTarget,e.toolType),y=void 0;function b(t,i){v.active=!1,v.invalidated=!0,(0,a.default)(l,v.handles)&&(0,d.removeToolState)(l.element,e.toolType,v),h.updateImage(l.element),p.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),p.addEventListener(r.default.TAP,e.tapCallback||n),e.pressCallback&&p.addEventListener(r.default.TOUCH_PRESS,e.pressCallback),t&&t.type===r.default.TOUCH_PRESS&&(0,c.default)(p,t.type,i)}if(m){for(y=0;y<m.data.length;y++){v=m.data[y];var _=(0,o.default)(l.element,v.handles,g,28);if(_)return p.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),p.removeEventListener(r.default.TAP,e.tapCallback||n),e.pressCallback&&p.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),v.active=!0,(0,s.default)(t,e.toolType,v,_,b),t.stopImmediatePropagation(),t.preventDefault(),void t.stopPropagation()}if(e.pointNearTool)for(y=0;y<m.data.length;y++)if(v=m.data[y],e.pointNearTool(l.element,v,g))return p.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),p.removeEventListener(r.default.TAP,e.tapCallback||n),e.pressCallback&&p.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),(0,u.default)(t,v,m,e.toolType,!0,b),t.stopImmediatePropagation(),t.preventDefault(),void t.stopPropagation()}}var h={enable:function(a){a.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),a.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),a.removeEventListener(r.default.TAP,e.tapCallback||n),a.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),e.doubleTapCallback&&a.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&a.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),i.default.cornerstone.updateImage(a)},disable:function(a){a.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),a.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),a.removeEventListener(r.default.TAP,e.tapCallback||n),e.doubleTapCallback&&a.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&a.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),i.default.cornerstone.updateImage(a)},activate:function(a){a.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),a.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),a.removeEventListener(r.default.TAP,e.tapCallback||n),a.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),a.addEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),a.addEventListener(r.default.TAP,e.tapCallback||n),e.doubleTapCallback&&(a.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),a.addEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback)),e.pressCallback&&(a.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),a.addEventListener(r.default.TOUCH_PRESS,e.pressCallback)),i.default.cornerstone.updateImage(a)},deactivate:function(a){var o=r.default.TOOL_DEACTIVATED,s={toolType:e.toolType,type:o};(0,c.default)(a,o,s),a.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),a.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),a.removeEventListener(r.default.TAP,e.tapCallback||n),a.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),e.doubleTapCallback&&a.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&a.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),i.default.cornerstone.updateImage(a)},touchStartCallback:e.touchStartCallback||f,touchDownActivateCallback:e.touchDownActivateCallback||t,tapCallback:e.tapCallback||n};return e.pointNearTool&&(h.pointNearTool=e.pointNearTool),e.doubleTapCallback&&(h.doubleTapCallback=e.doubleTapCallback),e.pressCallback&&(h.pressCallback=e.pressCallback),e.addNewMeasurement&&(h.addNewMeasurement=e.addNewMeasurement),h}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,i=void 0,a=void 0,o={setStartLoadHandler:function(e){r=e},getStartLoadHandler:function(){return r},setEndLoadHandler:function(e){i=e},getEndLoadHandler:function(){return i},setErrorLoadingHandler:function(e){a=e},getErrorLoadingHandler:function(){return a}};t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=1,i=2,a={setToolWidth:function(e){r=e},getToolWidth:function(){return r},setActiveWidth:function(e){i=e},getActiveWidth:function(){return i}};t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.image,r={left:0,top:0,width:n.width,height:n.height},a=!1;return Object.keys(t).forEach(function(e){var n=t[e];!0!==n.allowedOutsideImage&&!1===i.default.cornerstoneMath.point.insideRect(n,r)&&(a=!0)}),a};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t)throw new Error("simpleMouseButtonTool: toolType is required");var n={};return{activate:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o.mouseButtonMask=r,(0,a.setToolOptions)(t,n,o),n.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,e),n.addEventListener(i.default.MOUSE_DOWN_ACTIVATE,e)},disable:function(t){t.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,e)},enable:function(t){t.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,e)},deactivate:function(t){t.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,e)},getConfiguration:function(){return n},setConfiguration:function(e){n=e}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r},a=n(4)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,s,l,u,d,c,f){var h=r.default.cornerstone,p=h.pixelToCanvas(t,n);c&&(p.x+=c);var g={centering:{x:!1,y:f}};if(n.boundingBox=(0,i.default)(e,o,p.x,p.y,u,g),n.hasMoved){var v=l(s).map(function(e){return h.pixelToCanvas(t,e)});(0,a.default)(v,p,n.boundingBox,e,u,d)}};var r=o(n(0)),i=o(n(11)),a=o(n(106));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=[i.default.TOUCH_DRAG];return n&&!0===n.fireOnTouchStart&&r.push(i.default.TOUCH_START),{activate:function(o){n&&n.eventData&&(0,a.setToolOptions)(t,o,n.eventData),r.forEach(function(t){o.removeEventListener(t,e),o.addEventListener(t,e)}),n&&n.activateCallback&&n.activateCallback(o),n&&n.touchStartCallback&&o.addEventListener(i.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&o.addEventListener(i.default.TOUCH_END,n.touchEndCallback)},disable:function(t){r.forEach(function(n){t.removeEventListener(n,e)}),n&&n.disableCallback&&n.disableCallback(t),n&&n.touchStartCallback&&t.removeEventListener(i.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&t.removeEventListener(i.default.TOUCH_END,n.touchEndCallback)},enable:function(t){r.forEach(function(n){t.removeEventListener(n,e)}),n&&n.enableCallback&&n.enableCallback(t),n&&n.touchStartCallback&&t.removeEventListener(i.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&t.removeEventListener(i.default.TOUCH_END,n.touchEndCallback)},deactivate:function(t){r.forEach(function(n){t.removeEventListener(n,e)}),n&&n.deactivateCallback&&n.deactivateCallback(t),n&&n.touchStartCallback&&t.removeEventListener(i.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&t.removeEventListener(i.default.TOUCH_END,n.touchEndCallback)}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r},a=n(4)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.cornerstoneMath;return e instanceof t.Vector3?e:new t.Vector3(e[0],e[1],e[2])};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=i.default.cornerstone,r=n.metaData.get("patientStudyModule",e.imageId),o=n.metaData.get("generalSeriesModule",e.imageId);if(r&&o&&"PT"===o.modality){var s=t*e.slope+e.intercept,l=r.patientWeight;if(l){var u=n.metaData.get("petIsotopeModule",e.imageId);if(u){var d=u.radiopharmaceuticalInfo,c=d.radiopharmaceuticalStartTime,f=d.radionuclideTotalDose,h=d.radionuclideHalfLife,p=o.seriesTime;if(c&&f&&h&&p){var g=a(p.fractionalSeconds||0)+p.seconds+60*p.minutes+60*p.hours*60-(a(c.fractionalSeconds)+c.seconds+60*c.minutes+60*c.hours*60);return s*l/(f*Math.exp(-g*Math.log(2)/h))*1e3}}}}};var r,i=(r=n(0))&&r.__esModule?r:{default:r};function a(e){return parseFloat("."+e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=15,i=r+"px Arial",a="transparent",o={setFont:function(e){i=e},getFont:function(){return i},setFontSize:function(e){r=e},getFontSize:function(){return r},setBackgroundColor:function(e){a=e},getBackgroundColor:function(){return a}};t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.boundingBox)return i.default.cornerstoneMath.point.insideRect(t,e.boundingBox)};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.freehand=void 0;var r=C(n(1)),i=C(n(0)),a=C(n(14)),o=C(n(7)),s=C(n(9)),l=C(n(32)),u=C(n(22)),d=C(n(20)),c=C(n(6)),f=C(n(5)),h=C(n(17)),p=n(2),g=n(4),v=n(8),m=n(55),y=C(n(100)),b=C(n(99)),_=C(n(98)),w=C(n(96)),E=C(n(95)),T=C(n(54)),x=n(35),S=n(3);function C(e){return e&&e.__esModule?e:{default:e}}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var P="freehand",I={mouseLocation:{handles:{start:{highlight:!0,active:!0}}},keyDown:{shift:!1,ctrl:!1,alt:!1},activePencilMode:!1,spacing:5,activeHandleRadius:3,completeHandleRadius:6,alwaysShowHandles:!1,invalidColor:"crimson",modifying:!1,movingTextBox:!1,currentHandle:0,currentTool:-1};function M(e,t,n){return null!==A(e,t,n)}function A(e,t,n){var r=W.getConfiguration();if(void 0===t.handles)return null;if(!1===t.visible)return null;for(var a=0;a<t.handles.length;a++){var o=i.default.cornerstone.pixelToCanvas(e,t.handles[a]);if(i.default.cornerstoneMath.point.distance(o,n)<r.spacing)return a}return t.textBox&&(0,u.default)(t.textBox,n)?t.textBox:null}function L(e){var t=e.detail,n=t.element,i=W.getConfiguration(),a=(0,g.getToolOptions)(P,n);(0,f.default)(t.which,a.mouseButtonMask)&&(t.event.shiftKey&&(i.activePencilMode=!0),function(e){e.element.addEventListener(r.default.MOUSE_MOVE,R);var t=W.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,p.addToolState)(e.element,P,{visible:!0,active:!0,invalidated:!0,color:void 0,handles:[],textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}});var n=(0,p.getToolState)(e.element,P);t.currentTool=n.data.length-1}(t),D(t),e.preventDefault(),e.stopPropagation())}function D(e){var t=(0,p.getToolState)(e.element,P);if(void 0!==t){var n=W.getConfiguration(),r=t.data[n.currentTool];if(!r.handles.invalidHandlePlacement){var a=new x.FreehandHandleData(e.currentPoints.image);r.handles.length&&r.handles[n.currentHandle-1].lines.push(e.currentPoints.image),r.handles.push(a),n.currentHandle+=1,i.default.cornerstone.updateImage(e.element)}}}function k(e,t){var n=(0,p.getToolState)(e.element,P);if(n){var r=W.getConfiguration(),a=n.data[r.currentTool];a.active=!1,a.highlight=!1,a.handles.invalidHandlePlacement=!1,void 0!==t&&a.handles[r.currentHandle-1].lines.push(a.handles[0]),r.modifying&&(r.modifying=!1,a.invalidated=!0),r.currentHandle=0,r.currentTool=-1,r.activePencilMode=!1,a.canComplete=!1,i.default.cornerstone.updateImage(e.element)}}function j(e){var t=e.detail,n=t.element,i=(0,g.getToolOptions)(P,n);if((0,f.default)(t.which,i.mouseButtonMask)){var a=W.getConfiguration().currentTool;if(a<0)!function(e){var t=e.detail,n=function(e){var t=e.element,n=e.currentPoints.canvas,r=(0,p.getToolState)(t,P);if(r)for(var i=void 0,a=0;a<r.data.length;a++)if(null!==(i=A(t,r.data[a],n)))return{handleNearby:i,toolIndex:a}}(t);t.event.ctrlKey?(0,_.default)(e,n):void 0!==n&&function(e,t){var n=e.detail,i=n.element,a=(0,p.getToolState)(n.element,P),o=t.handleNearby;o.hasBoundingBox?function(e,t){var n=W.getConfiguration(),i=t.handleNearby,a=t.toolIndex;e.addEventListener(r.default.MOUSE_UP,U),e.addEventListener(r.default.MOUSE_DRAG,N),n.movingTextBox=!0,n.currentHandle=i,n.currentTool=a}(i,t):void 0!==o&&function(e,t,n){var i=W.getConfiguration(),a=t.handleNearby,o=t.toolIndex;e.removeEventListener(r.default.MOUSE_MOVE,R),i.dragOrigin={x:n.data[o].handles[a].x,y:n.data[o].handles[a].y},e.addEventListener(r.default.MOUSE_UP,U),e.addEventListener(r.default.MOUSE_CLICK,U),e.addEventListener(r.default.MOUSE_DRAG,N),i.modifying=!0,i.currentHandle=a,i.currentTool=o}(i,t,a),e.preventDefault(),e.stopPropagation()}(e,n)}(e);else{var o=(0,p.getToolState)(t.element,P);a>=0&&o.data[a].active&&function(e,t,n){var r=e.detail,i=W.getConfiguration(),a=r.element,o=t.data[n],s=A(a,o,r.currentPoints.canvas);!T.default.end(o.handles)&&o.canComplete?k(r,i.currentHandle):null===s&&D(r),e.preventDefault(),e.stopPropagation()}(e,o,a)}}}function R(e){var t=e.detail,n=(0,p.getToolState)(t.element,P);if(n){if(W.getConfiguration().currentTool<0){if(!function(e,t){for(var n=!1,r=0;r<t.data.length;r++){var i=e.element,a=t.data[r],o=e.currentPoints.canvas;!0===(0,l.default)(i,a.handles,o)&&(n=!0),(M(i,a,o)&&!a.active||!M(i,a,o)&&a.active)&&(a.active=!a.active,n=!0),!0===a.textBox&&(0,u.default)(a.textBox,o)&&(a.active=!a.active,a.highlight=!a.highlight,n=!0)}return n}(t,n))return}else!function(e,t){var n=W.getConfiguration(),r=n.currentTool,a=e.element,o=t.data[r],s=e.currentPoints.canvas;if(B(e),function(e){var t,n=W.getConfiguration();if(e.handles.length<2)return!0;t=n.activePencilMode?function(e){var t=W.getConfiguration().mouseLocation.handles.start,n=e.handles,r=T.default.newHandle(t,n);return!1===r&&(r=function(e,t){var n=W.getConfiguration(),r=e.handles;if(i.default.cornerstoneMath.point.distance(r[0],t)<n.spacing)return e.canComplete=!0,!1;e.canComplete=!1;for(var a=1;a<r.length-1;a++)if(i.default.cornerstoneMath.point.distance(r[a],t)<n.spacing)return!0;return!1}(e,t)),r}(e):function(e){var t=W.getConfiguration(),n=t.mouseLocation.handles.start,r=e.handles,a=!1;return e.canComplete=!1,i.default.cornerstoneMath.point.distance(r[0],n)<t.spacing&&!T.default.end(r)?(e.canComplete=!0,a=!1):a=T.default.newHandle(n,r),a}(e),e.handles.invalidHandlePlacement=t}(o),n.activePencilMode)!function(e,t){for(var n=W.getConfiguration(),r=n.mouseLocation.handles.start,a=0;a<t.length;a++)if(i.default.cornerstoneMath.point.distance(t[a],r)<n.spacing)return;D(e)}(e,o.handles);else{var l=A(a,o,s);null!==l&&!l.hasBoundingBox&&l<o.handles.length-1&&(n.mouseLocation.handles.start.x=o.handles[l].x,n.mouseLocation.handles.start.y=o.handles[l].y)}}(t,n);i.default.cornerstone.updateImage(t.element)}}function N(e){var t=e.detail,n=(0,p.getToolState)(t.element,P);if(n){var r=W.getConfiguration(),a=n.data[r.currentTool],o=r.currentHandle;B(t),r.currentTool>=0&&(0,y.default)(o,a),i.default.cornerstone.updateImage(t.element)}}function U(e){var t=e.detail,n=t.element,a=(0,p.getToolState)(t.element,P);n.removeEventListener(r.default.MOUSE_UP,U),n.removeEventListener(r.default.MOUSE_DRAG,N),n.removeEventListener(r.default.MOUSE_CLICK,U),n.addEventListener(r.default.MOUSE_MOVE,R),void 0!==a&&("handle"===(0,b.default)(e,a)&&k(t),e.preventDefault(),e.stopPropagation(),i.default.cornerstone.updateImage(t.element))}function B(e){var t=W.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,v.clipToBox)(t.mouseLocation.handles.start,e.image)}function H(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function F(e){var t=e.detail,n=(0,p.getToolState)(e.currentTarget,P);if(void 0!==n){var r=i.default.cornerstone,l=t.image,u=t.element,c=W.getConfiguration(),f=r.metaData.get("generalSeriesModule",l.imageId),g=void 0;f&&(g=f.modality);for(var v=(0,S.getNewContext)(t.canvasContext.canvas),m=a.default.getToolWidth(),y=function(e){var i=n.data[e];if(!1===i.visible)return"continue";(0,S.draw)(v,function(e){var n=o.default.getColorIfActive(i),a=void 0;if(i.active?i.handles.invalidHandlePlacement?(n=c.invalidColor,a=c.invalidColor):(n=o.default.getColorIfActive(i),a=o.default.getFillColor()):a=o.default.getToolColor(),i.handles.length)for(var f=0;f<i.handles.length;f++){var p=[].concat(O(i.handles[f].lines));f!==i.handles.length-1||i.polyBoundingBox||p.push(c.mouseLocation.handles.start),(0,S.drawJoinedLines)(e,t.element,i.handles[f],p,{color:n})}var v={fill:a};(c.alwaysShowHandles||c.keyDown.ctrl||i.active&&i.polyBoundingBox)&&(v.handleRadius=c.activeHandleRadius,(0,s.default)(e,t,i.handles,n,v)),i.canComplete&&(v.handleRadius=c.completeHandleRadius,(0,s.default)(e,t,[i.handles[0]],n,v)),i.active&&!i.polyBoundingBox&&(v.handleRadius=c.activeHandleRadius,(0,s.default)(e,t,c.mouseLocation.handles,n,v),(0,s.default)(e,t,[i.handles[0]],n,v));var y=void 0,b=void 0,T=void 0;if(!1===i.invalidated)b=i.meanStdDev,T=i.meanStdDevSUV,y=i.area;else if(!i.active){for(var x={left:i.handles[0].x,right:i.handles[0].x,bottom:i.handles[0].y,top:i.handles[0].x},C=0;C<i.handles.length;C++)x.left=Math.min(x.left,i.handles[C].x),x.right=Math.max(x.right,i.handles[C].x),x.bottom=Math.min(x.bottom,i.handles[C].y),x.top=Math.max(x.top,i.handles[C].y);var P={left:x.left,top:x.bottom,width:Math.abs(x.right-x.left),height:Math.abs(x.top-x.bottom)};if(i.polyBoundingBox=P,!l.color){var I=r.getPixels(u,P.left,P.top,P.width,P.height);b=(0,E.default)(I,P,i.handles),"PT"===g&&(T={mean:(0,d.default)(l,(b.mean-l.intercept)/l.slope),stdDev:(0,d.default)(l,(b.stdDev-l.intercept)/l.slope)}),b&&!isNaN(b.mean)&&(i.meanStdDev=b,i.meanStdDevSUV=T)}var M=(l.columnPixelSpacing||1)*(l.rowPixelSpacing||1);y=(0,w.default)(i.handles,M),isNaN(y)||(i.area=y),i.invalidated=!1}if(i.polyBoundingBox&&!i.textBox.freehand){i.textBox.hasMoved||(i.textBox.x=i.polyBoundingBox.left+i.polyBoundingBox.width,i.textBox.y=i.polyBoundingBox.top+i.polyBoundingBox.height/2);var A=function(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,i=[];if(t&&void 0!==t.mean){var a="";"CT"===g&&(a=" HU");var o="Mean: "+H(t.mean.toFixed(2))+a,s="StdDev: "+H(t.stdDev.toFixed(2))+a;n&&void 0!==n.mean&&(o+=" SUV: "+H(n.mean.toFixed(2)),s+=" SUV: "+H(n.stdDev.toFixed(2))),i.push(o),i.push(s)}if(r){var u=" mm"+String.fromCharCode(178);l.rowPixelSpacing&&l.columnPixelSpacing||(u=" pixels"+String.fromCharCode(178));var d="Area: "+H(r.toFixed(2))+u;i.push(d)}return i}(i);(0,h.default)(e,u,i.textBox,A,i.handles,_,n,m,0,!0)}})},b=0;b<n.data.length;b++)y(b)}function _(e){return e}}function V(e){e.removeEventListener(r.default.MOUSE_DOWN,j),e.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,L),e.removeEventListener(r.default.MOUSE_DRAG,N),e.removeEventListener(r.default.MOUSE_UP,U),e.removeEventListener(r.default.MOUSE_MOVE,R),e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,F),e.removeEventListener(r.default.KEY_DOWN,m.keyDownCallback),e.removeEventListener(r.default.KEY_UP,m.keyUpCallback)}function z(e){var t=W.getConfiguration();t.currentTool>=0&&k(e,t.currentHandle)}var W={enable:function(e){z(e),V(e),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,F),i.default.cornerstone.updateImage(e)},disable:function(e){z(e),V(e),i.default.cornerstone.updateImage(e)},activate:function(e,t){(0,g.setToolOptions)(P,e,{mouseButtonMask:t}),V(e),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,F),e.addEventListener(r.default.MOUSE_MOVE,R),e.addEventListener(r.default.MOUSE_DOWN,j),e.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,L),e.addEventListener(r.default.KEY_DOWN,m.keyDownCallback),e.addEventListener(r.default.KEY_UP,m.keyUpCallback),i.default.cornerstone.updateImage(e)},deactivate:function(e,t){(0,g.setToolOptions)(P,e,{mouseButtonMask:t});var n=r.default.TOOL_DEACTIVATED,a={mouseButtonMask:t,toolType:P,type:n};(0,c.default)(e,n,a),z(e),V(e),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,F),e.addEventListener(r.default.MOUSE_MOVE,R),e.addEventListener(r.default.MOUSE_DOWN,j),e.addEventListener(r.default.KEY_DOWN,m.keyDownCallback),e.addEventListener(r.default.KEY_UP,m.keyUpCallback),i.default.cornerstone.updateImage(e)},getConfiguration:function(){return I},setConfiguration:function(e){I=e},pointNearTool:M};t.freehand=W},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return{disable:function(t){t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e)},enable:function(t){t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e),t.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e),i.default.cornerstone.updateImage(t)},getConfiguration:function(){return t},setConfiguration:function(e){t=e}}};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){var o=void 0;if(t)return Object.keys(t).forEach(function(s){var l=t[s];if(l.hasOwnProperty("pointNearHandle")){if(l.pointNearHandle(e,l,n))return void(o=l)}else if(!0===l.hasBoundingBox){if((0,i.default)(l,n))return void(o=l)}else{var u=r.default.cornerstone.pixelToCanvas(e,l);if(r.default.cornerstoneMath.point.distance(u,n)<=a)return void(o=l)}}),o};var r=a(n(0)),i=a(n(22));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.globalImageIdSpecificToolStateManager=t.newImageIdSpecificToolStateManager=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r};function a(){var e={};return{get:function(t,n){var r=i.default.cornerstone.getEnabledElement(t);if(r.image&&!1!==e.hasOwnProperty(r.image.imageId)){var a=e[r.image.imageId];if(!1!==a.hasOwnProperty(n))return a[n]}},add:function(t,n,r){var a=i.default.cornerstone.getEnabledElement(t);a.image&&!1!==e.hasOwnProperty(a.image.imageId)||(e[a.image.imageId]={});var o=e[a.image.imageId];!1===o.hasOwnProperty(n)&&(o[n]={data:[]}),o[n].data.push(r)},clear:function(t){var n=i.default.cornerstone.getEnabledElement(t);n.image&&!1!==e.hasOwnProperty(n.image.imageId)&&delete e[n.image.imageId]},saveImageIdToolState:function(t){return e[t]},restoreImageIdToolState:function(t,n){e[t]=n},saveToolState:function(){return e},restoreToolState:function(t){e=t},toolState:e}}var o=a();t.newImageIdSpecificToolStateManager=a,t.globalImageIdSpecificToolStateManager=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var a=i.default.cornerstone,o={start:a.pixelToCanvas(e,t),end:a.pixelToCanvas(e,n)};return i.default.cornerstoneMath.lineSegment.distanceToPoint(o,r)};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l,u){var d=i.default.cornerstone,c=e.element,f=d.pageToPixel(c,e.currentPoints.page.x,e.currentPoints.page.y+50),h={x:s.x-f.x,y:s.y-f.y};function p(e){var i=e.detail;s.x=i.currentPoints.image.x+h.x,s.y=i.currentPoints.image.y+h.y,u&&(0,o.clipToBox)(s,i.image),d.updateImage(c);var l=r.default.MEASUREMENT_MODIFIED,f={toolType:t,element:c,measurementData:n};(0,a.default)(c,l,f)}function g(e){var t=e.detail;if(c.removeEventListener(r.default.TOUCH_DRAG,p),c.removeEventListener(r.default.TOUCH_PINCH,g),c.removeEventListener(r.default.TOUCH_END,g),c.removeEventListener(r.default.TAP,g),c.removeEventListener(r.default.TOUCH_START,v),c.removeEventListener(r.default.TOOL_DEACTIVATED,m),e.type===r.default.TOUCH_PINCH||e.type===r.default.TOUCH_PRESS)return s.active=!1,d.updateImage(c),void l();s.active=!1,n.active=!1,s.x=t.currentPoints.image.x+h.x,s.y=t.currentPoints.image.y+h.y,u&&(0,o.clipToBox)(s,t.image),d.updateImage(c),"function"==typeof l&&l()}function v(e){return e.stopImmediatePropagation(),!1}function m(){c.removeEventListener(r.default.TOUCH_DRAG,p),c.removeEventListener(r.default.TOUCH_PINCH,g),c.removeEventListener(r.default.TOUCH_END,g),c.removeEventListener(r.default.TAP,g),c.removeEventListener(r.default.TOUCH_START,v),c.removeEventListener(r.default.TOOL_DEACTIVATED,m),s.active=!1,n.active=!1,s.x=e.currentPoints.image.x+h.x,s.y=e.currentPoints.image.y+h.y,u&&(0,o.clipToBox)(s,e.image),d.updateImage(c)}s.active=!0,n.active=!0,c.addEventListener(r.default.TOUCH_DRAG,p),c.addEventListener(r.default.TOUCH_PINCH,g),c.addEventListener(r.default.TOUCH_END,g),c.addEventListener(r.default.TAP,g),c.addEventListener(r.default.TOUCH_START,v),c.addEventListener(r.default.TOOL_DEACTIVATED,m)};var r=s(n(1)),i=s(n(0)),a=s(n(6)),o=n(8);function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function(t){t.removeEventListener(i.default.MOUSE_WHEEL,e),t.addEventListener(i.default.MOUSE_WHEEL,e)},disable:function(t){t.removeEventListener(i.default.MOUSE_WHEEL,e)},enable:function(t){t.removeEventListener(i.default.MOUSE_WHEEL,e)},deactivate:function(t){t.removeEventListener(i.default.MOUSE_WHEEL,e)}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l,u){var d=i.default.cornerstone,c=e.element;function f(e){var i=e.detail;s.active=!0,s.x=i.currentPoints.image.x,s.y=i.currentPoints.image.y,u&&(0,o.clipToBox)(s,i.image),d.updateImage(c);var l=r.default.MEASUREMENT_MODIFIED,f={toolType:t,element:c,measurementData:n};(0,a.default)(c,l,f)}function h(e){c.removeEventListener(r.default.MOUSE_MOVE,h),c.removeEventListener(r.default.MOUSE_DRAG,h),c.addEventListener(r.default.MOUSE_MOVE,f),c.addEventListener(r.default.MOUSE_DRAG,f),c.addEventListener(r.default.MOUSE_CLICK,v),e.type===r.default.MOUSE_DRAG&&c.addEventListener(r.default.MOUSE_UP,v)}function p(e){e.detail.measurementData===n&&v()}function g(e){e.detail.toolType===t&&(c.removeEventListener(r.default.MOUSE_MOVE,f),c.removeEventListener(r.default.MOUSE_DRAG,f),c.removeEventListener(r.default.MOUSE_CLICK,v),c.removeEventListener(r.default.MOUSE_UP,v),c.removeEventListener(r.default.MEASUREMENT_REMOVED,p),c.removeEventListener(r.default.TOOL_DEACTIVATED,g),s.active=!1,d.updateImage(c))}function v(){c.removeEventListener(r.default.MOUSE_MOVE,f),c.removeEventListener(r.default.MOUSE_DRAG,f),c.removeEventListener(r.default.MOUSE_CLICK,v),c.removeEventListener(r.default.MOUSE_UP,v),c.removeEventListener(r.default.MEASUREMENT_REMOVED,p),c.removeEventListener(r.default.TOOL_DEACTIVATED,g),s.active=!1,d.updateImage(c),"function"==typeof l&&l()}c.addEventListener(r.default.MOUSE_DRAG,h),c.addEventListener(r.default.MOUSE_MOVE,h),c.addEventListener(r.default.MEASUREMENT_REMOVED,p),c.addEventListener(r.default.TOOL_DEACTIVATED,g)};var r=s(n(1)),i=s(n(0)),a=s(n(6)),o=n(8);function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l,u){var d=i.default.cornerstone,c=e.element,f={x:s.x-e.currentPoints.image.x,y:s.y-e.currentPoints.image.y};function h(e){var i=e.detail;!1===s.hasMoved&&(s.hasMoved=!0),s.active=!0,s.x=i.currentPoints.image.x+f.x,s.y=i.currentPoints.image.y+f.y,u&&(0,o.clipToBox)(s,i.image),d.updateImage(c);var l=r.default.MEASUREMENT_MODIFIED,h={toolType:t,element:c,measurementData:n};(0,a.default)(c,l,h)}function p(){s.active=!1,c.removeEventListener(r.default.MOUSE_DRAG,h),c.removeEventListener(r.default.MOUSE_UP,p),c.removeEventListener(r.default.MOUSE_CLICK,p),d.updateImage(c),"function"==typeof l&&l()}c.addEventListener(r.default.MOUSE_DRAG,h),c.addEventListener(r.default.MOUSE_UP,p),c.addEventListener(r.default.MOUSE_CLICK,p)};var r=s(n(1)),i=s(n(0)),a=s(n(6)),o=n(8);function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){r||(r=6);var a=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var r=e[n];!0!==r.active||(t=r)}),t}(t),o=(0,i.default)(e,t,n,r);return a!==o&&(void 0!==o&&(o.active=!0),void 0!==a&&(a.active=!1),!0)};var r,i=(r=n(25))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,i={default:6,IE:{9:6,10:8,default:8},Firefox:{default:6},Opera:{10:8,11:6,12:6,default:6},Chrome:{default:6},Safari:{default:6}};function a(){var e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],n=void 0;return/trident/i.test(t[1])?"IE "+((n=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===t[1]&&null!==(n=e.match(/\b(OPR|Edge)\/(\d+)/))?n.slice(1).join(" ").replace("OPR","Opera"):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(n=e.match(/version\/(\d+)/i))&&t.splice(1,1,n[1]),t.join(" "))}function o(){var e=a().split(" "),t=e[0],n=e[1],r=i[t];return r?r[n]?r[n]:r.default:i.default}t.getDefaultSimultaneousRequests=o,t.getMaxSimultaneousRequests=function(){return r||o()},t.setMaxSimultaneousRequests=function(e){r=e},t.getBrowserInfo=a,t.isMobileDevice=function(){return new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini").test(navigator.userAgent)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.drawBrushOnCanvas=t.drawBrushPixels=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},a=n(3);t.drawBrushPixels=function(e,t,n,r){e.forEach(function(e){var i,a=(i=e[0],e[1]*r+i);t[a]=n})},t.drawBrushOnCanvas=function(e,t,n,r){var o=i.default.cornerstone.pixelToCanvas(r,{x:0,y:0}),s=i.default.cornerstone.pixelToCanvas(r,{x:1,y:1}),l=s.x-o.x,u=s.y-o.y;(0,a.draw)(t,function(t){e.forEach(function(e){var o=i.default.cornerstone.pixelToCanvas(r,{x:e[0],y:e[1]}),s={left:o.x,top:o.y,width:l,height:u};(0,a.fillBox)(t,s,n)})})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FreehandHandleData=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t.x,this.y=t.y,this.highlight=n,this.active=r,this.lines=[]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={},r=[i.default.MULTI_TOUCH_DRAG];return t&&!0===t.fireOnTouchStart&&r.push(i.default.MULTI_TOUCH_START),{activate:function(n){r.forEach(function(t){n.removeEventListener(t,e),n.addEventListener(t,e)}),t&&t.activateCallback&&t.activateCallback(n)},disable:function(n){r.forEach(function(t){n.removeEventListener(t,e)}),t&&t.disableCallback&&t.disableCallback(n)},enable:function(n){r.forEach(function(t){n.removeEventListener(t,e)}),t&&t.enableCallback&&t.enableCallback(n)},deactivate:function(n){r.forEach(function(t){n.removeEventListener(t,e)}),t&&t.deactivateCallback&&t.deactivateCallback(n)},getConfiguration:function(){return n},setConfiguration:function(e){n=e}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var s=(0,i.getToolState)(e,"timeSeries");if(s&&s.data&&s.data.length){var l=r.default.cornerstone,u=s.data[0],d=u.stacks[u.currentStackIndex].currentImageIdIndex,c=u.currentStackIndex+t;if(n?(c>=u.stacks.length&&(c=0),c<0&&(c=u.stacks.length-1)):c=(0,o.default)(c,0,u.stacks.length-1),c!==u.currentStackIndex){var f=l.getViewport(e),h=u.stacks[c],p=a.default.getStartLoadHandler(),g=a.default.getEndLoadHandler(),v=a.default.getErrorLoadingHandler();p&&p(e),(!0===h.preventCache?l.loadImage(h.imageIds[d]):l.loadAndCacheImage(h.imageIds[d])).then(function(t){u.currentImageIdIndex!==d&&(h.currentImageIdIndex=d,u.currentStackIndex=c,l.displayImage(e,t,f),g&&g(e,t))},function(t){var n=h.imageIds[d];v&&v(e,n,t)})}}};var r=s(n(0)),i=n(2),a=s(n(13)),o=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,u,d,c){var f=i.default.cornerstone,h=e.detail.element;function p(e){var n=e.detail;t.active=!0,Object.keys(t.handles).forEach(function(e){var r=t.handles[e];!0!==r.movesIndependently&&(r.x+=n.deltaPoints.image.x,r.y+=n.deltaPoints.image.y,d.preventHandleOutsideImage&&(0,l.clipToBox)(r,n.image))}),f.updateImage(h);var i=r.default.MEASUREMENT_MODIFIED,a={toolType:u,element:h,measurementData:t};(0,s.default)(h,i,a),e.preventDefault(),e.stopPropagation()}function g(e){var n=e.detail;t.invalidated=!0,h.removeEventListener(r.default.MOUSE_DRAG,p),h.removeEventListener(r.default.MOUSE_UP,g),h.removeEventListener(r.default.MOUSE_CLICK,g),!0===d.deleteIfHandleOutsideImage&&(0,a.default)(n,t.handles)&&(0,o.removeToolState)(h,u,t),f.updateImage(h),"function"==typeof c&&c()}return h.addEventListener(r.default.MOUSE_DRAG,p),h.addEventListener(r.default.MOUSE_UP,g),h.addEventListener(r.default.MOUSE_CLICK,g),!0};var r=u(n(1)),i=u(n(0)),a=u(n(15)),o=n(2),s=u(n(6)),l=n(8);function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,i={setCoords:function(e){r=e.currentPoints.canvas},getCoords:function(){return r}};t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{page:i.default.cornerstoneMath.point.copy(e.page),image:i.default.cornerstoneMath.point.copy(e.image),client:i.default.cornerstoneMath.point.copy(e.client),canvas:i.default.cornerstoneMath.point.copy(e.canvas)}};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){if(!e)throw new Error("getRGBPixels: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);var o=i.default.cornerstone.getEnabledElement(e),s=[],l=0,u=o.image.getPixelData(),d=void 0,c=void 0,f=void 0;if(o.image.color)for(c=0;c<a;c++)for(f=0;f<r;f++){var h=u[d=4*((c+n)*o.image.columns+(f+t))],p=u[d+1],g=u[d+2],v=u[d+3];s[l++]=h,s[l++]=p,s[l++]=g,s[l++]=v}return s};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.width/2,r=e.height/2;if(n<=0||r<=0)return!1;var i=e.left+n,a=e.top+r,o=t.x-i,s=t.y-a;return o*o/(n*n)+s*s/(r*r)<=1}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=(0,i.getToolState)(e,"stack");if(s&&s.data&&s.data.length){var l=s.data[0];l.pending||(l.pending=[]);var u=l.currentImageIdIndex+t;if(n?u%=l.imageIds.length:u=(0,a.default)(u,0,l.imageIds.length-1),o)(0,r.default)(e,u);else{var d={index:u};l.pending.push(d),function e(t,n,i){if(t.pending[0]===n){if(t.currentImageIdIndex===n.index)return t.pending.splice(t.pending.indexOf(n),1),void(t.pending.length>0&&e(t,t.pending[0],i));i.addEventListener(external.cornerstone.EVENTS.NEW_IMAGE,function e(a){t.imageIds.indexOf(a.detail.image.imageId)===n.index&&(t.pending.splice(t.pending.indexOf(n),1),i.removeEventListener(external.cornerstone.EVENTS.NEW_IMAGE,e),t.pending.length>0&&function e(t,n,i){if(t.pending[0]===n){if(t.currentImageIdIndex===n.index)return t.pending.splice(t.pending.indexOf(n),1),void(t.pending.length>0&&e(t,t.pending[0],i));i.addEventListener(external.cornerstone.EVENTS.NEW_IMAGE,function r(a){t.imageIds.indexOf(a.detail.image.imageId)===n.index&&(t.pending.splice(t.pending.indexOf(n),1),i.removeEventListener(external.cornerstone.EVENTS.NEW_IMAGE,r),t.pending.length>0&&e(t,t.pending[0],i))}),(0,r.default)(i,n.index)}}(t,t.pending[0],i))}),(0,r.default)(i,n.index)}}(l,d,e)}}};var r=o(n(65)),i=n(2),a=o(n(8));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(0))&&r.__esModule?r:{default:r},a=n(33),o={interaction:[],thumbnail:[],prefetch:[]},s={interaction:0,thumbnail:0,prefetch:0},l={interaction:6,thumbnail:6,prefetch:5},u=!1,d=20;function c(){u&&setTimeout(function(){h()},d)}function f(e){var t=i.default.cornerstone,n=e.type;s[n]++,u=!0;var r=e.imageId,a=e.doneCallback,o=e.failCallback,l=t.imageCache.getImageLoadObject(r);if(l)l.promise.then(function(e){s[n]--,a(e),c()},function(e){s[n]--,o(e),c()});else{var d=function(e){return"prefetch"===e.type?-5:"interactive"===e.type?0:"thumbnail"===e.type?5:void 0}(e);(!0===e.preventCache?t.loadImage(r,{priority:d,type:e.type}):t.loadAndCacheImage(r,{priority:d,type:e.type})).then(function(e){s[n]--,a(e),c()},function(e){s[n]--,o(e),c()})}}function h(){var e=(0,a.getMaxSimultaneousRequests)();l={interaction:Math.max(e,1),thumbnail:Math.max(e-2,1),prefetch:Math.max(e-1,1)};for(var t=e-(s.interaction+s.thumbnail+s.prefetch),n=0;n<t;n++){var r=o.interaction.length&&s.interaction<l.interaction?o.interaction.shift():o.thumbnail.length&&s.thumbnail<l.thumbnail?o.thumbnail.shift():o.prefetch.length&&s.prefetch<l.prefetch?o.prefetch.shift():(o.interaction.length||o.thumbnail.length||o.prefetch.length||(u=!1),!1);r&&f(r)}}t.default={addRequest:function(e,t,n,r,a,s,l){if(!o.hasOwnProperty(n))throw new Error("Request type must be one of interaction, thumbnail, or prefetch");if(e&&t){var d={type:n,imageId:t,preventCache:r,doneCallback:a,failCallback:s},c=i.default.cornerstone.imageCache.getImageLoadObject(t);c?c.promise.then(function(e){a(e)},function(e){s(e)}):(l?o[n].unshift(d):o[n].push(d),u=!0)}},clearRequestStack:function(e){if(!o.hasOwnProperty(e))throw new Error("Request type must be one of interaction, thumbnail, or prefetch");o[e]=[]},startGrabbing:h,getRequestPool:function(){return o}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.projectPatientPointToImagePlane=function(e,t){var n=(0,i.default)(t.rowCosines),r=(0,i.default)(t.columnCosines),a=(0,i.default)(t.imagePositionPatient),o=e.clone().sub(a);return{x:n.dot(o)/t.columnPixelSpacing,y:r.dot(o)/t.rowPixelSpacing}},t.imagePointToPatientPoint=o,t.planePlaneIntersection=function(e,t){var n=(0,i.default)(e.rowCosines),a=(0,i.default)(e.columnCosines),s=(0,i.default)(e.imagePositionPatient),l=(0,i.default)(t.rowCosines),u=(0,i.default)(t.columnCosines),d=(0,i.default)(t.imagePositionPatient),c=n.clone().cross(a),f=new r.default.cornerstoneMath.Plane;f.setFromNormalAndCoplanarPoint(c,s);var h=l.clone().cross(u),p=new r.default.cornerstoneMath.Plane;p.setFromNormalAndCoplanarPoint(h,d);var g=p.clone().intersectPlane(f),v=g.origin,m=g.direction,y=o({x:t.columns,y:t.rows},t),b=d.distanceTo(y),_=new r.default.cornerstoneMath.Line3;_.start=v,_.end=v.clone().add(m.multiplyScalar(b));var w=function(e,t){var n=[];return Object.keys(t).forEach(function(r){var i=t[r],a=e.intersectLine(i);a&&n.push(a)}),n}(_,function(e){var t=o({x:0,y:0},e),n=o({x:e.columns,y:0},e),i=o({x:0,y:e.rows},e),a=o({x:e.columns,y:e.rows},e);return{top:new r.default.cornerstoneMath.Line3(t,n),left:new r.default.cornerstoneMath.Line3(t,i),right:new r.default.cornerstoneMath.Line3(n,a),bottom:new r.default.cornerstoneMath.Line3(i,a)}}(t));if(2===w.length)return{start:w[0],end:w[1]}};var r=a(n(0)),i=a(n(19));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,i.default)(t.rowCosines),r=(0,i.default)(t.columnCosines),a=(0,i.default)(t.imagePositionPatient),o=n.clone().multiplyScalar(e.x);o.multiplyScalar(t.columnPixelSpacing||1);var s=r.clone().multiplyScalar(e.y);s.multiplyScalar(t.rowPixelSpacing||1);var l=o.add(s);return l.add(a),l}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getToolOptions=t.setToolOptions=t.version=t.adaptiveBrush=t.brush=t.zoomTouchDrag=t.zoomTouchPinch=t.zoomWheel=t.zoom=t.wwwcRegionTouch=t.wwwcRegion=t.wwwcTouchDrag=t.wwwc=t.touchTool=t.touchPinchTool=t.touchDragTool=t.textMarkerTouch=t.textMarker=t.simpleMouseButtonTool=t.simpleAngleTouch=t.simpleAngle=t.seedAnnotateTouch=t.seedAnnotate=t.scaleOverlayTool=t.saveAs=t.rotateTouch=t.rotateTouchDrag=t.rotate=t.rectangleRoiTouch=t.rectangleRoi=t.probeTouch=t.probe=t.panMultiTouch=t.panTouchDrag=t.pan=t.orientationMarkers=t.multiTouchDragTool=t.mouseWheelTool=t.mouseButtonTool=t.mouseButtonRectangleTool=t.magnifyTouchDrag=t.magnify=t.lengthTouch=t.length=t.keyboardTool=t.imageStats=t.highlightTouch=t.highlight=t.freehandSculpter=t.freehand=t.eraserTouch=t.eraser=t.ellipticalRoiTouch=t.ellipticalRoi=t.dragProbeTouch=void 0,t.dragProbe=t.doubleTapZoom=t.doubleTapTool=t.displayTool=t.crosshairsTouch=t.crosshairs=t.arrowAnnotateTouch=t.arrowAnnotate=t.angleTouch=t.angle=t.touchInput=t.preventGhostClick=t.mouseWheelInput=t.mouseInput=t.keyboardInput=t.touchMoveHandle=t.touchMoveAllHandles=t.moveNewHandleTouch=t.moveNewHandle=t.moveHandle=t.moveAllHandles=t.handleActivator=t.getHandleNearImagePoint=t.drawHandles=t.anyHandlesOutsideImage=t.stopClip=t.playClip=t.stackRenderers=t.scrollIndicator=t.stackPrefetch=t.stackScrollMultiTouch=t.stackScrollTouchDrag=t.stackScrollWheel=t.stackScroll=t.stackScrollKeyboard=t.appState=t.globalFrameOfReferenceSpecificToolStateManager=t.newFrameOfReferenceSpecificToolStateManager=t.globalImageIdSpecificToolStateManager=t.newImageIdSpecificToolStateManager=t.loadHandlerManager=t.addStackStateManager=t.newStackSpecificToolStateManager=t.stackSpecificStateManager=t.textStyle=t.newTimeSeriesSpecificToolStateManager=t.addTimeSeriesStateManager=t.toolColors=t.toolCoordinates=t.getElementToolStateManager=t.setElementToolStateManager=t.clearToolState=t.removeToolState=t.getToolState=t.addToolState=t.toolStyle=t.panZoomSynchronizer=t.stackImageIndexSynchronizer=t.stackImagePositionOffsetSynchronizer=t.stackImagePositionSynchronizer=t.stackScrollSynchronizer=t.Synchronizer=t.updateImageSynchronizer=t.wwwcSynchronizer=t.timeSeriesScrollTouchDrag=t.timeSeriesScrollWheel=t.timeSeriesScroll=t.timeSeriesPlayer=t.incrementTimePoint=t.probeTool4D=t.calculateEllipseStatistics=t.calculateSUV=t.copyPoints=t.drawArrow=t.drawCircle=t.drawEllipse=t.drawTextBox=t.getLuminance=t.isMobileDevice=t.getBrowserInfo=t.getMaxSimultaneousRequests=t.getDefaultSimultaneousRequests=t.getRGBPixels=t.isMouseButtonEnabled=t.makeUnselectable=t.pointInEllipse=t.pointInsideBoundingBox=t.planePlaneIntersection=t.imagePointToPatientPoint=t.projectPatientPointToImagePlane=t.roundToDecimal=t.scroll=t.scrollToIndex=t.setContextToDisplayFontSize=t.requestPoolManager=t.orientation=t.referenceLines=t.EVENTS=t.external=t.drawing=void 0;var r=n(0);Object.defineProperty(t,"external",{enumerable:!0,get:function(){return st(r).default}});var i=n(1);Object.defineProperty(t,"EVENTS",{enumerable:!0,get:function(){return st(i).default}});var a=n(144);Object.defineProperty(t,"referenceLines",{enumerable:!0,get:function(){return st(a).default}});var o=n(66);Object.defineProperty(t,"orientation",{enumerable:!0,get:function(){return st(o).default}});var s=n(45);Object.defineProperty(t,"requestPoolManager",{enumerable:!0,get:function(){return st(s).default}});var l=n(140);Object.defineProperty(t,"setContextToDisplayFontSize",{enumerable:!0,get:function(){return st(l).default}});var u=n(65);Object.defineProperty(t,"scrollToIndex",{enumerable:!0,get:function(){return st(u).default}});var d=n(44);Object.defineProperty(t,"scroll",{enumerable:!0,get:function(){return st(d).default}});var c=n(43);Object.defineProperty(t,"roundToDecimal",{enumerable:!0,get:function(){return st(c).default}});var f=n(46);Object.defineProperty(t,"projectPatientPointToImagePlane",{enumerable:!0,get:function(){return f.projectPatientPointToImagePlane}}),Object.defineProperty(t,"imagePointToPatientPoint",{enumerable:!0,get:function(){return f.imagePointToPatientPoint}}),Object.defineProperty(t,"planePlaneIntersection",{enumerable:!0,get:function(){return f.planePlaneIntersection}});var h=n(22);Object.defineProperty(t,"pointInsideBoundingBox",{enumerable:!0,get:function(){return st(h).default}});var p=n(42);Object.defineProperty(t,"pointInEllipse",{enumerable:!0,get:function(){return st(p).default}});var g=n(139);Object.defineProperty(t,"makeUnselectable",{enumerable:!0,get:function(){return st(g).default}});var v=n(5);Object.defineProperty(t,"isMouseButtonEnabled",{enumerable:!0,get:function(){return st(v).default}});var m=n(41);Object.defineProperty(t,"getRGBPixels",{enumerable:!0,get:function(){return st(m).default}});var y=n(33);Object.defineProperty(t,"getDefaultSimultaneousRequests",{enumerable:!0,get:function(){return y.getDefaultSimultaneousRequests}}),Object.defineProperty(t,"getMaxSimultaneousRequests",{enumerable:!0,get:function(){return y.getMaxSimultaneousRequests}}),Object.defineProperty(t,"getBrowserInfo",{enumerable:!0,get:function(){return y.getBrowserInfo}}),Object.defineProperty(t,"isMobileDevice",{enumerable:!0,get:function(){return y.isMobileDevice}});var b=n(64);Object.defineProperty(t,"getLuminance",{enumerable:!0,get:function(){return st(b).default}});var _=n(11);Object.defineProperty(t,"drawTextBox",{enumerable:!0,get:function(){return st(_).default}});var w=n(138);Object.defineProperty(t,"drawEllipse",{enumerable:!0,get:function(){return st(w).default}});var E=n(137);Object.defineProperty(t,"drawCircle",{enumerable:!0,get:function(){return st(E).default}});var T=n(63);Object.defineProperty(t,"drawArrow",{enumerable:!0,get:function(){return st(T).default}});var x=n(40);Object.defineProperty(t,"copyPoints",{enumerable:!0,get:function(){return st(x).default}});var S=n(20);Object.defineProperty(t,"calculateSUV",{enumerable:!0,get:function(){return st(S).default}});var C=n(62);Object.defineProperty(t,"calculateEllipseStatistics",{enumerable:!0,get:function(){return st(C).default}});var O=n(136);Object.defineProperty(t,"probeTool4D",{enumerable:!0,get:function(){return st(O).default}});var P=n(37);Object.defineProperty(t,"incrementTimePoint",{enumerable:!0,get:function(){return st(P).default}});var I=n(133);Object.defineProperty(t,"timeSeriesPlayer",{enumerable:!0,get:function(){return st(I).default}});var M=n(132);Object.defineProperty(t,"timeSeriesScroll",{enumerable:!0,get:function(){return M.timeSeriesScroll}}),Object.defineProperty(t,"timeSeriesScrollWheel",{enumerable:!0,get:function(){return M.timeSeriesScrollWheel}}),Object.defineProperty(t,"timeSeriesScrollTouchDrag",{enumerable:!0,get:function(){return M.timeSeriesScrollTouchDrag}});var A=n(131);Object.defineProperty(t,"wwwcSynchronizer",{enumerable:!0,get:function(){return st(A).default}});var L=n(130);Object.defineProperty(t,"updateImageSynchronizer",{enumerable:!0,get:function(){return st(L).default}});var D=n(129);Object.defineProperty(t,"Synchronizer",{enumerable:!0,get:function(){return st(D).default}});var k=n(128);Object.defineProperty(t,"stackScrollSynchronizer",{enumerable:!0,get:function(){return st(k).default}});var j=n(127);Object.defineProperty(t,"stackImagePositionSynchronizer",{enumerable:!0,get:function(){return st(j).default}});var R=n(126);Object.defineProperty(t,"stackImagePositionOffsetSynchronizer",{enumerable:!0,get:function(){return st(R).default}});var N=n(125);Object.defineProperty(t,"stackImageIndexSynchronizer",{enumerable:!0,get:function(){return st(N).default}});var U=n(124);Object.defineProperty(t,"panZoomSynchronizer",{enumerable:!0,get:function(){return st(U).default}});var B=n(14);Object.defineProperty(t,"toolStyle",{enumerable:!0,get:function(){return st(B).default}});var H=n(2);Object.defineProperty(t,"addToolState",{enumerable:!0,get:function(){return H.addToolState}}),Object.defineProperty(t,"getToolState",{enumerable:!0,get:function(){return H.getToolState}}),Object.defineProperty(t,"removeToolState",{enumerable:!0,get:function(){return H.removeToolState}}),Object.defineProperty(t,"clearToolState",{enumerable:!0,get:function(){return H.clearToolState}}),Object.defineProperty(t,"setElementToolStateManager",{enumerable:!0,get:function(){return H.setElementToolStateManager}}),Object.defineProperty(t,"getElementToolStateManager",{enumerable:!0,get:function(){return H.getElementToolStateManager}});var F=n(39);Object.defineProperty(t,"toolCoordinates",{enumerable:!0,get:function(){return st(F).default}});var V=n(7);Object.defineProperty(t,"toolColors",{enumerable:!0,get:function(){return st(V).default}});var z=n(123);Object.defineProperty(t,"addTimeSeriesStateManager",{enumerable:!0,get:function(){return z.addTimeSeriesStateManager}}),Object.defineProperty(t,"newTimeSeriesSpecificToolStateManager",{enumerable:!0,get:function(){return z.newTimeSeriesSpecificToolStateManager}});var W=n(21);Object.defineProperty(t,"textStyle",{enumerable:!0,get:function(){return st(W).default}});var q=n(122);Object.defineProperty(t,"stackSpecificStateManager",{enumerable:!0,get:function(){return q.stackSpecificStateManager}}),Object.defineProperty(t,"newStackSpecificToolStateManager",{enumerable:!0,get:function(){return q.newStackSpecificToolStateManager}}),Object.defineProperty(t,"addStackStateManager",{enumerable:!0,get:function(){return q.addStackStateManager}});var G=n(13);Object.defineProperty(t,"loadHandlerManager",{enumerable:!0,get:function(){return st(G).default}});var $=n(26);Object.defineProperty(t,"newImageIdSpecificToolStateManager",{enumerable:!0,get:function(){return $.newImageIdSpecificToolStateManager}}),Object.defineProperty(t,"globalImageIdSpecificToolStateManager",{enumerable:!0,get:function(){return $.globalImageIdSpecificToolStateManager}});var Y=n(121);Object.defineProperty(t,"newFrameOfReferenceSpecificToolStateManager",{enumerable:!0,get:function(){return Y.newFrameOfReferenceSpecificToolStateManager}}),Object.defineProperty(t,"globalFrameOfReferenceSpecificToolStateManager",{enumerable:!0,get:function(){return Y.globalFrameOfReferenceSpecificToolStateManager}});var Z=n(120);Object.defineProperty(t,"appState",{enumerable:!0,get:function(){return st(Z).default}});var K=n(119);Object.defineProperty(t,"stackScrollKeyboard",{enumerable:!0,get:function(){return st(K).default}});var X=n(118);Object.defineProperty(t,"stackScroll",{enumerable:!0,get:function(){return X.stackScroll}}),Object.defineProperty(t,"stackScrollWheel",{enumerable:!0,get:function(){return X.stackScrollWheel}}),Object.defineProperty(t,"stackScrollTouchDrag",{enumerable:!0,get:function(){return X.stackScrollTouchDrag}}),Object.defineProperty(t,"stackScrollMultiTouch",{enumerable:!0,get:function(){return X.stackScrollMultiTouch}});var Q=n(117);Object.defineProperty(t,"stackPrefetch",{enumerable:!0,get:function(){return st(Q).default}});var J=n(116);Object.defineProperty(t,"scrollIndicator",{enumerable:!0,get:function(){return st(J).default}});var ee=n(115);Object.defineProperty(t,"stackRenderers",{enumerable:!0,get:function(){return st(ee).default}});var te=n(113);Object.defineProperty(t,"playClip",{enumerable:!0,get:function(){return te.playClip}}),Object.defineProperty(t,"stopClip",{enumerable:!0,get:function(){return te.stopClip}});var ne=n(15);Object.defineProperty(t,"anyHandlesOutsideImage",{enumerable:!0,get:function(){return st(ne).default}});var re=n(9);Object.defineProperty(t,"drawHandles",{enumerable:!0,get:function(){return st(re).default}});var ie=n(25);Object.defineProperty(t,"getHandleNearImagePoint",{enumerable:!0,get:function(){return st(ie).default}});var ae=n(32);Object.defineProperty(t,"handleActivator",{enumerable:!0,get:function(){return st(ae).default}});var oe=n(38);Object.defineProperty(t,"moveAllHandles",{enumerable:!0,get:function(){return st(oe).default}});var se=n(31);Object.defineProperty(t,"moveHandle",{enumerable:!0,get:function(){return st(se).default}});var le=n(30);Object.defineProperty(t,"moveNewHandle",{enumerable:!0,get:function(){return st(le).default}});var ue=n(28);Object.defineProperty(t,"moveNewHandleTouch",{enumerable:!0,get:function(){return st(ue).default}});var de=n(60);Object.defineProperty(t,"touchMoveAllHandles",{enumerable:!0,get:function(){return st(de).default}});var ce=n(59);Object.defineProperty(t,"touchMoveHandle",{enumerable:!0,get:function(){return st(ce).default}});var fe=n(112);Object.defineProperty(t,"keyboardInput",{enumerable:!0,get:function(){return st(fe).default}});var he=n(111);Object.defineProperty(t,"mouseInput",{enumerable:!0,get:function(){return st(he).default}});var pe=n(110);Object.defineProperty(t,"mouseWheelInput",{enumerable:!0,get:function(){return st(pe).default}});var ge=n(58);Object.defineProperty(t,"preventGhostClick",{enumerable:!0,get:function(){return st(ge).default}});var ve=n(109);Object.defineProperty(t,"touchInput",{enumerable:!0,get:function(){return st(ve).default}});var me=n(108);Object.defineProperty(t,"angle",{enumerable:!0,get:function(){return me.angle}}),Object.defineProperty(t,"angleTouch",{enumerable:!0,get:function(){return me.angleTouch}});var ye=n(107);Object.defineProperty(t,"arrowAnnotate",{enumerable:!0,get:function(){return ye.arrowAnnotate}}),Object.defineProperty(t,"arrowAnnotateTouch",{enumerable:!0,get:function(){return ye.arrowAnnotateTouch}});var be=n(105);Object.defineProperty(t,"crosshairs",{enumerable:!0,get:function(){return be.crosshairs}}),Object.defineProperty(t,"crosshairsTouch",{enumerable:!0,get:function(){return be.crosshairsTouch}});var _e=n(24);Object.defineProperty(t,"displayTool",{enumerable:!0,get:function(){return st(_e).default}});var we=n(57);Object.defineProperty(t,"doubleTapTool",{enumerable:!0,get:function(){return st(we).default}});var Ee=n(104);Object.defineProperty(t,"doubleTapZoom",{enumerable:!0,get:function(){return st(Ee).default}});var Te=n(103);Object.defineProperty(t,"dragProbe",{enumerable:!0,get:function(){return Te.dragProbe}}),Object.defineProperty(t,"dragProbeTouch",{enumerable:!0,get:function(){return Te.dragProbeTouch}});var xe=n(102);Object.defineProperty(t,"ellipticalRoi",{enumerable:!0,get:function(){return xe.ellipticalRoi}}),Object.defineProperty(t,"ellipticalRoiTouch",{enumerable:!0,get:function(){return xe.ellipticalRoiTouch}});var Se=n(101);Object.defineProperty(t,"eraser",{enumerable:!0,get:function(){return Se.eraser}}),Object.defineProperty(t,"eraserTouch",{enumerable:!0,get:function(){return Se.eraserTouch}});var Ce=n(23);Object.defineProperty(t,"freehand",{enumerable:!0,get:function(){return Ce.freehand}});var Oe=n(52);Object.defineProperty(t,"freehandSculpter",{enumerable:!0,get:function(){return Oe.freehandSculpter}});var Pe=n(92);Object.defineProperty(t,"highlight",{enumerable:!0,get:function(){return Pe.highlight}}),Object.defineProperty(t,"highlightTouch",{enumerable:!0,get:function(){return Pe.highlightTouch}});var Ie=n(91);Object.defineProperty(t,"imageStats",{enumerable:!0,get:function(){return st(Ie).default}});var Me=n(61);Object.defineProperty(t,"keyboardTool",{enumerable:!0,get:function(){return st(Me).default}});var Ae=n(90);Object.defineProperty(t,"length",{enumerable:!0,get:function(){return Ae.length}}),Object.defineProperty(t,"lengthTouch",{enumerable:!0,get:function(){return Ae.lengthTouch}});var Le=n(89);Object.defineProperty(t,"magnify",{enumerable:!0,get:function(){return Le.magnify}}),Object.defineProperty(t,"magnifyTouchDrag",{enumerable:!0,get:function(){return Le.magnifyTouchDrag}});var De=n(51);Object.defineProperty(t,"mouseButtonRectangleTool",{enumerable:!0,get:function(){return st(De).default}});var ke=n(10);Object.defineProperty(t,"mouseButtonTool",{enumerable:!0,get:function(){return st(ke).default}});var je=n(29);Object.defineProperty(t,"mouseWheelTool",{enumerable:!0,get:function(){return st(je).default}});var Re=n(36);Object.defineProperty(t,"multiTouchDragTool",{enumerable:!0,get:function(){return st(Re).default}});var Ne=n(88);Object.defineProperty(t,"orientationMarkers",{enumerable:!0,get:function(){return st(Ne).default}});var Ue=n(87);Object.defineProperty(t,"pan",{enumerable:!0,get:function(){return Ue.pan}}),Object.defineProperty(t,"panTouchDrag",{enumerable:!0,get:function(){return Ue.panTouchDrag}});var Be=n(86);Object.defineProperty(t,"panMultiTouch",{enumerable:!0,get:function(){return st(Be).default}});var He=n(85);Object.defineProperty(t,"probe",{enumerable:!0,get:function(){return He.probe}}),Object.defineProperty(t,"probeTouch",{enumerable:!0,get:function(){return He.probeTouch}});var Fe=n(84);Object.defineProperty(t,"rectangleRoi",{enumerable:!0,get:function(){return Fe.rectangleRoi}}),Object.defineProperty(t,"rectangleRoiTouch",{enumerable:!0,get:function(){return Fe.rectangleRoiTouch}});var Ve=n(83);Object.defineProperty(t,"rotate",{enumerable:!0,get:function(){return Ve.rotate}}),Object.defineProperty(t,"rotateTouchDrag",{enumerable:!0,get:function(){return Ve.rotateTouchDrag}});var ze=n(82);Object.defineProperty(t,"rotateTouch",{enumerable:!0,get:function(){return st(ze).default}});var We=n(81);Object.defineProperty(t,"saveAs",{enumerable:!0,get:function(){return st(We).default}});var qe=n(80);Object.defineProperty(t,"scaleOverlayTool",{enumerable:!0,get:function(){return st(qe).default}});var Ge=n(79);Object.defineProperty(t,"seedAnnotate",{enumerable:!0,get:function(){return Ge.seedAnnotate}}),Object.defineProperty(t,"seedAnnotateTouch",{enumerable:!0,get:function(){return Ge.seedAnnotateTouch}});var $e=n(78);Object.defineProperty(t,"simpleAngle",{enumerable:!0,get:function(){return $e.simpleAngle}}),Object.defineProperty(t,"simpleAngleTouch",{enumerable:!0,get:function(){return $e.simpleAngleTouch}});var Ye=n(16);Object.defineProperty(t,"simpleMouseButtonTool",{enumerable:!0,get:function(){return st(Ye).default}});var Ze=n(77);Object.defineProperty(t,"textMarker",{enumerable:!0,get:function(){return Ze.textMarker}}),Object.defineProperty(t,"textMarkerTouch",{enumerable:!0,get:function(){return Ze.textMarkerTouch}});var Ke=n(18);Object.defineProperty(t,"touchDragTool",{enumerable:!0,get:function(){return st(Ke).default}});var Xe=n(50);Object.defineProperty(t,"touchPinchTool",{enumerable:!0,get:function(){return st(Xe).default}});var Qe=n(12);Object.defineProperty(t,"touchTool",{enumerable:!0,get:function(){return st(Qe).default}});var Je=n(76);Object.defineProperty(t,"wwwc",{enumerable:!0,get:function(){return Je.wwwc}}),Object.defineProperty(t,"wwwcTouchDrag",{enumerable:!0,get:function(){return Je.wwwcTouchDrag}});var et=n(75);Object.defineProperty(t,"wwwcRegion",{enumerable:!0,get:function(){return et.wwwcRegion}}),Object.defineProperty(t,"wwwcRegionTouch",{enumerable:!0,get:function(){return et.wwwcRegionTouch}});var tt=n(74);Object.defineProperty(t,"zoom",{enumerable:!0,get:function(){return tt.zoom}}),Object.defineProperty(t,"zoomWheel",{enumerable:!0,get:function(){return tt.zoomWheel}}),Object.defineProperty(t,"zoomTouchPinch",{enumerable:!0,get:function(){return tt.zoomTouchPinch}}),Object.defineProperty(t,"zoomTouchDrag",{enumerable:!0,get:function(){return tt.zoomTouchDrag}});var nt=n(73);Object.defineProperty(t,"brush",{enumerable:!0,get:function(){return nt.brush}});var rt=n(70);Object.defineProperty(t,"adaptiveBrush",{enumerable:!0,get:function(){return rt.adaptiveBrush}});var it=n(69);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return st(it).default}});var at=n(4);Object.defineProperty(t,"setToolOptions",{enumerable:!0,get:function(){return at.setToolOptions}}),Object.defineProperty(t,"getToolOptions",{enumerable:!0,get:function(){return at.getToolOptions}});var ot=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3));function st(e){return e&&e.__esModule?e:{default:e}}t.drawing=ot},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=Math.round(r),o=Math.round(i);if(1===e)return[[a,o]];for(var s=[],l=0,u=-e;u<=e;u++){var d=o+u;if(!(d>t||d<0))for(var c=-e;c<=e;c++){var f=a+c;f>n||f<0||c*c+u*u<e*e&&(s[l++]=[a+c,o+u])}}return s}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.toolType;function n(e){var t=e.detail,n=!1;n=function(e){var t=e.keyCode,n=!1;return 109===t||173===t?(g(),n=!0):61!==t&&107!==t||(p(),n=!0),n}(t)||n,(n=function(e){var t=e.keyCode,n=!1;return 219===t?(m(),n=!0):221===t&&(v(),n=!0),n}(t)||n)&&i.default.cornerstone.updateImage(t.element)}function d(e){var t=S.getConfiguration(),n=i.default.cornerstone.colors.getColormap(t.colormapId);t.draw=e;var r=n.getColor(t.draw);t.hoverColor="rgba("+r[[0]]+", "+r[[1]]+", "+r[[2]]+", 1.0 )",t.dragColor="rgba("+r[[0]]+", "+r[[1]]+", "+r[[2]]+", 0.8 )"}function p(){var e=S.getConfiguration();e.radius=(0,u.default)(e.radius+1,e.minRadius,e.maxRadius)}function g(){var e=S.getConfiguration();e.radius=(0,u.default)(e.radius-1,e.minRadius,e.maxRadius)}function v(){var e=S.getConfiguration(),t=y(),n=e.draw+1;n===t&&(n=0),d(n)}function m(){var e=S.getConfiguration(),t=y(),n=e.draw-1;n<0&&(n=t-1),d(n)}function y(){var e=S.getConfiguration();return i.default.cornerstone.colors.getColormap(e.colormapId).getNumberOfColors()}function b(t){e.onMouseMove(t)}function _(t){var n=t.detail.element;e.onMouseUp(t),n.removeEventListener(r.default.MOUSE_DRAG,b),n.removeEventListener(r.default.MOUSE_DRAG,w),n.removeEventListener(r.default.MOUSE_UP,_),n.removeEventListener(r.default.MOUSE_CLICK,_)}function w(t){return e.onDrag(t),!1}function E(t){e.onMouseDoubleClick(t)}function T(n){var i=n.detail,a=i.element,o=(0,l.getToolOptions)(t,a);if((0,s.default)(i.which,o.mouseButtonMask))return a.addEventListener(r.default.MOUSE_DRAG,w),a.addEventListener(r.default.MOUSE_UP,_),a.addEventListener(r.default.MOUSE_CLICK,_),a.addEventListener(r.default.MOUSE_DOUBLE_CLICK,E),e.onMouseDown(n),!1;a.addEventListener(r.default.MOUSE_DRAG,b),a.addEventListener(r.default.MOUSE_UP,_)}function x(t){var n=t.detail,r=n.element,o=(0,a.getToolState)(r,c),s=void 0;o?s=o.data[0].pixelData:(s=new Uint8ClampedArray(n.image.width*n.image.height),(0,a.addToolState)(r,c,{pixelData:s}));var l=i.default.cornerstone.getLayer(n.element,f);l.image.setPixelData(s),l.invalid=!0,i.default.cornerstone.updateImage(r),e.onImageRendered(t)}var S=(0,o.default)({mouseMoveCallback:b,mouseDownActivateCallback:T,onImageRendered:x,deactivate:function(e){e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,x),e.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,T),e.removeEventListener(r.default.MOUSE_MOVE,b),e.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,E),e.removeEventListener(r.default.KEY_DOWN,n),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,x),S.getConfiguration().active=!1}});return S.keyDownCallback=n,S.activate=function(e,o){(0,l.setToolOptions)(t,e,{mouseButtonMask:o}),e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,x),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,x),e.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,T),e.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,T),e.removeEventListener(r.default.MOUSE_MOVE,b),e.addEventListener(r.default.MOUSE_MOVE,b),e.removeEventListener(r.default.KEY_DOWN,n),e.addEventListener(r.default.KEY_DOWN,n);var s=i.default.cornerstone.getEnabledElement(e),u=s.image,d=u.width,p=u.height,g=new Uint8ClampedArray(d*p),v=S.getConfiguration();v.active=!0;var m=v.colormapId;if(!m){var y=S.getConfiguration();(function(e){var t=i.default.cornerstone.colors.getColormap(e);t.setNumberOfColors(20),t.setColor(0,[255,255,255,0]),t.setColor(1,[230,25,75,102]),t.setColor(2,[60,180,175,102]),t.setColor(3,[255,225,25,102]),t.setColor(4,[0,130,200,102]),t.setColor(5,[245,130,48,102]),t.setColor(6,[145,30,180,102]),t.setColor(7,[70,240,240,102]),t.setColor(8,[240,50,230,102]),t.setColor(9,[210,245,60,102]),t.setColor(10,[250,190,190,102]),t.setColor(11,[0,128,128,102]),t.setColor(12,[230,190,255,102]),t.setColor(13,[170,110,40,102]),t.setColor(14,[255,250,200,102]),t.setColor(15,[128,0,0,102]),t.setColor(16,[170,255,195,102]),t.setColor(17,[128,128,0,102]),t.setColor(18,[255,215,180,102]),t.setColor(19,[0,0,128,102])})(m="BrushColorMap"),y.colormapId=m}var _={minPixelValue:0,maxPixelValue:1,slope:1,intercept:0,getPixelData:function(){return g},rows:s.image.height,columns:s.image.width,height:p,width:d,pixelData:g,setPixelData:function(e){g=e},colormap:m,color:!1,rgba:!1,labelmap:!0,invert:!1,columnPixelSpacing:1,rowPixelSpacing:1,sizeInBytes:s.image.width*s.image.height},w=void 0;h||(h=i.default.cornerstone.addLayer(e,i.default.cornerstone.getEnabledElement(e).image)),f&&(w=i.default.cornerstone.getLayer(e,f)),w||(f=i.default.cornerstone.addLayer(e,_,{viewport:{pixelReplication:!0}})),(0,a.addToolState)(e,c,{pixelData:g}),v.brushLayerId=f,S.setConfiguration(v),i.default.cornerstone.updateImage(e)},S.changeDrawColor=d,S.increaseRadius=p,S.decreaseRadius=g,S.nextSegmentation=v,S.previousSegmentation=m,S};var r=d(n(1)),i=d(n(0)),a=n(2),o=d(n(10)),s=d(n(5)),l=n(4),u=d(n(8));function d(e){return e&&e.__esModule?e:{default:e}}var c="brush",f=void 0,h=void 0},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function(t){t.removeEventListener(i.default.TOUCH_PINCH,e),t.addEventListener(i.default.TOUCH_PINCH,e)},disable:function(t){t.removeEventListener(i.default.TOUCH_PINCH,e)},enable:function(t){t.removeEventListener(i.default.TOUCH_PINCH,e)},deactivate:function(t){t.removeEventListener(i.default.TOUCH_PINCH,e)}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.toolType;function p(i){var a=i.detail,o=a.element,s=(0,h.getToolOptions)(n,o);if((0,c.default)(a.which,s.mouseButtonMask))return function(i){var a=i.element,o=e.createNewMeasurement(i);o&&((0,f.addToolState)(i.element,n,o),a.removeEventListener(r.default.MOUSE_MOVE,g),(0,l.default)(i,n,o,o.handles.end,function(){o.active=!1,(0,d.default)(i,o.handles)&&(0,f.removeToolState)(i.element,n,o),a.addEventListener(r.default.MOUSE_MOVE,g)},t))}(a),!1}function g(t){var r=t.detail;a.default.setCoords(r);var o=(0,f.getToolState)(r.element,n);if(void 0!==o){for(var l=!1,u=r.currentPoints.canvas,d=0;d<o.data.length;d++){var c=o.data[d];!0===(0,s.default)(r.element,c.handles,u)&&(l=!0),(e.pointInsideRect(r.element,c,u)&&!c.active||!e.pointInsideRect(r.element,c,u)&&c.active)&&(c.active=!c.active,l=!0)}!0===l&&i.default.cornerstone.updateImage(r.element)}}function v(a){var s=a.detail,p=s.element,v=i.default.cornerstone,m=void 0,y=(0,h.getToolOptions)(n,p);if((0,c.default)(s.which,y.mouseButtonMask)){var b=s.startPoints.canvas,_=(0,f.getToolState)(a.currentTarget,n),w=void 0;if(void 0!==_)for(w=0;w<_.data.length;w++){m=_.data[w];var E=(0,o.default)(s.element,m.handles,b,25);if(void 0!==E)return p.removeEventListener(r.default.MOUSE_MOVE,g),m.active=!0,(0,l.default)(s,n,m,E,x,t),a.stopImmediatePropagation(),!1}var T={deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:t};if(void 0!==_&&void 0!==e.pointInsideRect)for(w=0;w<_.data.length;w++)if(m=_.data[w],e.pointInsideRect(s.element,m,b))return p.removeEventListener(r.default.MOUSE_MOVE,g),(0,u.default)(a,m,_,n,T,x),p.addEventListener(r.default.MOUSE_MOVE,g),a.stopImmediatePropagation(),!1}function x(){m.active=!1,(0,d.default)(s,m.handles)&&(0,f.removeToolState)(s.element,n,m),v.updateImage(s.element),p.addEventListener(r.default.MOUSE_MOVE,g)}}return{enable:function(t){t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,g),t.removeEventListener(r.default.MOUSE_DOWN,v),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),t.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.default.cornerstone.updateImage(t)},disable:function(t){t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,g),t.removeEventListener(r.default.MOUSE_DOWN,v),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),i.default.cornerstone.updateImage(t)},activate:function(t,a){(0,h.setToolOptions)(n,t,{mouseButtonMask:a}),t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,g),t.removeEventListener(r.default.MOUSE_DOWN,v),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),t.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,g),t.addEventListener(r.default.MOUSE_DOWN,v),t.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),i.default.cornerstone.updateImage(t)},deactivate:function(t,a){(0,h.setToolOptions)(n,t,{mouseButtonMask:a}),t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,g),t.removeEventListener(r.default.MOUSE_DOWN,v),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),t.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,g),t.addEventListener(r.default.MOUSE_DOWN,v),i.default.cornerstone.updateImage(t)}}};var r=p(n(1)),i=p(n(0)),a=p(n(39)),o=p(n(25)),s=p(n(32)),l=p(n(31)),u=p(n(38)),d=p(n(15)),c=p(n(5)),f=n(2),h=n(4);function p(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.freehandSculpter=void 0;var r=p(n(1)),i=p(n(0)),a=n(23),o=p(n(7)),s=p(n(9)),l=p(n(5)),u=n(2),d=n(4),c=n(8),f=n(55),h=n(53);function p(e){return e&&e.__esModule?e:{default:e}}var g=new(n(93).Sculpter),v="freehandSculpter",m="freehand",y={mouseLocation:{handles:{start:{highlight:!0,active:!0}}},keyDown:{shift:!1,ctrl:!1,alt:!1},active:!1,minSpacing:5,maxSpacing:20,toolSizeImage:null,toolSizeCanvas:null,currentTool:null,color:o.default.getActiveColor()};function b(e){var t=e.detail,n=t.element,a=(0,d.getToolOptions)(v,n),o=P.getConfiguration(),s=!1;if(!(0,l.default)(t.which,a.mouseButtonMask))return e.stopPropagation(),void e.preventDefault();t.event.ctrlKey?(function(e){var t=P.getConfiguration(),n=e.element,r=new h.FreehandLineFinder(e).findTool();t.currentTool=r,function(e,t){for(var n=(0,u.getToolState)(e,m),r=0;r<n.data.length;r++)n.data[r].active=r===t}(n,r)}(t),s=!0):null!==o.currentTool&&(function(e){var t=P.getConfiguration(),n=e.element;(function(e){for(var t=P.getConfiguration(),n=t.currentTool,r=(0,u.getToolState)(e.element,m).data[n].handles,a=e.currentPoints.image,o=e.currentPoints.canvas,s=1/0,l=1/0,d=0;d<r.length;d++){var c=r[d],f=i.default.cornerstoneMath.point.distance(c,a);if(f<s){s=f;var h=i.default.cornerstone.pixelToCanvas(e.element,r[d]);l=i.default.cornerstoneMath.point.distance(h,o)}}t.toolSizeImage=s,t.toolSizeCanvas=l})(e),t.active=!0,x(e),n.addEventListener(r.default.MOUSE_UP,w),n.addEventListener(r.default.MOUSE_CLICK,w),n.addEventListener(r.default.MOUSE_DRAG,_)}(t),s=!0),s&&i.default.cornerstone.updateImage(t.element)}function _(e){var t=e.detail,n=(0,u.getToolState)(t.element,m);if(n){var r=P.getConfiguration(),a=n.data[r.currentTool].handles;x(t),g.sculpt(t,a),i.default.cornerstone.updateImage(t.element)}}function w(e){var t=e.detail,n=t.element,a=P.getConfiguration();n.removeEventListener(r.default.MOUSE_UP,w),n.removeEventListener(r.default.MOUSE_DRAG,_),n.removeEventListener(r.default.MOUSE_CLICK,w),a.active=!1,e.preventDefault(),e.stopPropagation(),function(e){var t=P.getConfiguration(),n=e.element;(0,u.getToolState)(n,m).data[t.currentTool].invalidated=!0,i.default.cornerstone.updateImage(n)}(t)}function E(e){T(e.detail.element)}function T(e){var t=P.getConfiguration(),n=(0,u.getToolState)(e,m);if(t.currentTool=null,n)for(var r=0;r<n.data.length;r++)n.data[r].active=!1;i.default.cornerstone.updateImage(e)}function x(e){var t=P.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,c.clipToBox)(t.mouseLocation.handles.start,e.image)}function S(e){var t=e.detail,n=t.canvasContext.canvas.getContext("2d"),r=P.getConfiguration();if(r.active){var i={fill:null,handleRadius:r.toolSizeCanvas};(0,s.default)(n,t,r.mouseLocation.handles,r.color,i)}}function C(e){T(e),O(e)}function O(e){e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,S),e.removeEventListener(r.default.MOUSE_DOWN,b),e.removeEventListener(r.default.MOUSE_DRAG,_),e.removeEventListener(r.default.MOUSE_UP,w),e.removeEventListener(r.default.KEY_DOWN,f.keyDownCallback),e.removeEventListener(r.default.KEY_UP,f.keyUpCallback),e.removeEventListener(i.default.cornerstone.EVENTS.NEW_IMAGE,E)}var P={enable:function(e){C(e)},disable:C,activate:function(e,t){(0,d.setToolOptions)(v,e,{mouseButtonMask:t}),a.freehand.enable(e),O(e),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,S),e.addEventListener(r.default.MOUSE_DOWN,b),e.addEventListener(r.default.KEY_DOWN,f.keyDownCallback),e.addEventListener(r.default.KEY_UP,f.keyUpCallback),e.addEventListener(i.default.cornerstone.EVENTS.NEW_IMAGE,E),e.focus(),i.default.cornerstone.updateImage(e)},deactivate:function(e){C(e)},getConfiguration:function(){return y},setConfiguration:function(e){y=e}};t.freehandSculpter=P},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FreehandLineFinder=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),o=(r=n(0))&&r.__esModule?r:{default:r},s=n(97);t.FreehandLineFinder=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventData=t}return i(e,[{key:"findLine",value:function(){var e=this.findTool();if(null===e)return null;var t=this._getCloseLinesInTool(e);return t?this._findCorrectLine(e,t):null}},{key:"findTool",value:function(){return this._toolData=(0,a.getToolState)(this._eventData.element,"freehand"),this._mousePoint=this._eventData.currentPoints.canvas,this._toolData?this._nearestHandleToPointAllTools().toolIndex:null}},{key:"_nearestHandleToPointAllTools",value:function(){for(var e=this._toolData,t={toolIndex:null,handleIndex:null,distance:1/0},n=0;n<e.data.length;n++){var r=this._nearestHandleToPoint(n);null!==r&&r.distance<t.distance&&(t=r)}return t}},{key:"_nearestHandleToPoint",value:function(e){var t=this._eventData,n=this._toolData.data[e];if(void 0===n.handles)return null;if(!1===n.visible)return null;for(var r={toolIndex:e,handleIndex:null,distance:1/0},i=0;i<n.handles.length;i++){var a=o.default.cornerstone.pixelToCanvas(t.element,n.handles[i]),s=o.default.cornerstoneMath.point.distance(a,this._mousePoint);s<r.distance&&(r.handleIndex=i,r.distance=s)}return r}},{key:"_getCloseLinesInTool",value:function(t){for(var n=this._toolData.data[t].handles,r=[],i=0;i<n.length;i++){var a=e.getNextHandleIndex(i,n.length);this._distanceOfPointfromLine(n[i],n[a])<10&&r.push([i,a])}return r}},{key:"_findCorrectLine",value:function(e,t){for(var n=0;n<t.length;n++)if(this._pointProjectsToLineSegment(e,t[n]))return new s.ClickedLineData(e,t[n]);return null}},{key:"_pointProjectsToLineSegment",value:function(t,n){var r=this._eventData,i=this._toolData.data[t];if(void 0!==i.handles){if(!1===i.visible)return!1;var a=i.handles[n[0]],o=i.handles[n[1]],s=e.getCanvasPointsFromHandles(a,o,r.element),l=e.getLineAsVector(s),u=this._getLineOriginToMouseAsVector(s),d=(u[0]*l[0]+u[1]*l[1])/l.magnitude;return d>0&&d<l.magnitude}}},{key:"_getLineOriginToMouseAsVector",value:function(e){return[this._mousePoint.x-e[0].x,this._mousePoint.y-e[0].y]}},{key:"_distanceOfPointfromLine",value:function(e,t){var n=this._eventData,r=o.default.cornerstone.pixelToCanvas(n.element,e),i=o.default.cornerstone.pixelToCanvas(n.element,t),a=this._mousePoint;return Math.abs((i.y-r.y)*a.x-(i.x-r.x)*a.y+i.x*r.y-i.y*r.x)/o.default.cornerstoneMath.point.distance(r,i)}}],[{key:"getCanvasPointsFromHandles",value:function(e,t,n){var r=[];return e.x<t.x?(r.push(o.default.cornerstone.pixelToCanvas(n,e)),r.push(o.default.cornerstone.pixelToCanvas(n,t))):(r.push(o.default.cornerstone.pixelToCanvas(n,t)),r.push(o.default.cornerstone.pixelToCanvas(n,e))),r}},{key:"getLineAsVector",value:function(e){var t=[e[1].x-e[0].x,e[1].y-e[0].y];return t.magnitude=o.default.cornerstoneMath.point.distance(e[0],e[1]),t}},{key:"getNextHandleIndex",value:function(e,t){return e<t-1?e+1:0}}]),e}()},function(e,t,n){function r(e,t,n,r){for(var o=e.length-1,s=0;s<e.length;s++)if(-1===r.indexOf(s)&&-1===r.indexOf(o)){if(i(t,n,a(e[o]),a(e[s])))return!0;o=s}else o=s;return!1}function i(e,t,n,r){var i=!1,a=[o(e,t,n),o(e,t,r),o(n,r,e),o(n,r,t)];return a[0]!==a[1]&&a[2]!==a[3]||(0===a[0]&&s(e,n,t)?i=!0:0===a[1]&&s(e,r,t)?i=!0:0===a[2]&&s(n,e,r)?i=!0:0===a[3]&&s(n,t,r)&&(i=!0),i)}function a(e){return{x:e.x,y:e.y}}function o(e,t,n){var r=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);return 0===r?0:r>0?1:2}function s(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}Object.defineProperty(t,"__esModule",{value:!0});var l={newHandle:function(e,t){var n=t.length-1;return r(t,a(t[n]),a(e),[n])},end:function(e){var t=e.length-1;return r(e,a(e[t]),a(e[0]),[t,0])},modify:function(e,t){var n=a(e[t]),i=t-1;0===t&&(i=e.length-1);var o=a(e[i]);return!!r(e,n,o,[t,i])||r(e,n,o=a(e[i=t===e.length-1?0:t+1]),[t,i])}};t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.keyDownCallback=function(e){var t=e.detail,n=a.freehand.getConfiguration(),r=t.keyCode,s=!1;r===o.CTRL&&(n.keyDown.ctrl=!0,s=!0),r===o.SHIFT&&(n.keyDown.shift=!0),r===o.ALT&&(n.keyDown.alt=!0),s&&i.default.cornerstone.updateImage(t.element)},t.keyUpCallback=function(e){var t=e.detail,n=a.freehand.getConfiguration(),r=t.keyCode,s=!1;r===o.CTRL&&(n.keyDown.ctrl=!1,s=!0),r===o.SHIFT&&(n.keyDown.shift=!1),r===o.ALT&&(n.keyDown.alt=!1),s&&i.default.cornerstone.updateImage(t.element)};var r,i=(r=n(0))&&r.__esModule?r:{default:r},a=n(23),o={SHIFT:16,CTRL:17,ALT:18}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t)throw new Error("simpleTouchTool: toolType is required");var n={};return{activate:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.setToolOptions)(t,n,r),n.removeEventListener(i.default.TOUCH_START,e),n.addEventListener(i.default.TOUCH_START,e)},disable:function(t){t.removeEventListener(i.default.TOUCH_START,e)},enable:function(t){t.removeEventListener(i.default.TOUCH_START,e)},deactivate:function(t){t.removeEventListener(i.default.TOUCH_START,e)},getConfiguration:function(){return n},setConfiguration:function(e){n=e}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r},a=n(4)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function(t){t.removeEventListener(i.default.DOUBLE_TAP,e),t.addEventListener(i.default.DOUBLE_TAP,e)},disable:function(t){t.removeEventListener(i.default.DOUBLE_TAP,e)},enable:function(t){t.removeEventListener(i.default.DOUBLE_TAP,e)},deactivate:function(t){t.removeEventListener(i.default.DOUBLE_TAP,e)}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=2e3,i={mouse:0,touch:1},a=void 0,o=void 0;function s(e,t){var n=Date.now();if(e!==a){if(n-o<=r)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1;a=e}o=n}var l=s.bind(null,i.mouse),u=s.bind(null,i.touch);function d(e,t,n){var r=n?l:u;t.forEach(function(t){e.addEventListener(t,r)})}function c(e,t,n){var r=n?l:u;t.forEach(function(t){e.removeEventListener(t,r)})}var f=["mousedown","mouseup"],h=["touchstart","touchend"];function p(e){c(e,f,i.mouse),c(e,h,i.touch)}var g={enable:function(e){p(e),d(e,f,i.mouse),d(e,h,i.touch)},disable:p};t.default=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,u){s.value=!0;var d=e.detail,c=i.default.cornerstone,f=d.element,h=c.getEnabledElement(f),p=((new Date).getTime(),-57),g={x:d.currentPoints.page.x,y:d.currentPoints.page.y+p},v=c.pageToPixel(f,g.x,g.y);function m(e){var i=e.detail;s.value=!1,!1===o.hasMoved&&(o.hasMoved=!0),o.active=!0;var l=i.currentPoints,u={x:l.page.x,y:l.page.y+p};v=c.pageToPixel(f,u.x,u.y),o.x=v.x,o.y=v.y,c.updateImage(f);var d=r.default.MEASUREMENT_MODIFIED,h={toolType:t,element:f,measurementData:n};(0,a.default)(f,d,h)}function y(e){var t=e.detail;s.value=!1,o.active=!1,f.removeEventListener(r.default.TOUCH_DRAG,m),l.forEach(function(e){f.removeEventListener(e,y)}),c.updateImage(f),e.type===r.default.TOUCH_PRESS&&(t.handlePressed=n,o.x=d.currentPoints.image.x,o.y=d.currentPoints.image.y),"function"==typeof u&&u(e)}f.addEventListener(r.default.TOUCH_DRAG,m),l.forEach(function(e){f.addEventListener(e,y)}),function e(t,n,r,a,o){if(r.value){var s=i.default.cornerstone,l=(new Date).getTime(),u=Math.abs(n.y-o.y),d=u/10;if(u<1)return n.y=o.y,void(r.value=!1);n.y>o.y?n.y-=d:n.y<o.y&&(n.y+=d),s.updateImage(a.element),s.requestAnimationFrame(function(){e(l,n,r,a,o)})}}(0,o,s,h,v)};var r=o(n(1)),i=o(n(0)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}var s={value:!1},l=[r.default.TOUCH_END,r.default.TOUCH_DRAG_END,r.default.TOUCH_PINCH,r.default.TOUCH_PRESS,r.default.TAP]},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l,u,d){var c=e.detail.element,f=i.default.cornerstone;function h(e){var n=e.detail;t.active=!0,Object.keys(t.handles).forEach(function(e){var r=t.handles[e];!0!==r.movesIndependently&&(r.x+=n.deltaPoints.image.x,r.y+=n.deltaPoints.image.y)}),f.updateImage(c);var i=r.default.MEASUREMENT_MODIFIED,a={toolType:l,element:c,measurementData:t};(0,s.default)(c,i,a),e.preventDefault(),e.stopPropagation()}function p(e){var n=e.detail;t.active=!1,t.invalidated=!1,c.removeEventListener(r.default.TOUCH_DRAG,h),c.removeEventListener(r.default.TOUCH_PINCH,p),c.removeEventListener(r.default.TOUCH_PRESS,p),c.removeEventListener(r.default.TOUCH_END,p),c.removeEventListener(r.default.TOUCH_DRAG_END,p),c.removeEventListener(r.default.TAP,p);var i=(0,a.default)(n,t.handles);!0===u&&!0===i&&(0,o.removeToolState)(c,l,t),f.updateImage(c),"function"==typeof d&&d(e)}return c.addEventListener(r.default.TOUCH_DRAG,h),c.addEventListener(r.default.TOUCH_PINCH,p),c.addEventListener(r.default.TOUCH_PRESS,p),c.addEventListener(r.default.TOUCH_END,p),c.addEventListener(r.default.TOUCH_DRAG_END,p),c.addEventListener(r.default.TAP,p),!0};var r=l(n(1)),i=l(n(0)),a=l(n(15)),o=n(2),s=l(n(6));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return{activate:function(t){t.removeEventListener(i.default.KEY_DOWN,e),t.addEventListener(i.default.KEY_DOWN,e)},disable:function(t){t.removeEventListener(i.default.KEY_DOWN,e)},enable:function(t){t.removeEventListener(i.default.KEY_DOWN,e)},deactivate:function(t){t.removeEventListener(i.default.KEY_DOWN,e)},getConfiguration:function(){return t},setConfiguration:function(e){t=e}}};var r,i=(r=n(1))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0,r=0,a=0,o=0,s=t.top;s<t.top+t.height;s++)for(var l=t.left;l<t.left+t.width;l++){var u={x:l,y:s};(0,i.default)(t,u)&&(n+=e[o],r+=e[o]*e[o],a++),o++}if(0===a)return{count:a,mean:0,variance:0,stdDev:0};var d=n/a,c=r/a-d*d;return{count:a,mean:d,variance:c,stdDev:Math.sqrt(c)}};var r,i=(r=n(42))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,a){var o=Math.atan2(n.y-t.y,n.x-t.x),s={color:i,lineWidth:a};(0,r.drawLine)(e,void 0,t,n,s,"canvas"),s={color:i,lineWidth:a,fillStyle:i};var l=[{x:n.x-10*Math.cos(o-Math.PI/7),y:n.y-10*Math.sin(o-Math.PI/7)},{x:n.x-10*Math.cos(o+Math.PI/7),y:n.y-10*Math.sin(o+Math.PI/7)},n];(0,r.drawJoinedLines)(e,void 0,n,l,s,"canvas")};var r=n(3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){if(!e)throw new Error("getLuminance: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);var o=i.default.cornerstone.getEnabledElement(e).image,s=[],l=0,u=o.getPixelData(),d=void 0,c=void 0,f=void 0;if(o.color)for(c=0;c<a;c++)for(f=0;f<r;f++){var h=u[d=4*((c+n)*o.columns+(f+t))],p=u[d+1],g=u[d+2];s[l++]=.2126*h+.7152*p+.0722*g}else for(c=0;c<a;c++)for(f=0;f<r;f++)d=(c+n)*o.columns+(f+t),s[l++]=u[d]*o.slope+o.intercept;return s};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.getToolState)(e,"stack");if(n&&n.data&&n.data.length){var u=i.default.cornerstone,d=void 0;if(n.data.length>1){var c=(0,a.getToolState)(e,"stackRenderer");c&&c.data&&c.data.length&&(d=c.data[0])}var f=n.data[0];t<0&&(t+=f.imageIds.length);var h=s.default.getStartLoadHandler(),p=s.default.getEndLoadHandler(),g=s.default.getErrorLoadingHandler();if(t!==f.currentImageIdIndex){h&&h(e);var v={newImageIdIndex:t,direction:t-f.currentImageIdIndex};f.currentImageIdIndex=t;var m=f.imageIds[t];(Boolean(f.preventCache)?u.loadImage(m):u.loadAndCacheImage(m)).then(function(r){if(f.currentImageIdIndex===t){try{u.getEnabledElement(e)}catch(e){return}d?(d.currentImageIdIndex=t,d.render(e,n.data)):u.displayImage(e,r),p&&p(e,r)}},function(n){var r=f.imageIds[t];g&&g(e,r,n)}),o.default.startGrabbing(),(0,l.default)(e,r.default.STACK_SCROLL,v)}}};var r=u(n(1)),i=u(n(0)),a=n(2),o=u(n(45)),s=u(n(13)),l=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(142)),i=a(n(141));function a(e){return e&&e.__esModule?e:{default:e}}var o={getOrientationString:r.default,invertOrientationString:i.default};t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l){var u=r.default.cornerstone,d=u.getEnabledElement(n).image,c=u.getEnabledElement(l).image;if(d&&c){var f=u.metaData.get("imagePlaneModule",d.imageId),h=u.metaData.get("imagePlaneModule",c.imageId);if(f&&h&&f.rowCosines&&f.columnCosines&&f.imagePositionPatient&&h.rowCosines&&h.columnCosines&&h.imagePositionPatient&&f.frameOfReferenceUID===h.frameOfReferenceUID){f.rowCosines=(0,o.default)(f.rowCosines),f.columnCosines=(0,o.default)(f.columnCosines),f.imagePositionPatient=(0,o.default)(f.imagePositionPatient),h.rowCosines=(0,o.default)(h.rowCosines),h.columnCosines=(0,o.default)(h.columnCosines),h.imagePositionPatient=(0,o.default)(h.imagePositionPatient);var p=f.rowCosines.clone().cross(f.columnCosines),g=h.rowCosines.clone().cross(h.columnCosines),v=p.angleTo(g);if(!((v=Math.abs(v))<.5)){var m=(0,i.default)(f,h);if(m){var y=a.default.getActiveColor();e.setTransform(1,0,0,1,0,0),(0,s.draw)(e,function(e){(0,s.drawLine)(e,t.element,m.start,m.end,{color:y})})}}}}};var r=l(n(0)),i=l(n(68)),a=l(n(7)),o=l(n(19)),s=n(3);function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.planePlaneIntersection)(e,t);if(n)return{start:(0,r.projectPatientPointToImagePlane)(n.start,e),end:(0,r.projectPatientPointToImagePlane)(n.end,e)}};var r=n(46)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default="2.4.0"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.adaptiveBrush=void 0;var r=l(n(0)),i=n(2),a=l(n(49)),o=l(n(48)),s=n(34);function l(e){return e&&e.__esModule?e:{default:e}}var u="brush",d={draw:1,radius:5,tolerance:5,minRadius:1,maxRadius:20,hoverColor:"rgba(230, 25, 75, 1.0)",dragColor:"rgba(230, 25, 75, 0.8)",active:!1},c=void 0,f=void 0,h=void 0,p=void 0,g=void 0;function v(e){var t=y.getConfiguration(),n=e.element,a=r.default.cornerstone.getLayer(n,t.brushLayerId),l=r.default.cornerstone.getLayers(n)[0],d=a.image,g=d.rows,v=d.columns,m=(0,i.getToolState)(n,u).data[0];p=function(e,t,n,r){for(var i=y.getConfiguration(),a=i.draw,l=Math.round(c.x),u=Math.round(c.y),d=null,p=[],g=i.radius;0!==d&&g>i.minRadius;){d=0,p=(0,o.default)(g,n,r,l,u);for(var v=0;v<p.length;v++){var m=p[v][0],b=e[p[v][1]*r+m];if(b>f||b<h){d++;break}}g--}return 0===d&&(0,s.drawBrushPixels)(p,t,a,r),g}(l.image.getPixelData(),m.pixelData,g,v),a.invalid=!0,r.default.cornerstone.updateImage(n)}function m(e){var t=y.getConfiguration(),n=e.element,a=r.default.cornerstone.getLayer(n,t.brushLayerId),l=a.image,d=l.rows,c=l.columns,f=e.currentPoints.image,h=f.x,p=f.y,g=(0,i.getToolState)(n,u).data[0].pixelData,v=t.draw,m=t.radius;if(!(h<0||h>c||p<0||p>d)){var b=(0,o.default)(m,d,c,h,p);(0,s.drawBrushPixels)(b,g,v,c),a.invalid=!0,r.default.cornerstone.updateImage(n)}}var y=(0,a.default)({onMouseMove:function(e){var t=e.detail;c=t.currentPoints.image,r.default.cornerstone.updateImage(t.element)},onMouseDown:function(e){var t=e.detail,n=t.element,i=y.getConfiguration(),a=r.default.cornerstone.getLayer(n,i.brushLayerId),s=r.default.cornerstone.getLayers(n)[0],l=t.currentPoints.image,u=l.x,d=l.y,p=a.image,b=p.rows,_=p.columns,w=(0,o.default)(i.radius,b,_,u,d);0===i.draw?m(t):(function(e,t,n){var r=y.getConfiguration().tolerance,i=Number.MAX_VALUE,a=-Number.MAX_VALUE;e.forEach(function(e){var r=e[1]*n+e[0],o=t[r];i=Math.min(o,i),a=Math.max(o,a)}),h=i-r,f=a+r}(w,s.image.getPixelData(),_),v(t)),g=!0,c=t.currentPoints.image},onMouseUp:function(e){var t=e.detail;c=t.currentPoints.image;var n=y.getConfiguration();g=!1,p=n.radius,r.default.cornerstone.updateImage(t.element)},onDrag:function(e){var t=e.detail;0===d.draw?m(t):v(t),g=!0,c=t.currentPoints.image},toolType:"adaptiveBrush",onImageRendered:function(e){var t=e.detail;if(c){var n=t.image,r=n.rows,i=n.columns,a=c,l=a.x,u=a.y;if(!(l<0||l>i||u<0||u>r)){var d=y.getConfiguration(),f=t.canvasContext,h=g?d.dragColor:d.hoverColor,v=t.element;if(p=g&&p||d.radius,f.setTransform(1,0,0,1,0,0),d.active){var m=(0,o.default)(p,r,i,l,u);(0,s.drawBrushOnCanvas)(m,f,h,v)}}}}});y.setConfiguration(d),t.adaptiveBrush=y},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Queue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store={},this.front=0,this.end=0}return r(e,[{key:"enqueue",value:function(e){this.store[this.end]=e,this.end++}},{key:"dequeue",value:function(){if(this.front===this.end)return null;var e=this.store[this.front];return delete this.store[this.front],this.front++,e}},{key:"size",value:function(){return this.end-this.front}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.fillColor=t.isCircleInPolygon=t.connectEndsOfBrush=t.getEndOfCircle=void 0;var r=n(34),i=n(71);function a(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e;e<t?a<=t:a>=t;a+=e<t?1:-1){if(i&&n(r,a))return a;if(!i&&n(a,r))return a}return null}function o(e,t,n){return t[e]===n}function s(e,t,n,r,a,s){var l=e,u=t,d=0,c=new i.Queue,f=[],h=[0,1,0,-1],p=[-1,0,1,0],g=0,v=function(e,t){return t*n+e};c.enqueue({x:e,y:t});for(var m=0;m<r*n;m+=1)f.push(0);for(f[v(e,t)]=1;0!==c.size()&&g<=r*n;){g+=1;var y=c.dequeue(),b=v(y.x,y.y);if(d<f[b]){var _=[y.x,y.y,f[b]];l=_[0],u=_[1],d=_[2]}for(var w=0;w<4;w+=1){var E=y.y+p[w],T=y.x+h[w],x=v(T,E);E<0||E>=r||T<0||T>=n||o(x,a,s)&&0===f[x]&&(f[x]=f[b]+1,c.enqueue({x:T,y:E}))}}return{x:l,y:u}}function l(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],a=e;e<t?a<=t:a>=t;a+=e<t?1:-1)i.push(r?[n,a]:[a,n]);return i}t.getEndOfCircle=function(e,t,n,r,i,s){var l=function(e,t){return t*n+e};return[a(t,0,function(e,t){return!o(l(e,t-1),i,s)},e,!0),a(e,n,function(e,t){return!o(l(e+1,t),i,s)},t,!1),a(t,r,function(e,t){return!o(l(e,t+1),i,s)},e,!0),a(e,0,function(e,t){return!o(l(e-1,t),i,s)},t,!1)]},t.connectEndsOfBrush=function(e,t,n,i,u,d,c){var f=function(e,t,i){return(0,r.drawBrushPixels)([[e,t]],d,i,n)},h=function(e,t){return(0,r.drawBrushPixels)(e,d,t,n)},p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(e,t,n,r,i,s,l){for(var u=[0,1,0,-1],d=[-1,0,1,0],c=Number.MAX_SAFE_INTEGER,f=-1,h=void 0,p=void 0,g=void 0,v=function(e,t){return t*n+e},m=function(m){var y=void 0,b=void 0,_=void 0;if(m%2){if(y=t,null===(b=a(i[m]+u[m],1===m?n:0,function(e,t){return o(v(e,t),s,l)},y,!1)))return"continue";_=a(b+u[m],1===m?n:0,function(e,t){return!o(v(e+u[m],t+d[m]),s,l)},y,!1)}else{if(y=e,null===(b=a(i[m]+d[m],0===m?0:r,function(e,t){return o(v(e,t),s,l)},y,!0)))return"continue";_=a(b+d[m],0===m?0:r,function(e,t){return!o(v(e+u[m],t+d[m]),s,l)},y,!0)}var w=Math.abs(b-(m%2?e:t));c>w&&(c=w,f=m,h=y,p=b,g=_)},y=0;y<i.length;y++)m(y);return c===Number.MAX_SAFE_INTEGER?[null,null,null,null]:[f,h,p,g]}(e,t,n,i,u,d,c),4),g=p[0],v=p[1],m=p[2],y=p[3],b=[];if(null===g)return!1;if(h(l(m,y,v,!(g%2)),0),g%2){var _=s(m,v-1,n,i,d,c),w=s(m,v+1,n,i,d,c);b.push(_),b.push(w)}else{var E=s(v-1,m,n,i,d,c),T=s(v+1,m,n,i,d,c);b.push(E),b.push(T)}if(h(l(m,y,v,!(g%2)),c),b.sort(function(e,t){return e.x-t.x}),b[0].x===b[1].x)h(l(b[0].y,b[1].y,b[0].x,!0),c);else{var x=(b[1].y-b[0].y)/(b[1].x-b[0].x),S=b[0].y-x*b[0].x;if(Math.abs(x)>=1){b.sort(function(e,t){return e.y-t.y});for(var C=b[0].y;C<=b[1].y;C+=1)for(var O=-0;O<=2;O+=1)f(Math.round((C-S)/x)+O,C,c)}else for(var P=b[0].x;P<=b[1].x;P+=1)for(var I=-0;I<=2;I+=1)f(P,Math.round(x*P+S)+I,c)}return!0},t.isCircleInPolygon=function(e,t,n,r,i,s,l){var u=function(e,t){return t*n+e},d=a(i[3]-1,0,function(e,t){return o(u(e,t),s,l)},t,!1),c=a(i[1]+1,n,function(e,t){return o(u(e,t),s,l)},t,!1);return d&&c},t.fillColor=function(e,t,n,a,s,l){var u=new i.Queue,d=[0,1,0,-1],c=[-1,0,1,0],f=0,h=function(e,t){return t*n+e},p=function(e,t,i){return(0,r.drawBrushPixels)([[e,t]],s,i,n)};for(u.enqueue({x:e,y:t}),p(e,t,l);0!==u.size()&&f<=a*n;){f+=1;for(var g=u.dequeue(),v=0;v<4;v+=1){var m=g.y+c[v],y=g.x+d[v];m<0||m>=a||y<0||y>=n||o(h(y,m),s,l)||(u.enqueue({x:y,y:m}),p(y,m,l))}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.brush=void 0;var r=u(n(0)),i=n(2),a=u(n(49)),o=u(n(48)),s=n(34),l=n(72);function u(e){return e&&e.__esModule?e:{default:e}}var d="brush",c=void 0,f=!1;function h(e){var t=p.getConfiguration(),n=e.element,a=r.default.cornerstone.getLayer(n,t.brushLayerId),l=a.image,u=l.rows,c=l.columns,f=e.currentPoints.image,h=f.x,g=f.y,v=(0,i.getToolState)(n,d).data[0].pixelData,m=t.draw,y=t.radius;if(!(h<0||h>c||g<0||g>u)){var b=(0,o.default)(y,u,c,h,g);(0,s.drawBrushPixels)(b,v,m,c),a.invalid=!0,r.default.cornerstone.updateImage(n)}}var p=(0,a.default)({onMouseMove:function(e){var t=e.detail;c=t.currentPoints.image,r.default.cornerstone.updateImage(t.element)},onMouseDown:function(e){var t=e.detail;h(t),f=!0,c=t.currentPoints.image},onMouseUp:function(e){var t=e.detail;c=t.currentPoints.image,f=!1},onDrag:function(e){var t=e.detail;h(t),f=!0,c=t.currentPoints.image},toolType:"brush",onImageRendered:function(e){var t=e.detail;if(c){var n=t.image,r=n.rows,i=n.columns,a=c,l=a.x,u=a.y;if(!(l<0||l>i||u<0||u>r)){var d=p.getConfiguration(),h=d.radius,g=t.canvasContext,v=f?d.dragColor:d.hoverColor,m=t.element;if(g.setTransform(1,0,0,1,0,0),d.active){var y=(0,o.default)(h,r,i,l,u);(0,s.drawBrushOnCanvas)(y,g,v,m)}}}},onMouseDoubleClick:function(e){!function(e){var t=p.getConfiguration(),n=t.radius,a=e.element,o=r.default.cornerstone.getLayer(a,t.brushLayerId),s=o.image,u=s.rows,c=s.columns,f=e.currentPoints.image,h=f.x,g=f.y,v=(0,i.getToolState)(a,d).data[0].pixelData,m=t.draw;if(!(h<0||h>c||g<0||g>u)){h=Math.round(h),g=Math.round(g);var y=(0,l.getEndOfCircle)(h,g,c,u,v,m);Math.abs(y[0]-y[2])>2*n&&Math.abs(y[1]-y[3])>2*n||((0,l.connectEndsOfBrush)(h,g,c,u,y,v,m)&&(0,l.isCircleInPolygon)(h,g,c,u,y,v,m)&&(0,l.fillColor)(h,y[0]-1,c,u,v,m),o.invalid=!0,r.default.cornerstone.updateImage(a))}}(e.detail)}});p.setConfiguration({draw:1,radius:5,minRadius:1,maxRadius:20,hoverColor:"rgba(230, 25, 75, 1.0)",dragColor:"rgba(230, 25, 75, 0.8)",active:!1}),t.brush=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.zoomTouchDrag=t.zoomTouchPinch=t.zoomWheel=t.zoom=void 0;var r=f(n(1)),i=f(n(0)),a=f(n(16)),o=f(n(5)),s=f(n(29)),l=f(n(50)),u=f(n(18)),d=n(4),c=n(8);function f(e){return e&&e.__esModule?e:{default:e}}var h="zoom",p=void 0;function g(e,t){var n=_.getConfiguration(),r=Math.log(e.scale)/Math.log(1.7)+t,i=Math.pow(1.7,r);return n.maxScale&&i>n.maxScale?e.scale=n.maxScale:n.minScale&&i<n.minScale?e.scale=n.minScale:e.scale=i,e}function v(e,t){if(t.hflip&&(e.x*=-1),t.vflip&&(e.y*=-1),0!==t.rotation){var n=t.rotation*Math.PI/180,r=Math.cos(n),i=Math.sin(n),a=e.x*r-e.y*i,o=e.x*i+e.y*r;e.x=a,e.y=o}return e}function m(e,t){var n=i.default.cornerstone,r=e.element,a=g(e.viewport,t);n.setViewport(r,a);var o=n.pageToPixel(r,e.startPoints.page.x,e.startPoints.page.y),s={x:e.startPoints.image.x-o.x,y:e.startPoints.image.y-o.y};s=v(s,a),a.translation.x-=s.x,a.translation.y-=s.y,n.setViewport(r,a)}function y(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,b),t.removeEventListener(r.default.MOUSE_UP,y),t.removeEventListener(r.default.MOUSE_CLICK,y)}function b(e){var t=e.detail;if(!t.deltaPoints.page.y)return!1;var n=t.deltaPoints.page.y/100,r=_.getConfiguration();r&&r.invert&&(n*=-1),_.strategy(t,n),e.preventDefault(),e.stopPropagation()}var _=(0,a.default)(function(e){var t=e.detail,n=t.element,i=(0,d.getToolOptions)(h,n);(0,o.default)(t.which,i.mouseButtonMask)&&(p=t.startPoints,n.addEventListener(r.default.MOUSE_DRAG,b),n.addEventListener(r.default.MOUSE_UP,y),n.addEventListener(r.default.MOUSE_CLICK,y),e.preventDefault(),e.stopPropagation())},h);_.strategies={default:m,translate:function(e,t){var n=e.element,r=e.image,a=_.getConfiguration(),o=g(e.viewport,t),s={x:0,y:0};if(t<0)o.scale<3&&(Math.abs(o.translation.x)<.01?o.translation.x=0:s.x=o.translation.x/8,Math.abs(o.translation.y)<.01?o.translation.y=0:s.y=o.translation.y/8);else{a&&a.preventZoomOutsideImage&&(0,c.clipToBox)(p.image,r);var l={x:r.width/2-p.image.x,y:r.height/2-p.image.y};l=v(l,o);var u={x:o.translation.x-l.x,y:o.translation.y-l.y};Math.abs(u.x)<.01?o.translation.x=l.x:s.x=u.x/8,Math.abs(u.y)<.01?o.translation.y=l.y:s.y=u.y/8}o.translation.x-=s.x,o.translation.y-=s.y,i.default.cornerstone.setViewport(n,o)},zoomToCenter:function(e,t){var n=e.element,r=g(e.viewport,t);i.default.cornerstone.setViewport(n,r)}},_.strategy=m;var w=(0,s.default)(function(e){var t=e.detail,n=-t.direction/4,r=_.getConfiguration();r&&r.invert&&(n*=-1);var a=g(t.viewport,n);i.default.cornerstone.setViewport(t.element,a)}),E=(0,l.default)(function(e){var t=e.detail,n=i.default.cornerstone,r=_.getConfiguration(),a=t.viewport,o=t.element;a.scale+=t.scaleChange*a.scale,r.maxScale&&a.scale>r.maxScale?a.scale=r.maxScale:r.minScale&&a.scale<r.minScale&&(a.scale=r.minScale),n.setViewport(o,a);var s=n.pageToPixel(o,t.startPoints.page.x,t.startPoints.page.y),l={x:t.startPoints.image.x-s.x,y:t.startPoints.image.y-s.y};l=v(l,a),a.translation.x-=l.x,a.translation.y-=l.y,n.setViewport(o,a)}),T=(0,u.default)(b,h);t.zoom=_,t.zoomWheel=w,t.zoomTouchPinch=E,t.zoomTouchDrag=T},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.wwwcRegionTouch=t.wwwcRegion=void 0;var r=f(n(1)),i=f(n(0)),a=f(n(7)),o=n(2),s=f(n(64)),l=f(n(5)),u=n(4),d=f(n(8)),c=n(3);function f(e){return e&&e.__esModule?e:{default:e}}var h="wwwcRegion",p={minWindowWidth:10};function g(e){var t=e.detail.element,n=(0,o.getToolState)(t,h);n&&n.data&&(n.data=[]),t.removeEventListener(r.default.MOUSE_MOVE,w),t.removeEventListener(r.default.MOUSE_DRAG,w),t.removeEventListener(r.default.MOUSE_UP,v),t.removeEventListener(r.default.MOUSE_CLICK,v),t.addEventListener(r.default.MOUSE_DOWN,b)}function v(e){var t=e.detail,n=t.element;n.removeEventListener(r.default.MOUSE_MOVE,w),n.removeEventListener(r.default.MOUSE_DRAG,w),n.removeEventListener(r.default.MOUSE_UP,v),n.removeEventListener(r.default.MOUSE_CLICK,v),n.addEventListener(r.default.MOUSE_DOWN,b);var i=(0,o.getToolState)(t.element,h);i&&i.data&&i.data.length&&(i.data[0].endPoint={x:t.currentPoints.image.x,y:t.currentPoints.image.y},m(t))}function m(e){var t=i.default.cornerstone,n=(0,o.getToolState)(e.element,h);if(n&&n.data&&n.data.length){var r=n.data[0].startPoint,a=n.data[0].endPoint,l=Math.abs(r.x-a.x),u=Math.abs(r.y-a.y),c=Math.min(r.x,a.x),f=Math.min(r.y,a.y);c=(0,d.default)(c,0,e.image.width),f=(0,d.default)(f,0,e.image.height),l=Math.floor(Math.min(l,Math.abs(e.image.width-c))),u=Math.floor(Math.min(u,Math.abs(e.image.height-f)));var p=function(e,t,n){var r=e.length;if(r<2)return{min:t,max:n,mean:(t+n)/2};for(var i=n,a=t,o=0,s=0;s<r;s++){var l=e[s];i=Math.min(i,l),a=Math.max(a,l),o+=l}return{min:i,max:a,mean:o/r}}((0,s.default)(e.element,c,f,l,u),e.image.minPixelValue,e.image.maxPixelValue),g=S.getConfiguration(),v=t.getViewport(e.element);void 0===g.minWindowWidth&&(g.minWindowWidth=10),v.voi.windowWidth=Math.max(Math.abs(p.max-p.min),g.minWindowWidth),v.voi.windowCenter=p.mean,t.setViewport(e.element,v),n.data=[],t.updateImage(e.element)}}function y(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_MOVE,y),t.removeEventListener(r.default.MOUSE_DRAG,y),t.addEventListener(r.default.MOUSE_MOVE,w),t.addEventListener(r.default.MOUSE_DRAG,w),t.addEventListener(r.default.MOUSE_CLICK,v),e.type===r.default.MOUSE_DRAG&&t.addEventListener(r.default.MOUSE_UP,v)}function b(e){var t=e.detail,n=t.element,i=(0,u.getToolOptions)(h,n);if((0,l.default)(t.which,i.mouseButtonMask))return n.addEventListener(r.default.MOUSE_DRAG,y),n.addEventListener(r.default.MOUSE_MOVE,y),n.removeEventListener(r.default.MOUSE_DOWN,b),_(t),!1}function _(e){var t=(0,o.getToolState)(e.element,h);t&&t.data&&(t.data=[]);var n={startPoint:{x:e.currentPoints.image.x,y:e.currentPoints.image.y}};(0,o.addToolState)(e.element,h,n)}function w(e){var t=e.detail,n=t.element,r=(0,o.getToolState)(n,h);r&&r.data&&r.data.length&&(r.data[0].endPoint={x:t.currentPoints.image.x,y:t.currentPoints.image.y},i.default.cornerstone.updateImage(n))}function E(e){var t=e.detail,n=t.element,r=t.canvasContext,i=(0,o.getToolState)(t.element,h);if(i&&i.data&&i.data.length){var s=i.data[0].startPoint,l=i.data[0].endPoint;if(s&&l){r.setTransform(1,0,0,1,0,0);var u=a.default.getActiveColor(),d=S.getConfiguration();(0,c.draw)(r,function(e){(0,c.setShadow)(e,d),(0,c.drawRect)(e,n,s,l,{color:u})})}}}function T(e){e.removeEventListener(r.default.MOUSE_DOWN,b),e.removeEventListener(r.default.MOUSE_UP,v),e.removeEventListener(r.default.MOUSE_CLICK,v),e.removeEventListener(r.default.MOUSE_DRAG,w),e.removeEventListener(r.default.MOUSE_MOVE,w),e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,E),e.removeEventListener(i.default.cornerstone.EVENTS.NEW_IMAGE,g),i.default.cornerstone.updateImage(e)}function x(e){e.removeEventListener(r.default.TOUCH_DRAG,w),e.removeEventListener(r.default.TOUCH_START,_),e.removeEventListener(r.default.TOUCH_DRAG_END,m),e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,E)}var S={activate:function(e,t){(0,u.setToolOptions)(h,e,{mouseButtonMask:t}),(0,o.getToolState)(e,h)||(0,o.addToolState)(e,h,[]),e.removeEventListener(r.default.MOUSE_DOWN,b),e.removeEventListener(r.default.MOUSE_UP,v),e.removeEventListener(r.default.MOUSE_CLICK,v),e.removeEventListener(r.default.MOUSE_DRAG,w),e.removeEventListener(r.default.MOUSE_MOVE,w),e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,E),e.removeEventListener(i.default.cornerstone.EVENTS.NEW_IMAGE,g),e.addEventListener(r.default.MOUSE_DOWN,b),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,E),e.addEventListener(i.default.cornerstone.EVENTS.NEW_IMAGE,g),i.default.cornerstone.updateImage(e)},deactivate:T,disable:T,setConfiguration:function(e){p=e},getConfiguration:function(){return p}},C={activate:function(e){(0,o.getToolState)(e,h)||(0,o.addToolState)(e,h,[]),e.removeEventListener(r.default.TOUCH_DRAG,w),e.removeEventListener(r.default.TOUCH_START,_),e.removeEventListener(r.default.TOUCH_DRAG_END,m),e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,E),e.addEventListener(r.default.TOUCH_DRAG,w),e.addEventListener(r.default.TOUCH_START,_),e.addEventListener(r.default.TOUCH_DRAG_END,m),e.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,E)},deactivate:x,disable:x};t.wwwcRegion=S,t.wwwcRegionTouch=C},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.wwwcTouchDrag=t.wwwc=void 0;var r=u(n(1)),i=u(n(0)),a=u(n(16)),o=u(n(18)),s=u(n(5)),l=n(4);function u(e){return e&&e.__esModule?e:{default:e}}var d="wwwc";function c(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,h),t.removeEventListener(r.default.MOUSE_UP,c),t.removeEventListener(r.default.MOUSE_CLICK,c)}function f(e){var t=(e.image.maxPixelValue*e.image.slope+e.image.intercept-(e.image.minPixelValue*e.image.slope+e.image.intercept))/1024,n=e.deltaPoints.page.x*t,r=e.deltaPoints.page.y*t;e.viewport.voi.windowWidth+=n,e.viewport.voi.windowCenter+=r}function h(e){var t=e.detail;p.strategy(t),i.default.cornerstone.setViewport(t.element,t.viewport)}var p=(0,a.default)(function(e){var t=e.detail,n=t.element,i=(0,l.getToolOptions)(d,n);(0,s.default)(t.which,i.mouseButtonMask)&&(n.addEventListener(r.default.MOUSE_DRAG,h),n.addEventListener(r.default.MOUSE_UP,c),n.addEventListener(r.default.MOUSE_CLICK,c),e.preventDefault(),e.stopPropagation())},d);p.strategies={default:f},p.strategy=f;var g=(0,o.default)(function(e){var t=e.detail;e.stopImmediatePropagation();var n=t,r=(n.image.maxPixelValue*n.image.slope+n.image.intercept-(n.image.minPixelValue*n.image.slope+n.image.intercept))/1024,a=n.deltaPoints.page.x*r,o=n.deltaPoints.page.y*r,s=p.getConfiguration();s.orientation?0===s.orientation?(n.viewport.voi.windowWidth+=a,n.viewport.voi.windowCenter+=o):(n.viewport.voi.windowWidth+=o,n.viewport.voi.windowCenter+=a):(n.viewport.voi.windowWidth+=a,n.viewport.voi.windowCenter+=o),i.default.cornerstone.setViewport(n.element,n.viewport)});t.wwwc=p,t.wwwcTouchDrag=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.textMarkerTouch=t.textMarker=void 0;var r=g(n(1)),i=g(n(0)),a=g(n(10)),o=g(n(12)),s=g(n(22)),l=g(n(7)),u=g(n(5)),d=n(11),c=g(d),f=n(2),h=n(4),p=n(3);function g(e){return e&&e.__esModule?e:{default:e}}var v="textMarker";function m(e){var t=_.getConfiguration();if(t.current){var n={visible:!0,active:!0,text:t.current,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0,hasBoundingBox:!0}}},r={left:0,top:0,width:e.image.width,height:e.image.height};if(i.default.cornerstoneMath.point.insideRect(n.handles.end,r)){var a=t.markers.indexOf(t.current);return t.ascending?(a+=1)>=t.markers.length&&(t.loop?a-=t.markers.length:a=-1):(a-=1)<0&&(t.loop?a+=t.markers.length:a=-1),t.current=t.markers[a],n}}}function y(e,t,n){if(!1===t.visible)return!1;if(t.handles.end.boundingBox){var r=i.default.cornerstoneMath.rect.distanceToPoint(t.handles.end.boundingBox,n),a=(0,s.default)(t.handles.end,n);return r<10||a}}function b(e){var t=e.detail,n=(0,f.getToolState)(t.element,v);if(n)for(var r=(0,p.getNewContext)(t.canvasContext.canvas),a=_.getConfiguration(),o=function(e){var o=n.data[e];if(!1===o.visible)return"continue";var s=l.default.getColorIfActive(o);(0,p.draw)(r,function(e){(0,p.setShadow)(e,a),o.textWidth=(0,d.textBoxWidth)(e,o.text,5);var n=i.default.cornerstone.pixelToCanvas(t.element,o.handles.end);o.handles.end.boundingBox=(0,c.default)(e,o.text,n.x,n.y-10,s,{centering:{x:!0,y:!0}})})},s=0;s<n.data.length;s++)o(s)}var _=(0,a.default)({createNewMeasurement:m,onImageRendered:b,pointNearTool:y,toolType:v,mouseDoubleClickCallback:function(e){var t=e.detail,n=i.default.cornerstone,a=t.element,o=void 0,s=(0,h.getToolOptions)(v,a);if((0,u.default)(t.which,s.mouseButtonMask)){var l=_.getConfiguration(),d=t.currentPoints.canvas,c=(0,f.getToolState)(a,v);if(c){for(var p=0;p<c.data.length;p++)if(y(0,o=c.data[p],d))return o.active=!0,n.updateImage(a),a.removeEventListener(r.default.MOUSE_MOVE,_.mouseMoveCallback),a.removeEventListener(r.default.MOUSE_DOWN,_.mouseDownCallback),a.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,_.mouseDownActivateCallback),a.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,_.mouseDoubleClickCallback),l.changeTextCallback(o,t,g),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();e.preventDefault(),e.stopPropagation()}}function g(e,t,i){!0===i?(0,f.removeToolState)(a,v,e):e.text=t,e.active=!1,n.updateImage(a),a.addEventListener(r.default.MOUSE_MOVE,_.mouseMoveCallback),a.addEventListener(r.default.MOUSE_DOWN,_.mouseDownCallback),a.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,_.mouseDownActivateCallback),a.addEventListener(r.default.MOUSE_DOUBLE_CLICK,_.mouseDoubleClickCallback)}}}),w=(0,o.default)({createNewMeasurement:m,onImageRendered:b,pointNearTool:y,toolType:v,pressCallback:function(e){var t=e.detail,n=i.default.cornerstone,a=t.element,o=void 0;function s(e,t,i){!0===i?(0,f.removeToolState)(a,v,e):e.text=t,e.active=!1,n.updateImage(a),a.addEventListener(r.default.TOUCH_DRAG,w.touchMoveCallback),a.addEventListener(r.default.TOUCH_START_ACTIVE,w.touchDownActivateCallback),a.addEventListener(r.default.TOUCH_START,w.touchStartCallback),a.addEventListener(r.default.TAP,w.tapCallback),a.addEventListener(r.default.TOUCH_PRESS,w.pressCallback)}var l=_.getConfiguration(),u=t.currentPoints.canvas,d=(0,f.getToolState)(a,v);if(!d)return!1;if(t.handlePressed)return t.handlePressed.active=!0,n.updateImage(a),a.removeEventListener(r.default.TOUCH_DRAG,w.touchMoveCallback),a.removeEventListener(r.default.TOUCH_START_ACTIVE,w.touchDownActivateCallback),a.removeEventListener(r.default.TOUCH_START,w.touchStartCallback),a.removeEventListener(r.default.TAP,w.tapCallback),a.removeEventListener(r.default.TOUCH_PRESS,w.pressCallback),l.changeTextCallback(t.handlePressed,t,s),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();for(var c=0;c<d.data.length;c++)if(y(0,o=d.data[c],u))return o.active=!0,n.updateImage(a),a.removeEventListener(r.default.TOUCH_DRAG,w.touchMoveCallback),a.removeEventListener(r.default.TOUCH_START_ACTIVE,w.touchDownActivateCallback),a.removeEventListener(r.default.TOUCH_START,w.touchStartCallback),a.removeEventListener(r.default.TAP,w.tapCallback),a.removeEventListener(r.default.TOUCH_PRESS,w.pressCallback),l.changeTextCallback(o,t,s),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();e.preventDefault(),e.stopPropagation()}});t.textMarker=_,t.textMarkerTouch=w},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.simpleAngleTouch=t.simpleAngle=void 0;var r=b(n(1)),i=b(n(0)),a=b(n(10)),o=b(n(43)),s=b(n(17)),l=b(n(14)),u=b(n(7)),d=b(n(15)),c=b(n(30)),f=b(n(28)),h=b(n(9)),p=b(n(12)),g=b(n(27)),v=n(2),m=n(3),y=n(11);function b(e){return e&&e.__esModule?e:{default:e}}var _="simpleAngle";function w(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},middle:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function E(e,t,n){return!1!==t.visible&&((0,g.default)(e,t.handles.start,t.handles.middle,n)<25||(0,g.default)(e,t.handles.middle,t.handles.end,n)<25)}function T(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function x(e){var t=e.detail,n=(0,v.getToolState)(e.currentTarget,_);if(n)for(var r=i.default.cornerstone,a=t.enabledElement,d=(0,m.getNewContext)(t.canvasContext.canvas),c=l.default.getToolWidth(),f=S.getConfiguration(),p=function(e){var i=n.data[e];if(!1===i.visible)return"continue";(0,m.draw)(d,function(e){(0,m.setShadow)(e,f);var n=u.default.getColorIfActive(i),l=r.pixelToCanvas(t.element,i.handles.start),d=r.pixelToCanvas(t.element,i.handles.middle);(0,m.drawJoinedLines)(e,t.element,i.handles.start,[i.handles.middle,i.handles.end],{color:n});var p={drawHandlesIfActive:f&&f.drawHandlesOnHover};(0,h.default)(e,t,i.handles,n,p);var g=t.image.columnPixelSpacing||1,v=t.image.rowPixelSpacing||1,_={x:(Math.ceil(i.handles.middle.x)-Math.ceil(i.handles.start.x))*g,y:(Math.ceil(i.handles.middle.y)-Math.ceil(i.handles.start.y))*v},w={x:(Math.ceil(i.handles.end.x)-Math.ceil(i.handles.middle.x))*g,y:(Math.ceil(i.handles.end.y)-Math.ceil(i.handles.middle.y))*v},E={x:(Math.ceil(i.handles.end.x)-Math.ceil(i.handles.start.x))*g,y:(Math.ceil(i.handles.end.y)-Math.ceil(i.handles.start.y))*v},x=T(_),S=T(w),C=T(E),O=Math.acos((Math.pow(x,2)+Math.pow(S,2)-Math.pow(C,2))/(2*x*S));if(O*=180/Math.PI,i.rAngle=(0,o.default)(O,2),i.rAngle){var P=function(e,t,n){var r=t&&n?"":" (isotropic)";return e.rAngle.toString()+String.fromCharCode(parseInt("00B0",16))+r}(i,t.image.rowPixelSpacing,t.image.columnPixelSpacing),I=void 0;if(!i.handles.textBox.hasMoved){I={x:d.x,y:d.y};var M=(0,y.textBoxWidth)(e,P,5);d.x<l.x?I.x-=15+M:I.x+=15;var A=r.internal.getTransform(a);A.invert();var L=A.transformPoint(I.x,I.y);i.handles.textBox.x=L.x,i.handles.textBox.y=L.y}(0,s.default)(e,t.element,i.handles.textBox,P,i.handles,b,n,c,0,!0)}})},g=0;g<n.data.length;g++)p(g);function b(e){return[e.start,e.middle,e.end]}}var S=(0,a.default)({createNewMeasurement:w,addNewMeasurement:function(e){var t=i.default.cornerstone,n=w(e),a=e.element;(0,v.addToolState)(a,_,n),a.removeEventListener(r.default.MOUSE_MOVE,S.mouseMoveCallback),a.removeEventListener(r.default.MOUSE_DRAG,S.mouseMoveCallback),a.removeEventListener(r.default.MOUSE_DOWN,S.mouseDownCallback),a.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,S.mouseDownActivateCallback),t.updateImage(a),(0,c.default)(e,_,n,n.handles.middle,function(){if(n.active=!1,(0,d.default)(e,n.handles))return(0,v.removeToolState)(a,_,n),a.addEventListener(r.default.MOUSE_MOVE,S.mouseMoveCallback),a.addEventListener(r.default.MOUSE_DRAG,S.mouseMoveCallback),a.addEventListener(r.default.MOUSE_DOWN,S.mouseDownCallback),a.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,S.mouseDownActivateCallback),void t.updateImage(a);n.handles.end.active=!0,t.updateImage(a),(0,c.default)(e,_,n,n.handles.end,function(){n.active=!1,(0,d.default)(e,n.handles)&&(0,v.removeToolState)(a,_,n),a.addEventListener(r.default.MOUSE_MOVE,S.mouseMoveCallback),a.addEventListener(r.default.MOUSE_DRAG,S.mouseMoveCallback),a.addEventListener(r.default.MOUSE_DOWN,S.mouseDownCallback),a.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,S.mouseDownActivateCallback),t.updateImage(a)})})},onImageRendered:x,pointNearTool:E,toolType:_}),C=(0,p.default)({createNewMeasurement:w,addNewMeasurement:function(e){var t=i.default.cornerstone,n=w(e),a=e.element;(0,v.addToolState)(a,_,n),a.removeEventListener(r.default.TOUCH_DRAG,C.touchMoveCallback),a.removeEventListener(r.default.TOUCH_START_ACTIVE,C.touchDownActivateCallback),a.removeEventListener(r.default.TOUCH_START,C.touchStartCallback),a.removeEventListener(r.default.TAP,C.tapCallback),t.updateImage(a),(0,f.default)(e,_,n,n.handles.middle,function(){if((0,d.default)(e,n.handles))return(0,v.removeToolState)(a,_,n),a.addEventListener(r.default.TOUCH_DRAG,C.touchMoveCallback),a.addEventListener(r.default.TOUCH_START,C.touchStartCallback),a.addEventListener(r.default.TOUCH_START_ACTIVE,C.touchDownActivateCallback),a.addEventListener(r.default.TAP,C.tapCallback),void t.updateImage(a);(0,f.default)(e,_,n,n.handles.end,function(){(0,d.default)(e,n.handles)&&((0,v.removeToolState)(a,_,n),t.updateImage(a)),a.addEventListener(r.default.TOUCH_DRAG,C.touchMoveCallback),a.addEventListener(r.default.TOUCH_START,C.touchStartCallback),a.addEventListener(r.default.TOUCH_START_ACTIVE,C.touchDownActivateCallback),a.addEventListener(r.default.TAP,C.tapCallback)})})},onImageRendered:x,pointNearTool:E,toolType:_});t.simpleAngle=S,t.simpleAngleTouch=C},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.seedAnnotateTouch=t.seedAnnotate=void 0;var r=_(n(1)),i=_(n(0)),a=_(n(10)),o=_(n(12)),s=_(n(21)),l=_(n(14)),u=_(n(7)),d=_(n(15)),c=_(n(31)),f=_(n(9)),h=_(n(5)),p=_(n(22)),g=_(n(17)),v=n(2),m=n(4),y=n(3),b=n(11);function _(e){return e&&e.__esModule?e:{default:e}}var w="seedAnnotate",E={getTextCallback:function(e){e(prompt("Enter your annotation:"))},changeTextCallback:function(e,t,n){n(prompt("Change your annotation:"))},drawHandles:!1,drawHandlesOnHover:!0,currentLetter:"A",currentNumber:0,showCoordinates:!0,countUp:!0};function T(e){return{visible:!0,active:!0,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function x(e,t,n){if(!1===t.visible)return!1;if(t.handles.end){var r=i.default.cornerstone.pixelToCanvas(e,t.handles.end);return i.default.cornerstoneMath.point.distance(r,n)<25}}function S(e){var t=e.detail,n=(0,v.getToolState)(e.currentTarget,w);if(n)for(var r=i.default.cornerstone,a=t.enabledElement,o=(0,y.getNewContext)(t.canvasContext.canvas),d=t.canvasContext.canvas.width,c=l.default.getToolWidth(),h=C.getConfiguration(),p=function(e){var i=n.data[e];if(!1===i.visible)return"continue";(0,y.draw)(o,function(e){(0,y.setShadow)(e,h);var n=u.default.getColorIfActive(i),o=r.pixelToCanvas(t.element,i.handles.end);(0,y.drawCircle)(e,t.element,i.handles.end,6,{color:n});var l={drawHandlesIfActive:h&&h.drawHandlesOnHover};if(h.drawHandles&&(0,f.default)(e,t,o,n,l),i.text&&""!==i.text){var p=function(e){return h.showCoordinates?e.text+" x: "+Math.round(e.handles.end.x)+" y: "+Math.round(e.handles.end.y):e.text}(i),v=(0,b.textBoxWidth)(e,p,5),m=s.default.getFontSize()+10,w=Math.max(v,m)/2+5;o.x>d/2&&(w=-w);var E=void 0;if(!i.handles.textBox.hasMoved){E={x:o.x-v/2+w,y:o.y-m/2};var T=r.internal.getTransform(a);T.invert();var x=T.transformPoint(E.x,E.y);i.handles.textBox.x=x.x,i.handles.textBox.y=x.y}(0,g.default)(e,t.element,i.handles.textBox,p,i.handles,_,n,c,0,!1)}})},m=0;m<n.data.length;m++)p(m);function _(e){return[e.end]}}var C=(0,a.default)({addNewMeasurement:function(e){var t=i.default.cornerstone,n=e.element,r=C.getConfiguration(),a=T(e);function o(e){null===e?(0,v.removeToolState)(n,w,a):a.text=e,a.active=!1,t.updateImage(n)}(0,v.addToolState)(n,w,a),t.updateImage(n),(0,c.default)(e,w,a,a.handles.end,function(){(0,d.default)(e,a.handles)&&(0,v.removeToolState)(n,w,a),void 0===a.text&&r.getTextCallback(o),t.updateImage(n)})},createNewMeasurement:T,onImageRendered:S,pointNearTool:x,toolType:w,mouseDoubleClickCallback:function(e){var t=e.detail,n=i.default.cornerstone,r=t.element,a=void 0,o=(0,m.getToolOptions)(w,r);if((0,h.default)(t.which,o.mouseButtonMask)){var s=C.getConfiguration(),l=t.currentPoints.canvas,u=(0,v.getToolState)(r,w);if(u){for(var d=0;d<u.data.length;d++)if(a=u.data[d],x(r,a,l)||(0,p.default)(a.handles.textBox,l))return a.active=!0,n.updateImage(r),s.changeTextCallback(a,t,c),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}}function c(e,t,i){!0===i?(0,v.removeToolState)(r,w,e):e.text=t,e.active=!1,n.updateImage(r)}}});C.setConfiguration(E);var O=(0,o.default)({addNewMeasurement:function(e){var t=i.default.cornerstone,n=e.element,r=C.getConfiguration(),a=T(e);function o(e){null===e?(0,v.removeToolState)(n,w,a):a.text=e,a.active=!1,t.updateImage(n)}(0,v.addToolState)(n,w,a),t.updateImage(n),(0,c.default)(e,w,a,a.handles.end,function(){(0,d.default)(e,a.handles)&&(0,v.removeToolState)(n,w,a),void 0===a.text&&r.getTextCallback(o),t.updateImage(n)})},createNewMeasurement:T,onImageRendered:S,pointNearTool:x,toolType:w,pressCallback:function(e){var t=e.detail,n=i.default.cornerstone,a=t.element,o=void 0;function s(e,t,i){!0===i?(0,v.removeToolState)(a,w,e):e.text=t,e.active=!1,n.updateImage(a),a.addEventListener(r.default.TOUCH_START,O.touchStartCallback),a.addEventListener(r.default.TOUCH_START_ACTIVE,O.touchDownActivateCallback),a.addEventListener(r.default.TAP,O.tapCallback)}var l=C.getConfiguration(),u=t.currentPoints.canvas,d=(0,v.getToolState)(a,w);if(!d)return!1;if(t.handlePressed)return a.removeEventListener(r.default.TOUCH_START,O.touchStartCallback),a.removeEventListener(r.default.TOUCH_START_ACTIVE,O.touchDownActivateCallback),a.removeEventListener(r.default.TAP,O.tapCallback),l.changeTextCallback(t.handlePressed,t,s),e.stopImmediatePropagation(),!1;for(var c=0;c<d.data.length;c++)if(o=d.data[c],x(a,o,u)||(0,p.default)(o.handles.textBox,u))return o.active=!0,n.updateImage(a),a.removeEventListener(r.default.TOUCH_START,O.touchStartCallback),a.removeEventListener(r.default.TOUCH_START_ACTIVE,O.touchDownActivateCallback),a.removeEventListener(r.default.TAP,O.tapCallback),l.changeTextCallback(o,t,s),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}});t.seedAnnotate=C,t.seedAnnotateTouch=O},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(24)),i=o(n(0)),a=n(3);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,i){var a={left:0,top:0,width:t.width,height:t.height},o=r*Math.min(1e3,t.width),s=i*Math.min(1e3,t.height);return{topLeft:{x:(a={left:a.left+o,top:a.top+s,width:a.width-2*o,height:a.height-2*s}).left,y:a.top},bottomRight:{x:a.left+a.width,y:a.top+a.height}}}function l(e){var t=e.detail,n=(0,a.getNewContext)(t.canvasContext.canvas),r=t.image,o=t.viewport,l=i.default.cornerstone.metaData.get("imagePlaneModule",r.imageId),d=void 0,c=void 0;if(l?(d=l.rowPixelSpacing||l.rowImagePixelSpacing,c=l.columnPixelSpacing||l.colImagePixelSpacing):(d=r.rowPixelSpacing,c=r.columnPixelSpacing),d&&c){var f={width:n.canvas.width,height:n.canvas.height},h={width:r.width,height:r.height},p=10/d*o.scale,g=10/c*o.scale,v=s(0,f,0,.25,.05),m=s(0,f,0,.05,.15);if(f.width&&f.height&&h.width&&h.height&&v&&m){var y=u.getConfiguration(),b=Object.assign({},{hscaleBounds:v,vscaleBounds:m,verticalMinorTick:p,horizontalMinorTick:g,minorTickLength:12.5,majorTickLength:25,verticalLine:{start:{x:m.bottomRight.x,y:m.topLeft.y},end:{x:m.bottomRight.x,y:m.bottomRight.y}},horizontalLine:{start:{x:v.topLeft.x,y:v.bottomRight.y},end:{x:v.bottomRight.x,y:v.bottomRight.y}}},y),_={color:b.color,lineWidth:b.lineWidth},w=function(e){for(var t=0,n=[];e.verticalLine.start.y+t*e.verticalMinorTick<=e.vscaleBounds.bottomRight.y;){var r={x:e.verticalLine.start.x,y:e.verticalLine.start.y+t*e.verticalMinorTick},i={x:0,y:e.verticalLine.start.y+t*e.verticalMinorTick};i.x=t%5==0?e.verticalLine.start.x-e.majorTickLength:e.verticalLine.start.x-e.minorTickLength,n.push({start:r,end:i}),t++}return n}(b),E=function(e){for(var t=0,n=[];e.horizontalLine.start.x+t*e.horizontalMinorTick<=e.hscaleBounds.bottomRight.x;){var r={x:e.horizontalLine.start.x+t*e.horizontalMinorTick,y:e.horizontalLine.start.y},i={x:e.horizontalLine.start.x+t*e.horizontalMinorTick,y:0};i.y=t%5==0?e.horizontalLine.start.y-e.majorTickLength:e.horizontalLine.start.y-e.minorTickLength,n.push({start:r,end:i}),t++}return n}(b);(0,a.draw)(n,function(e){e.shadowColor=b.shadowColor,e.shadowBlur=b.shadowBlur,(0,a.drawLine)(e,void 0,b.verticalLine.start,b.verticalLine.end,_,"canvas"),(0,a.drawLine)(e,void 0,b.horizontalLine.start,b.horizontalLine.end,_,"canvas"),(0,a.drawLines)(e,void 0,w,_,"canvas"),(0,a.drawLines)(e,void 0,E,_,"canvas")})}}}var u=(0,r.default)(l);u.setConfiguration({color:"white",lineWidth:2,shadowColor:"black",shadowBlur:4}),u.disable=function(e){e.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,l),i.default.cornerstone.updateImage(e)},t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",r=e.querySelector("canvas");if(r.msToBlob){var i=r.msToBlob();return window.navigator.msSaveBlob(i,t)}var a=document.createElement("a");if(a.download=t,a.href=r.toDataURL(n,1),document.createEvent){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(o)}else a.fireEvent&&a.fireEvent("onclick")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.detail;return t.viewport.rotation+=t.rotation,i.default.cornerstone.setViewport(t.element,t.viewport),!1}var s={activate:function(e){e.removeEventListener(r.default.TOUCH_ROTATE,o),e.addEventListener(r.default.TOUCH_ROTATE,o)},disable:function(e){e.removeEventListener(r.default.TOUCH_ROTATE,o)}};t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.rotateTouchDrag=t.rotate=void 0;var r=u(n(1)),i=u(n(0)),a=u(n(16)),o=u(n(56)),s=u(n(5)),l=n(4);function u(e){return e&&e.__esModule?e:{default:e}}var d="rotate";function c(e,t,n){var r=e.element.getBoundingClientRect(e.element),a=e.element.clientWidth,o=e.element.clientHeight,s=e.viewport.scale,l=e.viewport.translation,u=r.left+a/2+l.x*s,d=r.top+o/2+l.y*s,c=t,f=e.currentPoints.client.x,h=e.currentPoints.client.y,p=Math.sqrt(Math.pow(u-c.x,2)+Math.pow(d-c.y,2)),g=Math.sqrt(Math.pow(u-f,2)+Math.pow(d-h,2)),v=Math.sqrt(Math.pow(c.x-f,2)+Math.pow(c.y-h,2)),m=180*Math.acos((Math.pow(p,2)+Math.pow(g,2)-Math.pow(v,2))/(2*p*g))/Math.PI;(c.x-u)*(h-d)-(c.y-d)*(f-u)<0&&(m=-m),e.viewport.rotation=n+m,i.default.cornerstone.setViewport(e.element,e.viewport)}function f(e,t,n){var r=n.detail;h.strategy(r,e,t),i.default.cornerstone.setViewport(r.element,r.viewport),n.preventDefault(),n.stopPropagation()}var h=(0,a.default)(function(e){var t=e.detail,n=t.element,i=(0,l.getToolOptions)(d,n),a={x:t.currentPoints.client.x,y:t.currentPoints.client.y},o=t.viewport.rotation;if((0,s.default)(t.which,i.mouseButtonMask)){var u=f.bind({},a,o),c=function e(t){var n=t.detail.element;n.removeEventListener(r.default.MOUSE_DRAG,u),n.removeEventListener(r.default.MOUSE_UP,e),n.removeEventListener(r.default.MOUSE_CLICK,e)};n.addEventListener(r.default.MOUSE_DRAG,u),n.addEventListener(r.default.MOUSE_UP,c),n.addEventListener(r.default.MOUSE_CLICK,c),e.preventDefault(),e.stopPropagation()}},d);h.strategies={default:c,horizontal:function(e){e.viewport.rotation+=e.deltaPoints.page.x/e.viewport.scale,i.default.cornerstone.setViewport(e.element,e.viewport)},vertical:function(e){e.viewport.rotation+=e.deltaPoints.page.y/e.viewport.scale,i.default.cornerstone.setViewport(e.element,e.viewport)}},h.strategy=c;var p=(0,o.default)(function(e){var t=e.detail,n=t.element,i={x:t.currentPoints.client.x,y:t.currentPoints.client.y},a=t.viewport.rotation,o=f.bind({},i,a);n.addEventListener(r.default.TOUCH_DRAG,o),n.addEventListener(r.default.TOUCH_END,function e(t){var n=t.detail.element;n.removeEventListener(r.default.TOUCH_DRAG,o),n.removeEventListener(r.default.TOUCH_END,e)}),e.preventDefault(),e.stopPropagation()},d);t.rotate=h,t.rotateTouchDrag=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.rectangleRoiTouch=t.rectangleRoi=void 0;var r=h(n(0)),i=h(n(10)),a=h(n(12)),o=h(n(14)),s=h(n(7)),l=h(n(9)),u=h(n(20)),d=n(2),c=h(n(17)),f=n(3);function h(e){return e&&e.__esModule?e:{default:e}}var p="rectangleRoi";function g(e){return{visible:!0,active:!0,invalidated:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function v(e,t,n){if(!1===t.visible)return!1;var i=r.default.cornerstone,a=i.pixelToCanvas(e,t.handles.start),o=i.pixelToCanvas(e,t.handles.end),s={left:Math.min(a.x,o.x),top:Math.min(a.y,o.y),width:Math.abs(a.x-o.x),height:Math.abs(a.y-o.y)};return r.default.cornerstoneMath.rect.distanceToPoint(s,n)<5}function m(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function y(e){var t=e.detail,n=(0,d.getToolState)(e.currentTarget,p);if(n){var i=r.default.cornerstone,a=t.image,h=t.element,g=o.default.getToolWidth(),v=b.getConfiguration(),y=i.metaData.get("generalSeriesModule",a.imageId),_=i.metaData.get("imagePlaneModule",a.imageId),w=void 0,E=void 0,T=void 0;_?(E=_.rowPixelSpacing||_.rowImagePixelSpacing,T=_.columnPixelSpacing||_.colImagePixelSpacing):(E=a.rowPixelSpacing,T=a.columnPixelSpacing),y&&(w=y.modality);for(var x=(0,f.getNewContext)(t.canvasContext.canvas),S=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,f.draw)(x,function(e){(0,f.setShadow)(e,v);var n=s.default.getColorIfActive(r);(0,f.drawRect)(e,h,r.handles.start,r.handles.end,{color:n}),v&&v.drawHandlesOnHover?!0===r.active?(0,l.default)(e,t,r.handles,n):(0,l.default)(e,t,r.handles,n,{drawHandlesIfActive:!0}):(0,l.default)(e,t,r.handles,n);var o=void 0,d=void 0,p=void 0;if(!1===r.invalidated)d=r.meanStdDev,p=r.meanStdDevSUV,o=r.area;else{var y={left:Math.min(r.handles.start.x,r.handles.end.x),top:Math.min(r.handles.start.y,r.handles.end.y),width:Math.abs(r.handles.start.x-r.handles.end.x),height:Math.abs(r.handles.start.y-r.handles.end.y)};a.color||(d=function(e,t){for(var n=0,r=0,i=0,a=0,o=t.top;o<t.top+t.height;o++)for(var s=t.left;s<t.left+t.width;s++)n+=e[a],r+=e[a]*e[a],i++,a++;if(0===i)return{count:i,mean:0,variance:0,stdDev:0};var l=n/i,u=r/i-l*l;return{count:i,mean:l,variance:u,stdDev:Math.sqrt(u)}}(i.getPixels(h,y.left,y.top,y.width,y.height),y),"PT"===w&&(p={mean:(0,u.default)(a,(d.mean-a.intercept)/a.slope),stdDev:(0,u.default)(a,(d.stdDev-a.intercept)/a.slope)}),d&&!isNaN(d.mean)&&(r.meanStdDev=d,r.meanStdDevSUV=p)),o=y.width*(T||1)*(y.height*(E||1)),isNaN(o)||(r.area=o),r.invalidated=!1}var b=function(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,i=[];if(t&&t.mean){var a="";"CT"===w&&(a=" HU");var o="Mean: "+m(t.mean.toFixed(2))+a,s="StdDev: "+m(t.stdDev.toFixed(2))+a;n&&void 0!==n.mean&&(o+=" SUV: "+m(n.mean.toFixed(2)),s+=" SUV: "+m(n.stdDev.toFixed(2))),i.push(o),i.push(s)}if(r){var l=" mm"+String.fromCharCode(178);E&&T||(l=" pixels"+String.fromCharCode(178));var u="Area: "+m(r.toFixed(2))+l;i.push(u)}return i}(r);r.handles.textBox.hasMoved||(r.handles.textBox.x=Math.max(r.handles.start.x,r.handles.end.x),r.handles.textBox.y=(r.handles.start.y+r.handles.end.y)/2),(0,c.default)(e,h,r.handles.textBox,b,r.handles,O,n,g,0,!0)})},C=0;C<n.data.length;C++)S(C)}function O(e){var t=Math.min(e.start.x,e.end.x),n=Math.min(e.start.y,e.end.y),r=Math.abs(e.start.x-e.end.x),i=Math.abs(e.start.y-e.end.y);return[{x:t+r/2,y:n},{x:t,y:n+i/2},{x:t+r/2,y:n+i},{x:t+r,y:n+i/2}]}}var b=(0,i.default)({createNewMeasurement:g,onImageRendered:y,pointNearTool:v,toolType:p}),_=(0,a.default)({createNewMeasurement:g,onImageRendered:y,pointNearTool:v,toolType:p});t.rectangleRoi=b,t.rectangleRoiTouch=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.probeTouch=t.probe=void 0;var r=p(n(0)),i=p(n(10)),a=p(n(12)),o=p(n(7)),s=p(n(21)),l=p(n(9)),u=p(n(11)),d=p(n(41)),c=p(n(20)),f=n(2),h=n(3);function p(e){return e&&e.__esModule?e:{default:e}}var g="probe";function v(e){return{visible:!0,active:!0,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}}}function m(e,t,n){if(!1===t.visible)return!1;var i=r.default.cornerstone.pixelToCanvas(e,t.handles.end);return r.default.cornerstoneMath.point.distance(i,n)<5}function y(e){var t=e.detail,n=(0,f.getToolState)(e.currentTarget,g);if(n)for(var i=r.default.cornerstone,a=(0,h.getNewContext)(t.canvasContext.canvas),p=s.default.getFontSize(),v=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,h.draw)(a,function(e){var n=o.default.getColorIfActive(r);(0,l.default)(e,t,r.handles,n);var a=Math.round(r.handles.end.x),s=Math.round(r.handles.end.y),f=void 0,h=void 0,g=void 0;if(a>=0&&s>=0&&a<t.image.columns&&s<t.image.rows){if(t.image.color)h=a+", "+s,g="R: "+(f=(0,d.default)(t.element,a,s,1,1))[0]+" G: "+f[1]+" B: "+f[2];else{var v=(f=i.getStoredPixels(t.element,a,s,1,1))[0],m=v*t.image.slope+t.image.intercept,y=(0,c.default)(t.image,v);h=a+", "+s,g="SP: "+v+" MO: "+parseFloat(m.toFixed(3)),y&&(g+=" SUV: "+parseFloat(y.toFixed(3)))}var b={x:r.handles.end.x+3,y:r.handles.end.y-3},_=i.pixelToCanvas(t.element,b);(0,u.default)(e,g,_.x,_.y+p+5,n),(0,u.default)(e,h,_.x,_.y,n)}})},m=0;m<n.data.length;m++)v(m)}var b=(0,i.default)({createNewMeasurement:v,onImageRendered:y,pointNearTool:m,toolType:g}),_=(0,a.default)({createNewMeasurement:v,onImageRendered:y,pointNearTool:m,toolType:g});t.probe=b,t.probeTouch=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,i(n(36)).default)(function(e){var t=e.detail,n=a.getConfiguration();n&&n.testPointers(t)&&(t.viewport.translation.x+=t.deltaPoints.page.x/t.viewport.scale,t.viewport.translation.y+=t.deltaPoints.page.y/t.viewport.scale,r.default.cornerstone.setViewport(t.element,t.viewport),e.preventDefault(),e.stopPropagation())});a.setConfiguration({testPointers:function(e){return e.numPointers>=2}}),t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.panTouchDrag=t.pan=void 0;var r=u(n(1)),i=u(n(0)),a=u(n(16)),o=u(n(18)),s=u(n(5)),l=n(4);function u(e){return e&&e.__esModule?e:{default:e}}var d="pan";function c(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,f),t.removeEventListener(r.default.MOUSE_UP,c),t.removeEventListener(r.default.MOUSE_CLICK,c)}function f(e){var t=e.detail,n=t.viewport.scale,r=t.viewport.scale,a=t.image.columnPixelSpacing||1,o=t.image.rowPixelSpacing||1;o<a?n*=a/o:a<o&&(r*=o/a),t.viewport.translation.x+=t.deltaPoints.page.x/n,t.viewport.translation.y+=t.deltaPoints.page.y/r,i.default.cornerstone.setViewport(t.element,t.viewport),e.preventDefault(),e.stopPropagation()}var h=(0,a.default)(function(e){var t=e.detail,n=t.element,i=(0,l.getToolOptions)(d,n);(0,s.default)(t.which,i.mouseButtonMask)&&(n.addEventListener(r.default.MOUSE_DRAG,f),n.addEventListener(r.default.MOUSE_UP,c),n.addEventListener(r.default.MOUSE_CLICK,c),e.preventDefault(),e.stopPropagation())},d),p=(0,o.default)(f,d);t.pan=h,t.panTouchDrag=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(0)),i=d(n(66)),a=d(n(24)),o=d(n(7)),s=n(11),l=d(s),u=n(3);function d(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)(function(e){var t=e.detail,n=t.element,a=function(e){var t=r.default.cornerstone,n=t.getEnabledElement(e),a=t.metaData.get("imagePlaneModule",n.image.imageId);if(a&&a.rowCosines&&a.columnCosines){var o=i.default.getOrientationString(a.rowCosines),s=i.default.getOrientationString(a.columnCosines),l=i.default.invertOrientationString(o);return{top:i.default.invertOrientationString(s),bottom:s,left:l,right:o}}}(n);if(a){var d=function(e){var t=r.default.cornerstone,n=t.getEnabledElement(e),i=void 0;i={x:n.image.width/2,y:5};var a=t.pixelToCanvas(e,i);i={x:n.image.width/2,y:n.image.height-5};var o=t.pixelToCanvas(e,i);i={x:5,y:n.image.height/2};var s=t.pixelToCanvas(e,i);return i={x:n.image.width-10,y:n.image.height/2},{top:a,bottom:o,left:s,right:t.pixelToCanvas(e,i)}}(n),f=(0,u.getNewContext)(t.canvasContext.canvas),h=o.default.getToolColor(),p=(0,s.textBoxWidth)(f,a.top,0),g=(0,s.textBoxWidth)(f,a.left,0),v=(0,s.textBoxWidth)(f,a.right,0),m=(0,s.textBoxWidth)(f,a.bottom,0);(0,l.default)(f,a.top,d.top.x-p/2,d.top.y,h),(0,l.default)(f,a.left,d.left.x-g/2,d.left.y,h);var y=c.getConfiguration();y&&y.drawAllMarkers&&((0,l.default)(f,a.right,d.right.x-v/2,d.right.y,h),(0,l.default)(f,a.bottom,d.bottom.x-m/2,d.bottom.y,h))}});t.default=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.magnifyTouchDrag=t.magnify=void 0;var r=d(n(1)),i=d(n(0)),a=n(33),o=d(n(5)),s=n(4),l=n(8),u=n(3);function d(e){return e&&e.__esModule?e:{default:e}}var c="magnify",f={magnifySize:300,magnificationLevel:5},h=void 0,p=void 0,g=void 0,v=void 0;function m(e){var t=e.detail,n=t.element;n.removeEventListener(r.default.MOUSE_DRAG,E),n.removeEventListener(r.default.MOUSE_UP,m),n.removeEventListener(r.default.MOUSE_CLICK,m),y(t)}function y(e){e.element.querySelector(".magnifyTool").style.display="none",document.body.style.cursor="default",S()}function b(e){var t=e.detail,n=t.element,a=(0,s.getToolOptions)(c,n);(e.isTouchEvent||(0,o.default)(t.which,a.mouseButtonMask))&&(n.addEventListener(r.default.MOUSE_DRAG,E),n.addEventListener(r.default.TOUCH_DRAG,E),n.addEventListener(r.default.MOUSE_UP,m),n.addEventListener(r.default.TOUCH_END,m),n.addEventListener(r.default.MOUSE_CLICK,m),n.addEventListener(i.default.cornerstone.EVENTS.NEW_IMAGE,_),function(e){S();var t=e.enabledElement;void 0===t&&(t=i.default.cornerstone.getEnabledElement(e.element));var n=O.getConfiguration().magnificationLevel,r=t.canvas,a=t.image;(v=document.createElement("div")).width=r.width*n,v.height=r.height*n,i.default.cornerstone.enable(v);var o=i.default.cornerstone.getEnabledElement(v),s=i.default.cornerstone.getViewport(t.element);(g=o.canvas).width=r.width*n,g.height=r.height*n,o.viewport=Object.assign({},s),s.scale*=n,i.default.cornerstone.displayImage(v,a),i.default.cornerstone.setViewport(v,s)}(t),window.requestAnimationFrame(function(){return T(t)}),e.preventDefault(),e.stopPropagation())}function _(e){var t=e.detail;t.currentPoints=p,T(t)}function w(e){var t=e.detail,n=t.element;n.removeEventListener(r.default.TOUCH_DRAG_END,w),n.removeEventListener(r.default.TOUCH_END,w),n.removeEventListener(i.default.cornerstone.EVENTS.NEW_IMAGE,_),y(t)}function E(e){var t=e.detail,n=t.element;T(t),!0===t.isTouchEvent&&(n.addEventListener(r.default.TOUCH_DRAG_END,w),n.addEventListener(r.default.TOUCH_END,w)),e.preventDefault(),e.stopPropagation()}function T(e){var t=e.element,n=t.querySelector(".magnifyTool");if(n||x(e.element),void 0!==g){var r=O.getConfiguration(),a=r.magnifySize,o=r.magnificationLevel,s=t.querySelector("canvas:not(.magnifyTool)"),d=(0,u.getNewContext)(n),c=a,f=i.default.cornerstone.pixelToCanvas(e.element,e.currentPoints.image);(0,l.clipToBox)(f,s),d.clearRect(0,0,a,a);var p={left:0,top:0,width:a,height:a};(0,u.fillBox)(d,p,"transparent");var v={x:f.x*o-.5*c,y:f.y*o-.5*c};"Safari"===h&&(v.x=Math.max(v.x,0),v.y=Math.max(v.y,0)),v.x=Math.min(v.x,g.width),v.y=Math.min(v.y,g.height),d.drawImage(g,v.x,v.y,c,c,0,0,c,c),n.style.top=f.y-.5*a+"px",n.style.left=f.x-.5*a+"px",e.isTouchEvent&&(n.style.top=f.y-.5*a-120+"px"),n.style.display="block",document.body.style.cursor="none"}}function x(e){if(null===e.querySelector(".magnifyTool")){var t=document.createElement("canvas");t.classList.add("magnifyTool");var n=O.getConfiguration();t.width=n.magnifySize,t.height=n.magnifySize,t.style.position="absolute",t.style.display="none",e.appendChild(t)}}function S(){void 0!==v&&(i.default.cornerstone.disable(v),v=void 0,g=void 0)}function C(e){e.removeEventListener(r.default.MOUSE_DOWN,b),function(e){var t=e.querySelector(".magnifyTool");t&&e.removeChild(t)}(e)}var O={enable:function(e){var t=O.getConfiguration(t);if(!h){var n=(0,a.getBrowserInfo)().split(" ");h=n[0]}x(e)},activate:function(e,t){(0,s.setToolOptions)(c,e,{mouseButtonMask:t}),e.removeEventListener(r.default.MOUSE_DOWN,b),e.addEventListener(r.default.MOUSE_DOWN,b),x(e)},deactivate:C,disable:C,getConfiguration:function(){return f},setConfiguration:function(e){f=e}};function P(e){e.removeEventListener(r.default.TOUCH_START,b),e.addEventListener(r.default.TOUCH_START,b)}function I(e){e.removeEventListener(r.default.TOUCH_START,b)}var M={activate:P,deactivate:I,enable:P,disable:I};t.magnify=O,t.magnifyTouchDrag=M},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.lengthTouch=t.length=void 0;var r=h(n(0)),i=h(n(10)),a=h(n(12)),o=h(n(17)),s=h(n(14)),l=h(n(7)),u=h(n(9)),d=n(2),c=h(n(27)),f=n(3);function h(e){return e&&e.__esModule?e:{default:e}}var p="length";function g(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function v(e,t,n){return!1!==t.visible&&(0,c.default)(e,t.handles.start,t.handles.end,n)<25}function m(e){var t=e.detail,n=(0,d.getToolState)(e.currentTarget,p);if(n){var i=r.default.cornerstone,a=(0,f.getNewContext)(t.canvasContext.canvas),c=t.image,h=t.element,g=s.default.getToolWidth(),v=y.getConfiguration(),m=i.metaData.get("imagePlaneModule",c.imageId),b=void 0,_=void 0;m?(b=m.rowPixelSpacing||m.rowImagePixelSpacing,_=m.columnPixelSpacing||m.colImagePixelSpacing):(b=c.rowPixelSpacing,_=c.columnPixelSpacing);for(var w=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,f.draw)(a,function(e){(0,f.setShadow)(e,v);var n=l.default.getColorIfActive(r);(0,f.drawLine)(e,h,r.handles.start,r.handles.end,{color:n});var i={drawHandlesIfActive:v&&v.drawHandlesOnHover};(0,u.default)(e,t,r.handles,n,i);var a=(r.handles.end.x-r.handles.start.x)*(_||1),s=(r.handles.end.y-r.handles.start.y)*(b||1),d=Math.sqrt(a*a+s*s);if(r.length=d,!r.handles.textBox.hasMoved){var c={x:Math.max(r.handles.start.x,r.handles.end.x)};c.x===r.handles.start.x?c.y=r.handles.start.y:c.y=r.handles.end.y,r.handles.textBox.x=c.x,r.handles.textBox.y=c.y}var p=function(e,t,n){var r=" mm";return b&&_||(r=" pixels"),""+e.length.toFixed(2)+r}(r);(0,o.default)(e,h,r.handles.textBox,p,r.handles,T,n,g,10,!0)})},E=0;E<n.data.length;E++)w(E)}function T(e){var t={x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2};return[e.start,t,e.end]}}var y=(0,i.default)({createNewMeasurement:g,onImageRendered:m,pointNearTool:v,toolType:p}),b=(0,a.default)({createNewMeasurement:g,onImageRendered:m,pointNearTool:v,toolType:p});t.length=y,t.lengthTouch=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(24)),i=o(n(11)),a=n(3);function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)(function(e){var t=e.detail,n=t.image.stats,r=(0,a.getNewContext)(t.canvasContext.canvas),o=[];Object.keys(n).forEach(function(e){var t=e+" : "+n[e];o.push(t)}),(0,i.default)(r,o,0,0,"orange"),o.forEach(function(e){})});t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.highlightTouch=t.highlight=void 0;var r=d(n(0)),i=d(n(51)),a=d(n(12)),o=d(n(7)),s=d(n(9)),l=n(2),u=n(3);function d(e){return e&&e.__esModule?e:{default:e}}var c="highlight";function f(e){var t=(0,l.getToolState)(e.event.currentTarget,c);if(!(t&&t.data&&t.data.length>0))return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}}}function h(e,t,n){var i=r.default.cornerstone,a=i.pixelToCanvas(e,t.handles.start),o=i.pixelToCanvas(e,t.handles.end),s=Math.min(a.x,o.x),l=Math.min(a.y,o.y),u=Math.abs(a.x-o.x),d=Math.abs(a.y-o.y),c=!1;return n.x>=s&&n.x<=s+u&&n.y>=l&&n.y<=l+d&&(c=!0),c}function p(e,t,n){if(!1===t.visible)return!1;var i=r.default.cornerstone,a=i.pixelToCanvas(e,t.handles.start),o=i.pixelToCanvas(e,t.handles.end),s={left:Math.min(a.x,o.x),top:Math.min(a.y,o.y),width:Math.abs(a.x-o.x),height:Math.abs(a.y-o.y)};return r.default.cornerstoneMath.rect.distanceToPoint(s,n)<5}function g(e){var t=e.detail,n=(0,l.getToolState)(e.currentTarget,c);if(void 0!==n){var r=(0,u.getNewContext)(t.canvasContext.canvas),i=n.data[0];!1!==i.visible&&i&&(0,u.draw)(r,function(e){var n={color:"transparent",fillStyle:"rgba(0,0,0,0.7)"};(0,u.fillOutsideRect)(e,t.element,i.handles.start,i.handles.end,n);var r=o.default.getColorIfActive(i);n={color:r,lineDash:[4]},(0,u.drawRect)(e,t.element,i.handles.start,i.handles.end,n),(0,s.default)(e,t,i.handles,r)})}}var v=(0,i.default)({createNewMeasurement:f,onImageRendered:g,pointNearTool:p,pointInsideRect:h,toolType:c},!0),m=(0,a.default)({createNewMeasurement:f,onImageRendered:g,pointNearTool:p,pointInsideRect:h,toolType:c},!0);t.highlight=v,t.highlightTouch=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Sculpter=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(0))&&r.__esModule?r:{default:r},o=n(52),s=n(35),l=n(8);t.Sculpter=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"sculpt",value:function(e,t){this._setData(e,t),this._pushHandles(),this._insertNewHandles(),this._consolidateHandles()}},{key:"_setData",value:function(e,t){var n=o.freehandSculpter.getConfiguration();this._eventData=e,this._element=e.element,this._image=e.image,this._mousePoint=e.currentPoints.image,this._dataHandles=t,this._toolSize=n.toolSizeImage,this._minSpacing=n.minSpacing,this._maxSpacing=n.maxSpacing}},{key:"_pushHandles",value:function(){for(var e=this._dataHandles,t=this._mousePoint,n=this._toolSize,r=0;r<e.length;r++){var i=a.default.cornerstoneMath.point.distance(e[r],t);i<n&&this._pushOneHandle(r,i)}}},{key:"_pushOneHandle",value:function(t,n){var r=this._dataHandles,i=r[t],a=this._mousePoint,o=this._toolSize,s=(i.x-a.x)/n,u=(i.y-a.y)/n,d={x:a.x+o*s,y:a.y+o*u};(0,l.clipToBox)(d,this._image),i.x=d.x,i.y=d.y;var c=e.getPreviousHandleIndex(t,r.length);r[c].lines.pop(),r[c].lines.push(i)}},{key:"_insertNewHandles",value:function(){for(var e=this._findNewHandleIndicies(),t=0,n=0;n<e.length;n++){var r=e[n]+1+t;this._insertHandleRadially(r),t++}}},{key:"_findNewHandleIndicies",value:function(){for(var t=this._dataHandles,n=[],r=0;r<t.length;r++){var i=a.default.cornerstone.pixelToCanvas(this._element,t[r]),o=e.getNextHandleIndex(r,t.length),s=a.default.cornerstone.pixelToCanvas(this._element,t[o]);a.default.cornerstoneMath.point.distance(i,s)>this._maxSpacing&&n.push(r)}return n}},{key:"_insertHandleRadially",value:function(t){var n=this._dataHandles,r=t-1,i=e.getNextHandleIndexBeforeInsert(t,n.length),a=this._getInsertPosition(t,r,i),o=new s.FreehandHandleData(a);n.splice(t,0,o),n[r].lines.pop(),n[r].lines.push(n[t]),t===n.length-1?n[t].lines.push(n[0]):n[t].lines.push(n[t+1])}},{key:"_getInsertPosition",value:function(e,t,n){var r=this._toolSize,i=this._mousePoint,o=this._dataHandles,s={x:(o[t].x+o[n].x)/2,y:(o[t].y+o[n].y)/2},u=a.default.cornerstoneMath.point.distance(i,s),d=void 0;if(u<r){var c={x:(s.x-i.x)/u,y:(s.y-i.y)/u};d={x:i.x+r*c.x,y:i.y+r*c.y}}else d=s;return(0,l.clipToBox)(d,this._image),d}},{key:"_consolidateHandles",value:function(){if(this._dataHandles.length>3){var e=this._findCloseHandlePairs();this._mergeCloseHandles(e)}}},{key:"_mergeCloseHandles",value:function(t){for(var n=0,r=0;r<t.length;r++){var i=e.getCorrectedPair(t[r],n);this._combineHandles(i),n++}var a=this._findCloseHandlePairs();a.length&&this._mergeCloseHandles(a)}},{key:"_findCloseHandlePairs",value:function(){for(var t=this._dataHandles,n=this._element,r=[],i=t.length,o=0;o<i;o++){var s=a.default.cornerstone.pixelToCanvas(n,t[o]),l=e.getNextHandleIndex(o,t.length),u=a.default.cornerstone.pixelToCanvas(n,t[l]);if(a.default.cornerstoneMath.point.distance(s,u)<this._minSpacing){var d=[o,l];r.push(d),0===o&&(i-=1),o++}}return r}},{key:"_combineHandles",value:function(t){var n=this._dataHandles,r={x:(n[t[0]].x+n[t[1]].x)/2,y:(n[t[0]].y+n[t[1]].y)/2};(0,l.clipToBox)(r,this._image),n[t[0]].x=r.x,n[t[0]].y=r.y;var i=e.getNextHandleIndex(t[1],n.length);n[t[0]].lines.pop(),n[t[0]].lines.push(n[i]),n.splice(t[1],1)}}],[{key:"getNextHandleIndex",value:function(e,t){return e===t-1?0:e+1}},{key:"getNextHandleIndexBeforeInsert",value:function(e,t){return e===t?0:e}},{key:"getPreviousHandleIndex",value:function(e,t){return 0===e?t-1:e-1}},{key:"getCorrectedPair",value:function(e,t){var n=[e[0]-t,e[1]-t];return n[1]<0&&(n[1]=0),n}}]),e}()},function(e,t,n){function r(e,t,n){return r=e.y,i=t.y,a=n.y,!(!(i<r&&r<a||a<r&&r<i)||!function(e,t,n){if(t.x>e.x&&n.x>e.x)return!0;if(t.x===n.x)return e.x<t.x;if(t.x>n.x){var r=t;t=n,n=r}var i=function(e,t,n){var r=(n.y-t.y)/(n.x-t.x);return{value:t.x+r*(e.x-t.x),gradient:r}}(e,t,n);return Math.sign(i.gradient)*e.y>i.value}(e,t,n));var r,i,a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=!1,i=e.length-1,a=0;a<e.length;a++)r(t,e[a],e[i])&&(n=!n),i=a;return n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r={count:0,mean:0,variance:0,stdDev:0},i=function(e,t,n){for(var r={value:0,squared:0,count:0},i=0,o=t.top;o<t.top+t.height;o++)for(var s=t.left;s<t.left+t.width;s++)a(n,{x:s,y:o},r,e[i]),i++;return r}(e,t,n);return 0===i.count?r:(r.count=i.count,r.mean=i.value/i.count,r.variance=i.squared/i.count-r.mean*r.mean,r.stdDev=Math.sqrt(r.variance),r)};var r,i=(r=n(94))&&r.__esModule?r:{default:r};function a(e,t,n,r){(0,i.default)(e,t)&&(n.value+=r,n.squared+=r*r,n.count++)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=0,r=e.length-1;t=t||1;for(var i=0;i<e.length;i++)n+=(e[r].x+e[i].x)*(e[r].y-e[i].y),r=i;return Math.abs(n*t/2)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClickedLineData=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.toolIndex=t,this.handleIndexArray=n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.detail;if(t&&null!==t.handleNearby)!function(e,t){var n=(0,o.getToolState)(e.element,l);if(void 0!==n){var r=t.handleIndex,i=t.toolIndex,a=n.data[i];a.handles.length<=3||(r===a.handles.length-1?(a.handles[r-1].lines.pop(),a.handles[r-1].lines.push(a.handles[0])):0===r?(a.handles[a.handles.length-1].lines.pop(),a.handles[a.handles.length-1].lines.push(a.handles[r+1])):(a.handles[r-1].lines.pop(),a.handles[r-1].lines.push(a.handles[r+1])),a.handles.splice(r,1),a.invalidated=!0,a.active=!0,a.highlight=!0,s.default.cornerstone.updateImage(e.element))}}(n,{toolIndex:t.toolIndex,handleIndex:t.handleNearby});else{var r=new i.FreehandLineFinder(n).findLine();r&&function(e,t){var n=(0,o.getToolState)(e.element,l);if(void 0!==n){var r=n.data[t.toolIndex],i=function(e){for(var t=e.handleIndexArray,n=1/0,r=t.includes(0),i=0;i<t.length;i++){var a=t[i];0!==a&&a<n&&(n=a)}return r&&1===n&&(n=0),++n}(t);if(i!==1/0){var u=new a.FreehandHandleData(e.currentPoints.image);r.handles.splice(i,0,u),r.handles[i-1].lines.pop(),r.handles[i-1].lines.push(e.currentPoints.image),i===r.handles.length-1?r.handles[i].lines.push(r.handles[0]):r.handles[i].lines.push(r.handles[i+1]),r.active=!0,r.highlight=!0,r.invalidated=!0,s.default.cornerstone.updateImage(e.element)}}}(n,r)}e.preventDefault(),e.stopPropagation()};var r,i=n(53),a=n(35),o=n(2),s=(r=n(0))&&r.__esModule?r:{default:r},l="freehand"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.detail;var n=r.freehand.getConfiguration();return!0===n.movingTextBox?(function(e,t){var n=r.freehand.getConfiguration();n.movingTextBox=!1,t.data[n.currentTool].invalidated=!0,n.currentHandle=0,n.currentTool=-1}(0,t),"textBox"):n.modifying?(function(e,t){var n=r.freehand.getConfiguration(),i=n.currentTool,a=t.data[i].handles;if(a.invalidHandlePlacement){var o=n.currentHandle,s=a[o],l=void 0;l=0===o?a[a.length-1]:a[o-1],s.x=n.dragOrigin.x,s.y=n.dragOrigin.y,l.lines[0]=s,a.invalidHandlePlacement=!1}}(0,t),"handle"):null};var r=n(23)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=i.freehand.getConfiguration();n.movingTextBox&&function(e){var t=i.freehand.getConfiguration();e.hasMoved=!0,e.x=t.mouseLocation.handles.start.x,e.y=t.mouseLocation.handles.start.y}(e),n.modifying&&function(e,t){var n=i.freehand.getConfiguration();if(t.handles.invalidHandlePlacement=a.default.modify(t.handles,e),t.active=!0,t.highlight=!0,t.handles[e].x=n.mouseLocation.handles.start.x,t.handles[e].y=n.mouseLocation.handles.start.y,e){var r=t.handles[e-1].lines.length-1,o=t.handles[e-1].lines[r];o.x=n.mouseLocation.handles.start.x,o.y=n.mouseLocation.handles.start.y}}(e,t)};var r,i=n(23),a=(r=n(54))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.eraserTouch=t.eraser=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(47)),a=l(n(0)),o=l(n(1)),s=n(4);function l(e){return e&&e.__esModule?e:{default:e}}var u={supportedTools:{}};function d(e){var t=e.detail.currentPoints.canvas,n=e.detail.element,o=!1,s=!1;Object.entries(u.supportedTools).forEach(function(e){var a=r(e,2),l=a[0],u=a[1],d=i.getToolState(n,l);d&&d.data.forEach(function(e){!o&&u.pointNearTool(n,e,t)&&(i.removeToolState(n,l,e),o=!0,s=!0)})}),s&&a.default.cornerstone.updateImage(n)}function c(e){var t=e.detail.currentPoints.canvas,n=e.detail.element,o=!1,s=!1;Object.entries(u.supportedTools).forEach(function(e){var a=r(e,2),l=a[0],u=a[1],d=i.getToolState(n,l);d&&d.data.forEach(function(e){e.active&&(e.active=!1,o=!0),!s&&u.pointNearTool(n,e,t)&&(e.active=!0,o=!0,s=!0)})}),o&&a.default.cornerstone.updateImage(n)}var f={activate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mouseButtonMask=t,(0,s.setToolOptions)("eraser",e,n),e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,d),e.removeEventListener(o.default.MOUSE_MOVE,c),e.addEventListener(o.default.MOUSE_DOWN_ACTIVATE,d),e.addEventListener(o.default.MOUSE_MOVE,c),u.supportedTools={},Object.keys(i).forEach(function(e){var t=i[e];"function"==typeof t.pointNearTool&&(u.supportedTools[e]=t)})},disable:function(e){e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,d),e.removeEventListener(o.default.MOUSE_MOVE,c)},enable:function(e){e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,d),e.removeEventListener(o.default.MOUSE_MOVE,c)},deactivate:function(e){e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,d),e.removeEventListener(o.default.MOUSE_MOVE,c)},getConfiguration:function(){return u},setConfiguration:function(e){u=e}},h=(0,l(n(56)).default)(d,"eraser");t.eraser=f,t.eraserTouch=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ellipticalRoiTouch=t.ellipticalRoi=void 0;var r=g(n(0)),i=g(n(10)),a=g(n(12)),o=g(n(14)),s=g(n(7)),l=g(n(9)),u=g(n(42)),d=g(n(62)),c=g(n(20)),f=g(n(17)),h=n(2),p=n(3);function g(e){return e&&e.__esModule?e:{default:e}}var v="ellipticalRoi";function m(e){return{visible:!0,active:!0,invalidated:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function y(e,t,n,i){if(!1===t.visible)return!1;var a=r.default.cornerstone,o=a.pixelToCanvas(e,t.handles.start),s=a.pixelToCanvas(e,t.handles.end),l={left:Math.min(o.x,s.x)+i/2,top:Math.min(o.y,s.y)+i/2,width:Math.abs(o.x-s.x)-i,height:Math.abs(o.y-s.y)-i},d={left:Math.min(o.x,s.x)-i/2,top:Math.min(o.y,s.y)-i/2,width:Math.abs(o.x-s.x)+i,height:Math.abs(o.y-s.y)+i},c=(0,u.default)(l,n);return!(!(0,u.default)(d,n)||c)}function b(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function _(e){var t=e.detail,n=(0,h.getToolState)(e.currentTarget,v);if(n){var i=r.default.cornerstone,a=t.image,u=t.element,g=o.default.getToolWidth(),m=w.getConfiguration(),y=i.metaData.get("generalSeriesModule",a.imageId),_=i.metaData.get("imagePlaneModule",a.imageId),E=void 0,T=void 0,x=void 0;_?(T=_.rowPixelSpacing||_.rowImagePixelSpacing,x=_.columnPixelSpacing||_.colImagePixelSpacing):(T=a.rowPixelSpacing,x=a.columnPixelSpacing),y&&(E=y.modality);for(var S=(0,p.getNewContext)(t.canvasContext.canvas),C=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,p.draw)(S,function(e){(0,p.setShadow)(e,m);var n=s.default.getColorIfActive(r);(0,p.drawEllipse)(e,u,r.handles.start,r.handles.end,{color:n}),m&&m.drawHandlesOnHover?!0===r.active?(0,l.default)(e,t,r.handles,n):(0,l.default)(e,t,r.handles,n,{drawHandlesIfActive:!0}):(0,l.default)(e,t,r.handles,n);var o=void 0,h=void 0,v=void 0;if(!1===r.invalidated)h=r.meanStdDev,v=r.meanStdDevSUV,o=r.area;else{var y={left:Math.round(Math.min(r.handles.start.x,r.handles.end.x)),top:Math.round(Math.min(r.handles.start.y,r.handles.end.y)),width:Math.round(Math.abs(r.handles.start.x-r.handles.end.x)),height:Math.round(Math.abs(r.handles.start.y-r.handles.end.y))};if(!a.color){var _=i.getPixels(u,y.left,y.top,y.width,y.height);h=(0,d.default)(_,y),"PT"===E&&(v={mean:(0,c.default)(a,(h.mean-a.intercept)/a.slope),stdDev:(0,c.default)(a,(h.stdDev-a.intercept)/a.slope)}),h&&!isNaN(h.mean)&&(r.meanStdDev=h,r.meanStdDevSUV=v)}o=Math.PI*(y.width*(x||1)/2)*(y.height*(T||1)/2),isNaN(o)||(r.area=o),r.invalidated=!1}r.handles.textBox.hasMoved||(r.handles.textBox.x=Math.max(r.handles.start.x,r.handles.end.x),r.handles.textBox.y=(r.handles.start.y+r.handles.end.y)/2);var w=function(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,i=[];if(t&&void 0!==t.mean){var a="";"CT"===E&&(a=" HU");var o="Mean: "+b(t.mean.toFixed(2))+a,s="StdDev: "+b(t.stdDev.toFixed(2))+a;n&&void 0!==n.mean&&(o+=" SUV: "+b(n.mean.toFixed(2)),s+=" SUV: "+b(n.stdDev.toFixed(2))),i.push(o),i.push(s)}if(r){var l=" mm"+String.fromCharCode(178);T&&x||(l=" pixels"+String.fromCharCode(178));var u="Area: "+b(r.toFixed(2))+l;i.push(u)}return i}(r);(0,f.default)(e,u,r.handles.textBox,w,r.handles,P,n,g,0,!0)})},O=0;O<n.data.length;O++)C(O)}function P(e){var t=Math.min(e.start.x,e.end.x),n=Math.min(e.start.y,e.end.y),r=Math.abs(e.start.x-e.end.x),i=Math.abs(e.start.y-e.end.y);return[{x:t+r/2,y:n},{x:t,y:n+i/2},{x:t+r/2,y:n+i},{x:t+r,y:n+i/2}]}}var w=(0,i.default)({createNewMeasurement:m,onImageRendered:_,pointNearTool:function(e,t,n){return y(e,t,n,15)},toolType:v}),E=(0,a.default)({createNewMeasurement:m,onImageRendered:_,pointNearTool:function(e,t,n){return y(e,t,n,25)},toolType:v});t.ellipticalRoi=w,t.ellipticalRoiTouch=E},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dragProbeTouch=t.dragProbe=void 0;var r=v(n(1)),i=v(n(0)),a=v(n(16)),o=v(n(18)),s=v(n(21)),l=v(n(7)),u=n(11),d=v(u),c=v(n(41)),f=v(n(20)),h=v(n(5)),p=n(4),g=n(3);function v(e){return e&&e.__esModule?e:{default:e}}var m="dragProbe",y=void 0;function b(e){var t=i.default.cornerstone,n=t.getEnabledElement(e.element),r=(0,g.getNewContext)(n.canvas),a=l.default.getActiveColor(),o=s.default.getFontSize(),u=T.getConfiguration(),h=Math.round(e.currentPoints.image.x),p=Math.round(e.currentPoints.image.y);h<0||p<0||h>=e.image.columns||p>=e.image.rows||(0,g.draw)(r,function(n){(0,g.setShadow)(n,u);var r=void 0,i=void 0,s=void 0;if(e.image.color)r=(0,c.default)(e.element,h,p,1,1),i=h+", "+p,s="R: "+r[0]+" G: "+r[1]+" B: "+r[2]+" A: "+r[3];else{var l=(r=t.getStoredPixels(e.element,h,p,1,1))[0],v=l*e.image.slope+e.image.intercept,m=(0,f.default)(e.image,l);i=h+", "+p,s="SP: "+l+" MO: "+parseFloat(v.toFixed(3)),m&&(s+=" SUV: "+parseFloat(m.toFixed(3)))}var y={x:e.currentPoints.image.x+3,y:e.currentPoints.image.y-3},b=t.pixelToCanvas(e.element,y);(0,d.default)(n,s,b.x,b.y+o+5,a),(0,d.default)(n,i,b.x,b.y,a)})}function _(e){var t=e.detail,n=t.element;n.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,w),n.removeEventListener(r.default.MOUSE_DRAG,E),n.removeEventListener(r.default.MOUSE_UP,_),n.removeEventListener(r.default.MOUSE_CLICK,_),i.default.cornerstone.updateImage(t.element)}function w(){y&&(T.strategy(y),y=null)}function E(e){var t=e.detail,n=t.element;y=t,i.default.cornerstone.updateImage(n),e.preventDefault(),e.stopPropagation()}var T=(0,a.default)(function(e){var t=e.detail,n=t.element,a=(0,p.getToolOptions)(m,n);(0,h.default)(t.which,a.mouseButtonMask)&&(n.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,w),n.addEventListener(r.default.MOUSE_DRAG,E),n.addEventListener(r.default.MOUSE_UP,_),n.addEventListener(r.default.MOUSE_CLICK,_),T.strategy(t),e.preventDefault(),e.stopPropagation())},m);T.strategies={default:b,minimal:function(e){var t,n=i.default.cornerstone,r=e.element,a=n.getEnabledElement(r),o=a.image,h=(0,g.getNewContext)(a.canvas),p=l.default.getActiveColor(),v=T.getConfiguration();(t=!0===e.isTouchEvent?n.pageToPixel(r,e.currentPoints.page.x,e.currentPoints.page.y-4*s.default.getFontSize()):n.pageToPixel(r,e.currentPoints.page.x,e.currentPoints.page.y-s.default.getFontSize()/2)).x<0||t.y<0||t.x>=o.columns||t.y>=o.rows||(0,g.draw)(h,function(i){(0,g.setShadow)(i,v);var a=n.metaData.get("generalSeriesModule",o.imageId),l=void 0;a&&(l=a.modality);var h=void 0,m="";if(o.color)m="R: "+(h=(0,c.default)(r,t.x,t.y,1,1))[0]+" G: "+h[1]+" B: "+h[2];else{var y=(h=n.getStoredPixels(r,t.x,t.y,1,1))[0],b=y*e.image.slope+e.image.intercept,_=parseFloat(b.toFixed(2));if("CT"===l)m+="HU: "+_;else if("PT"===l){m+=_;var w=(0,f.default)(e.image,y);w&&(m+=" SUV: "+parseFloat(w.toFixed(2)))}else m+=_}var E,T=n.pixelToCanvas(r,t),x=(0,u.textBoxWidth)(i,m,5);E=!0===e.isTouchEvent?{x:-x/2,y:-s.default.getFontSize()-10-12}:{x:12,y:-(s.default.getFontSize()+10)/2},(0,g.drawCircle)(i,r,T,6,{color:p},"canvas"),(0,d.default)(i,m,T.x+E.x,T.y+E.y,p)})}},T.strategy=b;var x={fireOnTouchStart:!0,touchStartCallback:function(e){e.detail.element.addEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,w)},touchEndCallback:function(e){var t=e.detail.element;t.removeEventListener(i.default.cornerstone.EVENTS.IMAGE_RENDERED,w),i.default.cornerstone.updateImage(t)}},S=(0,o.default)(E,m,x);t.dragProbe=T,t.dragProbeTouch=S},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){r.default.cornerstone.fitToWindow(e.element)}var o=(0,i(n(57)).default)(function(e){var t=e.detail;o.strategy(t),e.preventDefault(),e.stopPropagation()});o.strategies={default:a},o.strategy=a,t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.crosshairsTouch=t.crosshairs=void 0;var r=c(n(1)),i=c(n(0)),a=c(n(13)),o=n(2),s=c(n(5)),l=n(46),u=c(n(19)),d=n(4);function c(e){return e&&e.__esModule?e:{default:e}}var f="crosshairs";function h(e){var t=e.detail;e.stopImmediatePropagation();var n=(0,o.getToolState)(e.currentTarget,f);if(n){var r=i.default.cornerstone,s=e.currentTarget,d=r.getEnabledElement(s).image.imageId,c=r.metaData.get("imagePlaneModule",d);if(c){var h=t.currentPoints.image,p=(0,l.imagePointToPatientPoint)(h,c);n.data[0].synchronizationContext.getSourceElements().forEach(function(e){if(e!==s){var t=Number.MAX_VALUE,n=-1,i=(0,o.getToolState)(e,"stack");if(void 0!==i){var l=i.data[0];if(l.imageIds.forEach(function(e,i){var a=r.metaData.get("imagePlaneModule",e);if(a&&a.imagePositionPatient&&a.rowCosines&&a.columnCosines){var o=(0,u.default)(a.imagePositionPatient),s=(0,u.default)(a.rowCosines),l=(0,u.default)(a.columnCosines).clone().cross(s.clone()),d=Math.abs(l.clone().dot(o)-l.clone().dot(p));d<t&&(t=d,n=i)}}),n!==l.currentImageIdIndex&&-1!==n&&void 0!==l.imageIds[n]){var d=a.default.getStartLoadHandler(),c=a.default.getEndLoadHandler(),f=a.default.getErrorLoadingHandler();d&&d(e),(!0===l.preventCache?r.loadImage(l.imageIds[n]):r.loadAndCacheImage(l.imageIds[n])).then(function(t){var i=r.getViewport(e);l.currentImageIdIndex=n,r.displayImage(e,t,i),c&&c(e,t)},function(t){var r=l.imageIds[n];f&&f(e,r,t)})}}}})}}}function p(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,v),t.removeEventListener(r.default.MOUSE_UP,p)}function g(e){var t=e.detail,n=t.element,i=(0,d.getToolOptions)(f,n);(0,s.default)(t.which,i.mouseButtonMask)&&(n.addEventListener(r.default.MOUSE_DRAG,v),n.addEventListener(r.default.MOUSE_UP,p),h(e),e.preventDefault(),e.stopPropagation())}function v(e){h(e),e.preventDefault(),e.stopPropagation()}function m(e,t,n){(0,d.setToolOptions)(f,e,{mouseButtonMask:t}),(0,o.clearToolState)(e,f),(0,o.addToolState)(e,f,{synchronizationContext:n}),e.removeEventListener(r.default.MOUSE_DOWN,g),e.addEventListener(r.default.MOUSE_DOWN,g)}function y(e){e.removeEventListener(r.default.MOUSE_DOWN,g)}var b={activate:m,deactivate:y,enable:m,disable:y};function _(e){var t=e.detail.element;t.removeEventListener(r.default.TOUCH_DRAG,E),t.removeEventListener(r.default.TOUCH_DRAG_END,_)}function w(e){var t=e.detail.element;return t.addEventListener(r.default.TOUCH_DRAG,E),t.addEventListener(r.default.TOUCH_DRAG_END,_),h(e),!1}function E(e){h(e),e.preventDefault(),e.stopPropagation()}function T(e,t){(0,o.clearToolState)(e,f),(0,o.addToolState)(e,f,{synchronizationContext:t}),e.removeEventListener(r.default.TOUCH_START,w),e.addEventListener(r.default.TOUCH_START,w)}function x(e){e.removeEventListener(r.default.TOUCH_START,w)}var S={activate:T,deactivate:x,enable:T,disable:x};t.crosshairs=b,t.crosshairsTouch=S},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,s){var l=e.length>0?i.default.cornerstoneMath.point.findClosestPoint(e,t):t,u=[{x:n.left+n.width/2,y:n.top},{x:n.left,y:n.top+n.height/2},{x:n.left+n.width/2,y:n.top+n.height},{x:n.left+n.width,y:n.top+n.height/2}],d=i.default.cornerstoneMath.point.findClosestPoint(u,l),c={color:o,lineWidth:s,lineDash:[2,3]};(0,a.drawLine)(r,void 0,l,d,c,"canvas")};var r,i=(r=n(0))&&r.__esModule?r:{default:r},a=n(3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.arrowAnnotateTouch=t.arrowAnnotate=void 0;var r=x(n(1)),i=x(n(0)),a=x(n(10)),o=x(n(12)),s=x(n(14)),l=x(n(21)),u=x(n(7)),d=x(n(9)),c=x(n(63)),f=x(n(30)),h=x(n(28)),p=x(n(15)),g=x(n(5)),v=x(n(22)),m=x(n(17)),y=n(2),b=n(4),_=x(n(27)),w=n(3),E=n(11),T=x(n(6));function x(e){return e&&e.__esModule?e:{default:e}}var S="arrowAnnotate",C={getTextCallback:function(e){e(prompt("Enter your annotation:"))},changeTextCallback:function(e,t,n){n(prompt("Change your annotation:"))},drawHandles:!1,drawHandlesOnHover:!0,arrowFirst:!0};function O(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function P(e,t,n){return!1!==t.visible&&(0,_.default)(e,t.handles.start,t.handles.end,n)<25}function I(e){var t=e.detail,n=(0,y.getToolState)(e.currentTarget,S);if(n)for(var r=t.enabledElement,a=i.default.cornerstone,o=(0,w.getNewContext)(t.canvasContext.canvas),f=s.default.getToolWidth(),h=M.getConfiguration(),p=function(e){var i=n.data[e];if(!1===i.visible)return"continue";(0,w.draw)(o,function(e){(0,w.setShadow)(e,h);var n=u.default.getColorIfActive(i),o=a.pixelToCanvas(t.element,i.handles.start),s=a.pixelToCanvas(t.element,i.handles.end);h.arrowFirst?(0,c.default)(e,s,o,n,f):(0,c.default)(e,o,s,n,f);var p={drawHandlesIfActive:h&&h.drawHandlesOnHover};h.drawHandles&&(0,d.default)(e,t,i.handles,n,p);var g=i.text;if(g&&""!==g){var y=(0,E.textBoxWidth)(e,g,5),b=l.default.getFontSize()+10,_=Math.max(y,b)/2+5;if(s.x<o.x&&(_=-_),!i.handles.textBox.hasMoved){var T;T=h.arrowFirst?{x:s.x-y/2+_,y:s.y-b/2}:{x:o.x-y/2-_,y:o.y-b/2};var x=a.internal.getTransform(r);x.invert();var S=x.transformPoint(T.x,T.y);i.handles.textBox.x=S.x,i.handles.textBox.y=S.y}(0,m.default)(e,t.element,i.handles.textBox,g,i.handles,v,n,f,0,!1)}})},g=0;g<n.data.length;g++)p(g);function v(e){var t={x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2};return[e.start,t,e.end]}}var M=(0,a.default)({addNewMeasurement:function(e){var t=e.element,n=O(e),a=i.default.cornerstone;function o(e){null===e?(0,y.removeToolState)(t,S,n):n.text=e,n.active=!1,a.updateImage(t);var i=r.default.MEASUREMENT_MODIFIED,o={toolType:S,element:t,measurementData:n};(0,T.default)(t,i,o),t.addEventListener(r.default.MOUSE_MOVE,M.mouseMoveCallback),t.addEventListener(r.default.MOUSE_DOWN,M.mouseDownCallback),t.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,M.mouseDownActivateCallback),t.addEventListener(r.default.MOUSE_DOUBLE_CLICK,M.mouseDoubleClickCallback)}(0,y.addToolState)(t,S,n),t.removeEventListener(r.default.MOUSE_MOVE,M.mouseMoveCallback),t.removeEventListener(r.default.MOUSE_DOWN,M.mouseDownCallback),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,M.mouseDownActivateCallback),t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,M.mouseDoubleClickCallback),a.updateImage(t),(0,f.default)(e,S,n,n.handles.end,function(){(0,p.default)(e,n.handles)&&(0,y.removeToolState)(t,S,n);var r=M.getConfiguration();void 0===n.text&&r.getTextCallback(o),a.updateImage(t)})},createNewMeasurement:O,onImageRendered:I,pointNearTool:P,toolType:S,mouseDoubleClickCallback:function(e){var t=e.detail,n=t.element,r=i.default.cornerstone,a=(0,b.getToolOptions)(S,n),o=void 0;if((0,g.default)(t.which,a.mouseButtonMask)){var s=M.getConfiguration(),l=t.currentPoints.canvas,u=(0,y.getToolState)(n,S);if(u)for(var d=0;d<u.data.length;d++)if(o=u.data[d],P(n,o,l)||(0,v.default)(o.handles.textBox,l))return o.active=!0,r.updateImage(n),s.changeTextCallback(o,t,c),e.stopImmediatePropagation(),!1}function c(e,t,i){!0===i?(0,y.removeToolState)(n,S,e):e.text=t,e.active=!1,r.updateImage(n)}}});M.setConfiguration(C);var A=(0,o.default)({addNewMeasurement:function(e){var t=e.element,n=O(e),a=i.default.cornerstone;function o(e){null===e?(0,y.removeToolState)(t,S,n):n.text=e,n.active=!1,a.updateImage(t);var i=r.default.MEASUREMENT_MODIFIED,o={toolType:S,element:t,measurementData:n};(0,T.default)(t,i,o),t.addEventListener(r.default.TOUCH_PRESS,A.pressCallback),t.addEventListener(r.default.TOUCH_START_ACTIVE,A.touchDownActivateCallback),t.addEventListener(r.default.TAP,A.tapCallback)}(0,y.addToolState)(t,S,n),t.removeEventListener(r.default.TOUCH_PRESS,A.pressCallback),t.removeEventListener(r.default.TOUCH_START_ACTIVE,A.touchDownActivateCallback),t.removeEventListener(r.default.TAP,A.tapCallback),a.updateImage(t),(0,h.default)(e,S,n,n.handles.end,function(){a.updateImage(t),(0,p.default)(e,n.handles)&&(0,y.removeToolState)(t,S,n);var r=M.getConfiguration();void 0===n.text&&r.getTextCallback(o)})},createNewMeasurement:O,onImageRendered:I,pointNearTool:P,toolType:S,pressCallback:function(e){var t=e.detail,n=t.element,a=i.default.cornerstone,o=void 0;function s(e,t,i){!0===i?(0,y.removeToolState)(n,S,e):e.text=t,e.active=!1,a.updateImage(n),n.addEventListener(r.default.TOUCH_START,A.touchStartCallback),n.addEventListener(r.default.TOUCH_START_ACTIVE,A.touchDownActivateCallback),n.addEventListener(r.default.TAP,A.tapCallback)}var l=M.getConfiguration(),u=t.currentPoints.canvas,d=(0,y.getToolState)(n,S);if(d){if(t.handlePressed)return n.removeEventListener(r.default.TOUCH_START,A.touchStartCallback),n.removeEventListener(r.default.TOUCH_START_ACTIVE,A.touchDownActivateCallback),n.removeEventListener(r.default.TAP,A.tapCallback),l.changeTextCallback(t.handlePressed,t,s),e.stopImmediatePropagation(),!1;for(var c=0;c<d.data.length;c++)if(o=d.data[c],P(n,o,u)||(0,v.default)(o.handles.textBox,u))return o.active=!0,a.updateImage(n),n.removeEventListener(r.default.TOUCH_START,A.touchStartCallback),n.removeEventListener(r.default.TOUCH_START_ACTIVE,A.touchDownActivateCallback),n.removeEventListener(r.default.TAP,A.tapCallback),l.changeTextCallback(o,t,s),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}}});t.arrowAnnotate=M,t.arrowAnnotateTouch=A},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.angleTouch=t.angle=void 0;var r=h(n(0)),i=h(n(10)),a=h(n(12)),o=h(n(11)),s=h(n(43)),l=h(n(7)),u=h(n(9)),d=n(2),c=h(n(27)),f=n(3);function h(e){return e&&e.__esModule?e:{default:e}}var p="angle";function g(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x-20,y:e.currentPoints.image.y+10,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},start2:{x:e.currentPoints.image.x-20,y:e.currentPoints.image.y+10,highlight:!0,active:!1},end2:{x:e.currentPoints.image.x,y:e.currentPoints.image.y+20,highlight:!0,active:!1}}}}function v(e,t,n){return!1!==t.visible&&((0,c.default)(e,t.handles.start,t.handles.end,n)<5||(0,c.default)(e,t.handles.start2,t.handles.end2,n)<5)}function m(e){var t=e.detail,n=(0,d.getToolState)(e.currentTarget,p);if(void 0!==n)for(var i=(0,f.getNewContext)(t.canvasContext.canvas),a=y.getConfiguration(),c=r.default.cornerstone,h=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,f.draw)(i,function(e){(0,f.setShadow)(e,a);var n=l.default.getColorIfActive(r);(0,f.drawJoinedLines)(e,t.element,r.handles.end,[r.handles.start,r.handles.end2],{color:n}),(0,u.default)(e,t,r.handles);var i=t.image.columnPixelSpacing||1,d=t.image.rowPixelSpacing||1,h=(Math.ceil(r.handles.start.x)-Math.ceil(r.handles.end.x))*i,p=(Math.ceil(r.handles.start.y)-Math.ceil(r.handles.end.y))*d,g=(Math.ceil(r.handles.start2.x)-Math.ceil(r.handles.end2.x))*i,v=(Math.ceil(r.handles.start2.y)-Math.ceil(r.handles.end2.y))*d,m=Math.acos(Math.abs((h*g+p*v)/(Math.sqrt(h*h+p*p)*Math.sqrt(g*g+v*v))));m*=180/Math.PI;var y=(0,s.default)(m,2).toString()+String.fromCharCode(parseInt("00B0",16)),b=c.pixelToCanvas(t.element,r.handles.start2),_=c.pixelToCanvas(t.element,r.handles.end2),w=(b.x+_.x)/2,E=(b.y+_.y)/2;(0,o.default)(e,y,w,E,n)})},g=0;g<n.data.length;g++)h(g)}var y=(0,i.default)({createNewMeasurement:g,onImageRendered:m,pointNearTool:v,toolType:p}),b=(0,a.default)({createNewMeasurement:g,onImageRendered:m,pointNearTool:v,toolType:p});t.angle=y,t.angleTouch=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1)),i=u(n(0)),a=u(n(40)),o=u(n(58)),s=u(n(6)),l=n(4);function u(e){return e&&e.__esModule?e:{default:e}}var d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,v=void 0,m=void 0,y=1,b=0,_=!1,w=!1,E=void 0,T=700,x=5,S="touchInput";function C(e){var t=i.default.cornerstone,n=e.currentTarget||e.srcEvent.currentTarget,o=t.getEnabledElement(n);if(o.image){var l=void 0,u=void 0,S=void 0,C=void 0;switch(e.preventDefault(),(e.pointers&&e.pointers.length>1||e.touches&&e.touches.length>1)&&(w=!1,clearTimeout(v)),e.type){case"tap":w=!1,clearTimeout(v),(c={page:i.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),l=r.default.TAP,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,currentPoints:c,type:l,isTouchEvent:!0},(0,s.default)(n,l,p);break;case"doubletap":w=!1,clearTimeout(v),(c={page:i.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),l=r.default.DOUBLE_TAP,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,currentPoints:c,type:l,isTouchEvent:!0},(0,s.default)(n,l,p);break;case"pinchstart":w=!1,clearTimeout(v),y=1;break;case"pinchmove":if(w=!1,clearTimeout(v),!0===_){y=e.scale,_=!1;break}u=(e.scale-y)/y,(d={page:e.center,image:t.pageToPixel(n,e.center.x,e.center.y)}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_PINCH,p={event:e,startPoints:d,viewport:t.getViewport(n),image:o.image,element:n,direction:e.scale<1?1:-1,scaleChange:u,type:l,isTouchEvent:!0},(0,s.default)(n,l,p),y=e.scale;break;case"touchstart":y=1,clearTimeout(v),clearTimeout(g),g=setTimeout(function(){(d={page:i.default.cornerstoneMath.point.pageToPoint(e.touches[0]),image:t.pageToPixel(n,e.touches[0].pageX,e.touches[0].pageY),client:{x:e.touches[0].clientX,y:e.touches[0].clientY}}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_START,e.touches.length>1&&(l=r.default.MULTI_TOUCH_START),p={event:e,viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,currentPoints:d,type:l,isTouchEvent:!0},!0===(0,s.default)(n,l,p)&&(l=r.default.TOUCH_START_ACTIVE,e.touches.length>1&&(l=r.default.MULTI_TOUCH_START_ACTIVE),p.type=l,(0,s.default)(n,l,p)),f=(0,a.default)(d)},50),w=!0,m=0,v=setTimeout(function(){w&&((c={page:i.default.cornerstoneMath.point.pageToPoint(e.touches[0]),image:t.pageToPixel(n,e.touches[0].pageX,e.touches[0].pageY),client:{x:e.touches[0].clientX,y:e.touches[0].clientY}}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_PRESS,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,currentPoints:c,type:l,isTouchEvent:!0},(0,s.default)(n,l,p))},T);break;case"touchend":y=1,w=!1,clearTimeout(v),setTimeout(function(){(d={page:i.default.cornerstoneMath.point.pageToPoint(e.changedTouches[0]),image:t.pageToPixel(n,e.changedTouches[0].pageX,e.changedTouches[0].pageY),client:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_END,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,currentPoints:d,type:l,isTouchEvent:!0},(0,s.default)(n,l,p)},50);break;case"panmove":S={x:e.deltaX-E.x,y:e.deltaY-E.y},E={x:e.deltaX,y:e.deltaY},(c={page:{x:f.page.x+S.x,y:f.page.y+S.y},image:t.pageToPixel(n,f.page.x+S.x,f.page.y+S.y),client:{x:f.client.x+S.x,y:f.client.y+S.y}}).canvas=t.pixelToCanvas(n,c.image),h={page:i.default.cornerstoneMath.point.subtract(c.page,f.page),image:i.default.cornerstoneMath.point.subtract(c.image,f.image),client:i.default.cornerstoneMath.point.subtract(c.client,f.client),canvas:i.default.cornerstoneMath.point.subtract(c.canvas,f.canvas)},(m+=Math.sqrt(h.page.x*h.page.x+h.page.y*h.page.y))>x&&(w=!1,clearTimeout(v)),l=r.default.TOUCH_DRAG,e.pointers.length>1&&(l=r.default.MULTI_TOUCH_DRAG),p={viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,lastPoints:f,currentPoints:c,deltaPoints:h,numPointers:e.pointers.length,type:l,isTouchEvent:!0},(0,s.default)(n,l,p),f=(0,a.default)(c);break;case"panstart":E={x:e.deltaX,y:e.deltaY},(c={page:i.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),f=(0,a.default)(c);break;case"panend":if(w=!1,clearTimeout(v),!f)return!1;(c={page:i.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),h={page:i.default.cornerstoneMath.point.subtract(c.page,f.page),image:i.default.cornerstoneMath.point.subtract(c.image,f.image),client:i.default.cornerstoneMath.point.subtract(c.client,f.client),canvas:i.default.cornerstoneMath.point.subtract(c.canvas,f.canvas)},l=r.default.TOUCH_DRAG_END,p={event:e.srcEvent,viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,lastPoints:f,currentPoints:c,deltaPoints:h,type:l,isTouchEvent:!0},(0,s.default)(n,l,p),2==e.pointers.length-e.changedPointers.length&&(_=!0);break;case"rotatemove":w=!1,clearTimeout(v),C=e.rotation-b,b=e.rotation,l=r.default.TOUCH_ROTATE,p={event:e.srcEvent,viewport:t.getViewport(n),image:o.image,element:n,rotation:C,type:l},(0,s.default)(n,l,p)}return!1}}function O(e){o.default.disable(e),["touchstart","touchend"].forEach(function(t){e.removeEventListener(t,C)});var t=(0,l.getToolOptions)(S,e).hammer;t&&t.off("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",C)}var P={enable:function(e){O(e);var t=i.default.Hammer,n={inputClass:t.SUPPORT_POINTER_EVENTS?t.PointerEventInput:t.TouchInput},r=new t.Manager(e,n),a={pointers:0,direction:t.DIRECTION_ALL,threshold:0},s=new t.Pan(a),u=new t.Pinch({threshold:0}),d=new t.Rotate({threshold:0});u.recognizeWith(s),u.recognizeWith(d),d.recognizeWith(s);var c=new t.Tap({event:"doubletap",taps:2,interval:1500,threshold:50,posThreshold:50});c.recognizeWith(s),r.add([c,s,d,u]),r.on("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",C),o.default.enable(e),["touchstart","touchend"].forEach(function(t){e.addEventListener(t,C)});var f=(0,l.getToolOptions)(S,e);f.hammer=r,(0,l.setToolOptions)(S,e,f)},disable:O};t.default=P},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(0)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=i.default.cornerstone,n=e.currentTarget,o=t.getEnabledElement(n);if(o.image&&!("mousewheel"===e.type&&0===e.wheelDeltaY||"DOMMouseScroll"===e.type&&1===e.axis)){e.preventDefault();var s=void 0,l=void 0;void 0!==e.pageX&&void 0!==e.pageY?(s=e.pageX,l=e.pageY):(s=e.x,l=e.y);var u=t.pageToPixel(n,s,l),d=((e=window.event&&window.event.wheelDelta?window.event:e).wheelDelta?e.wheelDelta:e.deltaY?-e.deltaY:e.detail?-e.detail:e.wheelDelta)<0?-1:1,c={element:n,viewport:t.getViewport(n),image:o.image,direction:d,pageX:s,pageY:l,imageX:u.x,imageY:u.y};(0,a.default)(n,r.default.MOUSE_WHEEL,c)}}var l=["mousewheel","DOMMouseScroll"];function u(e){l.forEach(function(t){e.removeEventListener(t,s)})}var d={enable:function(e){u(e),l.forEach(function(t){e.addEventListener(t,s)})},disable:u};t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),i=s(n(0)),a=s(n(40)),o=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}var l=!0,u=void 0,d=200;function c(e){return"number"!=typeof e.buttons?e.which:0===e.buttons?0:e.buttons%2==1?1:e.buttons%4==2?3:e.buttons%8==4?2:0}function f(){l=!1}function h(e){var t=i.default.cornerstone,n=e.currentTarget,s=t.getEnabledElement(n);if(s.image){var l=r.default.MOUSE_DOUBLE_CLICK,u={page:i.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};u.canvas=t.pixelToCanvas(n,u.image);var d=(0,a.default)(u),c={event:e,which:e.which,viewport:t.getViewport(n),image:s.image,element:n,startPoints:u,lastPoints:d,currentPoints:u,deltaPoints:{x:0,y:0},type:l};(0,o.default)(n,l,c)}}function p(e){var t=i.default.cornerstone,n=e.currentTarget,s=t.getEnabledElement(n);if(s.image){u=setTimeout(f,d);var h=r.default.MOUSE_DOWN;n.removeEventListener("mousemove",g);var p={page:i.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};p.canvas=t.pixelToCanvas(n,p.image);var v=(0,a.default)(p),m={event:e,which:c(e),viewport:t.getViewport(n),image:s.image,element:n,startPoints:p,lastPoints:v,currentPoints:p,deltaPoints:{x:0,y:0},type:h};(0,o.default)(m.element,h,m)&&(m.type=r.default.MOUSE_DOWN_ACTIVATE,(0,o.default)(m.element,r.default.MOUSE_DOWN_ACTIVATE,m));var y=c(e);document.addEventListener("mousemove",b),document.addEventListener("mouseup",function e(a){clearTimeout(u);var d=r.default.MOUSE_UP;l&&(d=r.default.MOUSE_CLICK);var c={page:i.default.cornerstoneMath.point.pageToPoint(a),image:t.pageToPixel(n,a.pageX,a.pageY),client:{x:a.clientX,y:a.clientY}};c.canvas=t.pixelToCanvas(n,c.image);var f={page:i.default.cornerstoneMath.point.subtract(c.page,v.page),image:i.default.cornerstoneMath.point.subtract(c.image,v.image),client:i.default.cornerstoneMath.point.subtract(c.client,v.client),canvas:i.default.cornerstoneMath.point.subtract(c.canvas,v.canvas)},h={event:a,which:y,viewport:t.getViewport(n),image:s.image,element:n,startPoints:p,lastPoints:v,currentPoints:c,deltaPoints:f,type:d};(0,o.default)(h.element,d,h),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",e),n.addEventListener("mousemove",g),l=!0})}function b(e){var l=r.default.MOUSE_DRAG,u={page:i.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};u.canvas=t.pixelToCanvas(n,u.image);var d={page:i.default.cornerstoneMath.point.subtract(u.page,v.page),image:i.default.cornerstoneMath.point.subtract(u.image,v.image),client:i.default.cornerstoneMath.point.subtract(u.client,v.client),canvas:i.default.cornerstoneMath.point.subtract(u.canvas,v.canvas)},c={which:y,viewport:t.getViewport(n),image:s.image,element:n,startPoints:p,lastPoints:v,currentPoints:u,deltaPoints:d,type:l,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};(0,o.default)(c.element,l,c),v=(0,a.default)(u)}}function g(e){var t=i.default.cornerstone,n=e.currentTarget,s=t.getEnabledElement(n);if(s.image){var l=r.default.MOUSE_MOVE,u={page:i.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};u.canvas=t.pixelToCanvas(n,u.image);var d=(0,a.default)(u),c={page:i.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};c.canvas=t.pixelToCanvas(n,c.image);var f={page:i.default.cornerstoneMath.point.subtract(c.page,d.page),image:i.default.cornerstoneMath.point.subtract(c.image,d.image),client:i.default.cornerstoneMath.point.subtract(c.client,d.client),canvas:i.default.cornerstoneMath.point.subtract(c.canvas,d.canvas)},h={viewport:t.getViewport(n),image:s.image,element:n,startPoints:u,lastPoints:d,currentPoints:c,deltaPoints:f,type:l};(0,o.default)(n,l,h),d=(0,a.default)(c)}}function v(e){e.removeEventListener("mousedown",p),e.removeEventListener("mousemove",g),e.removeEventListener("dblclick",h)}var m={enable:function(e){v(e),e.addEventListener("mousedown",p),e.addEventListener("mousemove",g),e.addEventListener("dblclick",h)},disable:v};t.default=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(0)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0,l=void 0;function u(e){var t=i.default.cornerstone,n=e.currentTarget,o=t.getEnabledElement(n);if(o.image){var u={event:window.event||e,element:n,viewport:t.getViewport(n),image:o.image,currentPoints:{page:{x:s,y:l},image:t.pageToPixel(n,s,l)},keyCode:e.keyCode,which:e.which};u.currentPoints.canvas=t.pixelToCanvas(n,u.currentPoints.image);var d={keydown:r.default.KEY_DOWN,keypress:r.default.KEY_PRESS,keyup:r.default.KEY_UP};(0,a.default)(n,d[e.type],u)}}function d(e){s=e.pageX,l=e.pageY}var c=["keydown","keypress","keyup"],f={enable:function(e){c.forEach(function(t){e.removeEventListener(t,u),e.addEventListener(t,u)}),e.removeEventListener("mousemove",d),e.addEventListener("mousemove",d)},disable:function(e){c.forEach(function(t){e.removeEventListener(t,u)}),e.removeEventListener("mousemove",d)}};t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.stopClip=t.playClip=void 0;var r=l(n(1)),i=l(n(0)),a=l(n(13)),o=n(2),s=l(n(6));function l(e){return e&&e.__esModule?e:{default:e}}var u="playClip";function d(e){var t=e.intervalId;void 0!==t&&(e.intervalId=void 0,e.usingFrameTimeVector?clearTimeout(t):clearInterval(t))}t.playClip=function(e,t){var n=void 0,l=void 0;if(void 0===e)throw new Error("playClip: element must not be undefined");var c=(0,o.getToolState)(e,"stack");if(c&&c.data&&c.data.length){var f=i.default.cornerstone,h=void 0;if(c.data.length>1){var p=(0,o.getToolState)(e,"stackRenderer");p&&p.data&&p.data.length&&(h=p.data[0])}var g=c.data[0],v=(0,o.getToolState)(e,u);v&&v.data&&v.data.length?d(n=v.data[0]):(n={intervalId:void 0,framesPerSecond:30,lastFrameTimeStamp:void 0,frameRate:0,frameTimeVector:void 0,ignoreFrameTimeVector:!1,usingFrameTimeVector:!1,speed:1,reverse:!1,loop:!0},(0,o.addToolState)(e,u,n)),(t<0||t>0)&&(n.framesPerSecond=Number(t),n.reverse=n.framesPerSecond<0,n.ignoreFrameTimeVector=!0),!0!==n.ignoreFrameTimeVector&&n.frameTimeVector&&n.frameTimeVector.length===g.imageIds.length&&(l=function(e,t){var n=void 0,r=void 0,i=void 0,a=0,o=e.length,s=[];for(s.isTimeVarying=!1,("number"!=typeof t||t<=0)&&(t=1),n=1;n<o;n++)i=Number(e[n])/t|0,s.push(i),1===n?r=i:i!==r&&(s.isTimeVarying=!0),a+=i;return s.length>0&&(i=s.isTimeVarying?a/s.length|0:s[0],s.push(i)),s}(n.frameTimeVector,n.speed));var m=function(){var t=void 0,i=void 0,o=void 0,l=g.currentImageIdIndex,u=g.imageIds.length;if(n.reverse?l--:l++,!n.loop&&(l<0||l>=u))return d(n),void function(e){var t={element:e};(0,s.default)(e,r.default.CLIP_STOPPED,t)}(e);l>=u&&(l=0),l<0&&(l=u-1),l!==g.currentImageIdIndex&&(t=a.default.getStartLoadHandler(),i=a.default.getEndLoadHandler(),o=a.default.getErrorLoadingHandler(),t&&t(e),(!0===g.preventCache?f.loadImage(g.imageIds[l]):f.loadAndCacheImage(g.imageIds[l])).then(function(t){try{g.currentImageIdIndex=l,h?(h.currentImageIdIndex=l,h.render(e,c.data)):f.displayImage(e,t),i&&i(e,t)}catch(e){return}},function(t){var n=g.imageIds[l];o&&o(e,n,t)}))};l&&l.length>0&&l.isTimeVarying?(n.usingFrameTimeVector=!0,n.intervalId=setTimeout(function e(){n.intervalId=setTimeout(e,l[g.currentImageIdIndex]),m()},0)):(n.usingFrameTimeVector=!1,n.intervalId=setInterval(m,1e3/Math.abs(n.framesPerSecond)))}},t.stopClip=function(e){var t=(0,o.getToolState)(e,u);t&&t.data&&t.data.length&&d(t.data[0])}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(r=n(0))&&r.__esModule?r:{default:r},o=n(2),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentImageIdIndex=0,this.layerIds=[],this.findImageFn=void 0}return i(e,[{key:"render",value:function(e,t){var n=this;if(!Number.isInteger(this.currentImageIdIndex))throw new Error("FusionRenderer: render - Image ID Index is not an integer");if(!this.findImageFn)throw new Error("No findImage function has been defined");t||(t=(0,o.getToolState)(e,"stack").data);var r=a.default.cornerstone,i=t[0],s=i.imageIds[this.currentImageIdIndex],l=t.slice(1,t.length);r.loadAndCacheImage(s).then(function(t){var a=n.layerIds[0];a?r.setLayerImage(e,t,a):(a=r.addLayer(e,t,i.options),n.layerIds.push(a)),r.displayImage(e,t),l.forEach(function(t,i){var o=n.findImageFn(t.imageIds,s),l=i+1,u=n.layerIds[l];u||(u=r.addLayer(e,void 0,t.options),n.layerIds.push(u)),o?r.loadAndCacheImage(o).then(function(t){r.setLayerImage(e,t,u),r.updateImage(e)}):(r.setLayerImage(e,void 0,u),r.setActiveLayer(e,a),r.updateImage(e))})})}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(114))&&r.__esModule?r:{default:r},a={};a.FusionRenderer=i.default,t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(24))&&r.__esModule?r:{default:r},a=n(2),o=n(3),s=(0,i.default)(function(e){var t=e.detail,n=t.element,r=t.enabledElement.canvas.width,i=t.enabledElement.canvas.height;if(!r||!i)return!1;var l=(0,o.getNewContext)(t.enabledElement.canvas);(0,o.draw)(l,function(e){var t=s.getConfiguration(),l=void 0;l="horizontal"===t.orientation?{left:0,top:i-6,width:r,height:6}:{left:0,top:0,width:6,height:i},(0,o.fillBox)(e,l,t.backgroundColor);var u=(0,a.getToolState)(n,"stack");if(u&&u.data&&u.data.length){var d=u.data[0].imageIds,c=u.data[0].currentImageIdIndex,f=r/d.length,h=i/d.length,p=f*c,g=h*c;l="horizontal"===t.orientation?{left:p,top:i-6,width:f,height:6}:{left:0,top:g,width:6,height:h},(0,o.fillBox)(e,l,t.fillColor)}})});s.setConfiguration({backgroundColor:"rgb(19, 63, 141)",fillColor:"white",orientation:"horizontal"}),t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),i=l(n(45)),a=l(n(13)),o=n(2),s=n(33);function l(e){return e&&e.__esModule?e:{default:e}}var u="stackPrefetch",d="prefetch",c={maxImagesToPrefetch:1/0,preserveExistingPool:!1},f=void 0,h=10,p=function(e){return Math.max.apply(null,e)},g=function(e){return Math.min.apply(null,e)};function v(e){var t=(0,o.getToolState)(e,"stack");if(t&&t.data&&t.data.length){var n=t.data[0],s=(0,o.getToolState)(e,u);if(s){var l=s.data[0]||{};if(l.indicesToRequest&&l.indicesToRequest.length||(l.enabled=!1),!1!==l.enabled&&(s.data[0].indicesToRequest.sort(function(e,t){return e-t}),l.indicesToRequest.slice().forEach(function(e){var t=n.imageIds[e];t&&r.default.cornerstone.imageCache.getImageLoadObject(t)&&R(e)}),l.indicesToRequest.length)){c.preserveExistingPool||i.default.clearRequestStack(d);for(var f,h,v,m,y=(f=l.indicesToRequest,h=n.currentImageIdIndex,v=[],m=[],f.forEach(function(e){e<h?v.push(e):e>h&&m.push(e)}),{low:f.indexOf(p(v)),high:f.indexOf(g(m))}),b=void 0,_=void 0,w=a.default.getErrorLoadingHandler(),E=y.low,T=y.high,x=[];E>=0||T<l.indicesToRequest.length;){var S=n.currentImageIdIndex,C=S-l.indicesToRequest[E]>c.maxImagesToPrefetch,O=l.indicesToRequest[T]-S>c.maxImagesToPrefetch,P=!C&&E>=0,I=!O&&T<l.indicesToRequest.length;if(!I&&!P)break;P&&(_=l.indicesToRequest[E--],b=n.imageIds[_],x.push(b)),I&&(_=l.indicesToRequest[T++],b=n.imageIds[_],x.push(b))}var M=!0,A=!1,L=void 0;try{for(var D,k=x.reverse()[Symbol.iterator]();!(M=(D=k.next()).done);M=!0){var j=D.value;i.default.addRequest(e,j,d,!1,N,U,!0)}}catch(e){A=!0,L=e}finally{try{!M&&k.return&&k.return()}finally{if(A)throw L}}i.default.startGrabbing()}}}function R(e){var t=l.indicesToRequest.indexOf(e);t>-1&&l.indicesToRequest.splice(t,1)}function N(e){R(n.imageIds.indexOf(e.imageId))}function U(t){w&&w(e,b,t,"stackPrefetch")}}function m(e){return function(t){var n=t.detail,r=void 0;try{r=(0,o.getToolState)(e,"stack")}catch(e){return}if(r&&r.data&&r.data.length){var i=r.data[0].imageIds.indexOf(n.imageId);if(!(i<0)){var a=(0,o.getToolState)(e,u);a&&a.data&&a.data.length&&a.data[0].indicesToRequest.push(i)}}}}function y(e){clearTimeout(f),f=setTimeout(function(){var t=e.target;try{v(t)}catch(e){return}},h)}var b={enable:function(e){(0,o.getToolState)(e,u).data=[];var t=(0,o.getToolState)(e,"stack");if(t&&t.data&&t.data.length){var n=t.data[0];if(!0!==n.preventCache){var i={indicesToRequest:function(e,t){e=Math.round(e)||0;var n=[],r=(t=Math.round(t)||0)-e+1;if(r<=0)return n;for(;r--;)n[r]=t--;return n}(0,n.imageIds.length-1),enabled:!0,direction:1},a=i.indicesToRequest.indexOf(n.currentImageIdIndex);i.indicesToRequest.splice(a,1),(0,o.addToolState)(e,u,i),v(e),e.removeEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,y),e.addEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,y);var s=m(e);r.default.cornerstone.events.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,s),r.default.cornerstone.events.addEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,s)}}},disable:function(e){clearTimeout(f),e.removeEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,y);var t=m(e);r.default.cornerstone.events.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,t);var n=(0,o.getToolState)(e,u);n&&n.data.length&&(n.data[0].enabled=!1,i.default.clearRequestStack(d))},getConfiguration:function(){return c},setConfiguration:function(e){c=e,e.maxSimultaneousRequests&&(0,s.setMaxSimultaneousRequests)(e.maxSimultaneousRequests)}};t.default=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.stackScrollMultiTouch=t.stackScrollTouchDrag=t.stackScrollWheel=t.stackScroll=void 0;var r=f(n(1)),i=f(n(18)),a=f(n(36)),o=f(n(16)),s=f(n(29)),l=f(n(5)),u=f(n(44)),d=n(2),c=n(4);function f(e){return e&&e.__esModule?e:{default:e}}var h="stackScroll";function p(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,g),t.removeEventListener(r.default.MOUSE_UP,p),t.removeEventListener(r.default.MOUSE_CLICK,p)}function g(e){var t=e.detail,n=t.element,r=(0,d.getToolState)(n,"stack");if(r&&r.data&&r.data.length){var i=r.data[0],a=v.getConfiguration(),o=!0;a&&void 0!==a.allowSkipping&&(o=a.allowSkipping);var s=Math.max(2,n.offsetHeight/Math.max(i.imageIds.length,8));a&&a.stackScrollSpeed&&(s=a.stackScrollSpeed);var l=(0,c.getToolOptions)(h,n),f=l.deltaY||0;if(f+=t.deltaPoints.page.y,Math.abs(f)>=s){var p=Math.round(f/s);(0,u.default)(n,p,!1,o),l.deltaY=f%s}else l.deltaY=f;(0,c.setToolOptions)(h,n,l),e.preventDefault(),e.stopPropagation()}}var v=(0,o.default)(function(e){var t=e.detail,n=t.element,i=(0,c.getToolOptions)(h,n);if((0,l.default)(t.which,i.mouseButtonMask))return i.deltaY=0,(0,c.setToolOptions)(h,n,i),n.addEventListener(r.default.MOUSE_DRAG,g),n.addEventListener(r.default.MOUSE_UP,p),n.addEventListener(r.default.MOUSE_CLICK,p),e.stopImmediatePropagation(),!1},h),m=(0,s.default)(function(e){var t=e.detail,n=-t.direction,r=v.getConfiguration(),i=!1,a=!0;r&&(i=void 0!==r.loop&&r.loop,a=void 0===r.allowSkipping||r.allowSkipping),(0,u.default)(t.element,n,i,a)}),y={eventData:{deltaY:0}},b=(0,i.default)(g,"stackScrollTouchDrag",y),_=(0,a.default)(function(e){var t=e.detail,n=_.getConfiguration();n&&n.testPointers(t)&&g(e)},y);_.setConfiguration({testPointers:function(e){return e.numPointers>=3}}),t.stackScroll=v,t.stackScrollWheel=m,t.stackScrollTouchDrag=b,t.stackScrollMultiTouch=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(44));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,i(n(61)).default)(function(e){var t=e.detail,n=t.keyCode;if(38===n||40===n){var i=1;40===n&&(i=-1),(0,r.default)(t.element,i)}});t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(0))&&r.__esModule?r:{default:r},a=n(26),o=n(2),s={save:function(e){var t={imageIdToolState:a.globalImageIdSpecificToolStateManager.saveToolState(),elementToolState:{},elementViewport:{}};return e.forEach(function(e){var n=(0,o.getElementToolStateManager)(e);n!==a.globalImageIdSpecificToolStateManager&&(t.elementToolState[e.id]=n.saveToolState(),t.elementViewport[e.id]=i.default.cornerstone.getViewport(e))}),t},restore:function(e){if(e.hasOwnProperty("imageIdToolState")&&e.hasOwnProperty("elementToolState")&&e.hasOwnProperty("elementViewport")){var t=i.default.cornerstone;return a.globalImageIdSpecificToolStateManager.restoreToolState(e.imageIdToolState),Object.keys(e.elementViewport).forEach(function(n){var r=document.getElementById(n);if(r&&e.elementToolState.hasOwnProperty(n)){var i=(0,o.getElementToolStateManager)(r);if(i!==a.globalImageIdSpecificToolStateManager){i.restoreToolState(e.elementToolState[n]);var s=e.elementViewport[n];t.setViewport(r,s),t.updateImage(r)}}}),e}}};t.default=s},function(e,t,n){function r(){var e={};return{get:function(t,n){if(!1!==e.hasOwnProperty(t)){var r=e[t];if(!1!==r.hasOwnProperty(n))return r[n]}},add:function(t,n,r){!1===e.hasOwnProperty(t)&&(e[t]={});var i=e[t];!1===i.hasOwnProperty(n)&&(i[n]={data:[]}),i[n].data.push(r)},remove:function(t,n,r){if(!1!==e.hasOwnProperty(t)){var i=e[t];if(!1!==i.hasOwnProperty(n)){for(var a=i[n],o=-1,s=0;s<a.data.length;s++)a.data[s]===r&&(o=s);-1!==o&&a.data.splice(o,1)}}}}}Object.defineProperty(t,"__esModule",{value:!0});var i=r();t.newFrameOfReferenceSpecificToolStateManager=r,t.globalFrameOfReferenceSpecificToolStateManager=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.addStackStateManager=t.newStackSpecificToolStateManager=t.stackSpecificStateManager=void 0;var r=n(26),i=n(2);function a(e,t){var n={};return{get:function(r,i){return e.indexOf(i)>=0?(!1===n.hasOwnProperty(i)&&(n[i]={data:[]}),n[i]):t.get(r,i)},add:function(r,i,a){if(!(e.indexOf(i)>=0))return t.add(r,i,a);!1===n.hasOwnProperty(i)&&(n[i]={data:[]}),n[i].data.push(a)},saveToolState:function(){return n},restoreToolState:function(e){n=e},toolState:n}}var o=[];function s(e,t){var n=(0,i.getElementToolStateManager)(e);n||(n=r.globalImageIdSpecificToolStateManager);var s=["stack","stackPrefetch","playClip","volume","slab","referenceLines","crosshairs","stackRenderer"];t&&(s=s.concat(t));var l=a(s,n);o.push(l),(0,i.setElementToolStateManager)(e,l)}var l={newStackSpecificToolStateManager:a,addStackStateManager:s};t.stackSpecificStateManager=l,t.newStackSpecificToolStateManager=a,t.addStackStateManager=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.newTimeSeriesSpecificToolStateManager=t.addTimeSeriesStateManager=void 0;var r=n(26),i=n(2);function a(e,t){var n={};return{get:function(r,i){return e.indexOf(i)>=0?(!1===n.hasOwnProperty(i)&&(n[i]={data:[]}),n[i]):t.get(r,i)},add:function(r,i,a){if(!(e.indexOf(i)>=0))return t.add(r,i,a);!1===n.hasOwnProperty(i)&&(n[i]={data:[]}),n[i].data.push(a)}}}var o=[];t.addTimeSeriesStateManager=function(e,t){t=t||["timeSeries"];var n=(0,i.getElementToolStateManager)(e);void 0===n&&(n=r.globalImageIdSpecificToolStateManager);var s=a(t,n);o.push(s),(0,i.setElementToolStateManager)(e,s)},t.newTimeSeriesSpecificToolStateManager=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=i.default.cornerstone,a=r.getViewport(t),o=r.getViewport(n);o.scale===a.scale&&o.translation.x===a.translation.x&&o.translation.y===a.translation.y||(o.scale=a.scale,o.translation.x=a.translation.x,o.translation.y=a.translation.y,e.setViewport(n,o))}};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var s=r.default.cornerstone,l=(0,i.getToolState)(t,"stack").data[0],u=(0,i.getToolState)(n,"stack").data[0],d=l.currentImageIdIndex;if((d=(0,o.default)(d,0,u.imageIds.length-1))!==u.currentImageIdIndex){var c=a.default.getStartLoadHandler(),f=a.default.getEndLoadHandler(),h=a.default.getErrorLoadingHandler();c&&c(n),(!0===u.preventCache?s.loadImage(u.imageIds[d]):s.loadAndCacheImage(u.imageIds[d])).then(function(t){var r=s.getViewport(n);u.currentImageIdIndex=d,e.displayImage(n,t,r),f&&f(n,t)},function(e){var t=u.imageIds[d];h&&h(n,t,e)})}}};var r=s(n(0)),i=n(2),a=s(n(13)),o=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l){if(n!==t){var u=r.default.cornerstone,d=u.getEnabledElement(t),c=u.metaData.get("imagePlaneModule",d.image.imageId);if(void 0!==c&&void 0!==c.imagePositionPatient){var f=(0,o.default)(c.imagePositionPatient),h=(0,i.getToolState)(n,"stack").data[0],p=Number.MAX_VALUE,g=-1;if(l){var v=f.clone().add(l);if(h.imageIds.forEach(function(e,t){var n=u.metaData.get("imagePlaneModule",e);if(void 0!==n&&void 0!==n.imagePositionPatient){var r=(0,o.default)(n.imagePositionPatient),i=v.distanceToSquared(r);i<p&&(p=i,g=t)}}),g!==h.currentImageIdIndex&&-1!==g){var m=a.default.getStartLoadHandler(),y=a.default.getEndLoadHandler(),b=a.default.getErrorLoadingHandler();h.currentImageIdIndex=g;var _=h.imageIds[g];m&&m(n),(!0===h.preventCache?u.loadImage(_):u.loadAndCacheImage(_)).then(function(t){var r=u.getViewport(n);h.currentImageIdIndex===g&&(e.displayImage(n,t,r),y&&y(n,t))},function(e){var t=h.imageIds[g];b&&b(n,t,e)})}}}}};var r=s(n(0)),i=n(2),a=s(n(13)),o=s(n(19));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var s=r.default.cornerstone,l=s.getEnabledElement(t).image,u=s.metaData.get("imagePlaneModule",l.imageId);if(void 0!==u&&void 0!==u.imagePositionPatient){var d=(0,o.default)(u.imagePositionPatient),c=(0,i.getToolState)(n,"stack").data[0],f=Number.MAX_VALUE,h=-1;if(c.imageIds.forEach(function(e,t){var n=s.metaData.get("imagePlaneModule",e);if(void 0!==n&&void 0!==n.imagePositionPatient){var r=(0,o.default)(n.imagePositionPatient).distanceToSquared(d);r<f&&(f=r,h=t)}}),h!==c.currentImageIdIndex){var p=a.default.getStartLoadHandler(),g=a.default.getEndLoadHandler(),v=a.default.getErrorLoadingHandler();c.currentImageIdIndex=h;var m=c.imageIds[h];p&&p(n),-1!==h&&(!0===c.preventCache?s.loadImage(m):s.loadAndCacheImage(m)).then(function(t){var r=s.getViewport(n);c.currentImageIdIndex===h&&(e.displayImage(n,t,r),g&&g(n,t))},function(e){var t=c.imageIds[h];v&&v(n,t,e)})}}}};var r=s(n(0)),i=n(2),a=s(n(13)),o=s(n(19));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s){if(t!==n&&s&&s.direction){var l=r.default.cornerstone,u=(0,i.getToolState)(n,"stack").data[0],d=u.currentImageIdIndex+s.direction;if(d=(0,o.default)(d,0,u.imageIds.length-1),u.currentImageIdIndex!==d){var c=a.default.getStartLoadHandler(),f=a.default.getEndLoadHandler(),h=a.default.getErrorLoadingHandler();u.currentImageIdIndex=d;var p=u.imageIds[d];c&&c(n),(!0===u.preventCache?l.loadImage(p):l.loadAndCacheImage(p)).then(function(t){var r=l.getViewport(n);u.currentImageIdIndex===d&&(e.displayImage(n,t,r),f&&f(n,t))},function(e){var t=u.imageIds[d];h&&h(n,t,e)})}}};var r=s(n(0)),i=n(2),a=s(n(13)),o=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(19)),a=n(4);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}t.default=function(e,t){var n=r.default.cornerstone,o=this,l=[],u=[],d=!1,c={},f=t;function h(e,t){o.enabled&&l.length&&u.length&&(d=!0,u.forEach(function(n){var r=u.indexOf(n);if(-1!==r){var i=c.imageIds.targetElements[r],a=l.indexOf(e);if(-1!==a){var s=c.imageIds.sourceElements[a],d=void 0;s===i?d=0:void 0!==c.distances[s]&&(d=c.distances[s][i]),f(o,e,n,t,d)}}}),d=!1)}function p(e){var t=e.detail;!0!==d&&h(e.currentTarget,t)}function g(e){var t=e.detail.element;o.remove(t),(0,a.clearToolOptionsByElement)(t)}this.enabled=!0,this.setHandler=function(e){f=e},this.getHandler=function(){return f},this.getDistances=function(){l.length&&u.length&&(c.distances={},c.imageIds={sourceElements:[],targetElements:[]},l.forEach(function(e){var t=n.getEnabledElement(e);if(t&&t.image){var r=t.image.imageId,a=n.metaData.get("imagePlaneModule",r);if(a&&a.imagePositionPatient){var o=(0,i.default)(a.imagePositionPatient);c.hasOwnProperty(t)||(c.distances[r]={},c.imageIds.sourceElements.push(r),u.forEach(function(t){var a=n.getEnabledElement(t);if(a&&a.image){var s=a.image.imageId;if(c.imageIds.targetElements.push(s),e!==t&&r!==s&&!c.distances[r].hasOwnProperty(s)){var l=n.metaData.get("imagePlaneModule",s);if(l&&l.imagePositionPatient){var u=(0,i.default)(l.imagePositionPatient);c.distances[r][s]=u.clone().sub(o)}}}}),Object.keys(c.distances[r]).length||delete c.distances[r])}}}))},this.addSource=function(t){-1===l.indexOf(t)&&(l.push(t),e.split(" ").forEach(function(e){t.addEventListener(e,p)}),o.getDistances(),o.updateDisableHandlers())},this.addTarget=function(e){-1===u.indexOf(e)&&(u.push(e),o.getDistances(),f(o,e,e,0),o.updateDisableHandlers())},this.add=function(e){o.addSource(e),o.addTarget(e)},this.removeSource=function(t){var n=l.indexOf(t);-1!==n&&(l.splice(n,1),e.split(" ").forEach(function(e){t.removeEventListener(e,p)}),o.getDistances(),h(t),o.updateDisableHandlers())},this.removeTarget=function(e){var t=u.indexOf(e);-1!==t&&(u.splice(t,1),o.getDistances(),f(o,e,e,0),o.updateDisableHandlers())},this.remove=function(e){o.removeTarget(e),o.removeSource(e)},this.getSourceElements=function(){return l},this.getTargetElements=function(){return u},this.displayImage=function(e,t,r){d=!0,n.displayImage(e,t,r),d=!1},this.setViewport=function(e,t){d=!0,n.setViewport(e,t),d=!1},this.updateDisableHandlers=function(){s(l.concat(u)).forEach(function(e){e.removeEventListener(r.default.cornerstone.EVENTS.ELEMENT_DISABLED,g),e.addEventListener(r.default.cornerstone.EVENTS.ELEMENT_DISABLED,g)})},this.destroy=function(){s(l.concat(u)).forEach(function(e){o.remove(e)})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n!==t&&i.default.cornerstone.updateImage(n)};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=i.default.cornerstone,a=r.getViewport(t),o=r.getViewport(n);o.voi.windowWidth===a.voi.windowWidth&&o.voi.windowCenter===a.voi.windowCenter&&o.invert===a.invert||(o.voi.windowWidth=a.voi.windowWidth,o.voi.windowCenter=a.voi.windowCenter,o.invert=a.invert,e.setViewport(n,o))}};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.timeSeriesScrollTouchDrag=t.timeSeriesScrollWheel=t.timeSeriesScroll=void 0;var r=c(n(1)),i=c(n(16)),a=c(n(18)),o=c(n(29)),s=c(n(37)),l=c(n(5)),u=n(2),d=n(4);function c(e){return e&&e.__esModule?e:{default:e}}var f="timeSeriesScroll";function h(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,p),t.removeEventListener(r.default.MOUSE_UP,h),t.removeEventListener(r.default.MOUSE_CLICK,h)}function p(e){var t=e.detail,n=t.element;e.data.deltaY+=t.deltaPoints.page.y;var r=(0,u.getToolState)(t.element,"timeSeries");if(void 0!==r&&void 0!==r.data&&0!==r.data.length){var i=r.data[0],a=n.offsetHeight/i.stacks.length;if(void 0!==e.data.options&&void 0!==e.data.options.timeSeriesScrollSpeed&&(a=e.data.options.timeSeriesScrollSpeed),e.data.deltaY>=a||e.data.deltaY<=-a){var o=Math.round(e.data.deltaY/a),l=e.data.deltaY%a;(0,s.default)(t.element,o),e.data.deltaY=l}return!1}}var g=(0,i.default)(function(e){var t=e.detail,n=t.element,i=(0,d.getToolOptions)(f,n);if((0,l.default)(t.which,i.mouseButtonMask))return i.deltaY=0,(0,d.setToolOptions)(f,n,i),n.addEventListener(r.default.MOUSE_DRAG,p),n.addEventListener(r.default.MOUSE_UP,h),n.addEventListener(r.default.MOUSE_CLICK,h),e.stopImmediatePropagation(),!1},f),v=(0,o.default)(function(e){var t=e.detail,n=-t.direction;(0,s.default)(t.element,n)}),m=(0,a.default)(function(e){var t=e.originalEvent.detail,n={deltaY:0};n.deltaY+=t.deltaPoints.page.y;var r=(0,u.getToolState)(t.element,"stack");if(void 0!==r&&void 0!==r.data&&0!==r.data.length){if(n.deltaY>=3||n.deltaY<=-3){var i=n.deltaY/3,a=n.deltaY%3;(0,s.default)(n.element,i),n.deltaY=a}return!1}});t.timeSeriesScroll=g,t.timeSeriesScrollWheel=v,t.timeSeriesScrollTouchDrag=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(2),a=(r=n(37))&&r.__esModule?r:{default:r},o="timeSeriesPlayer",s={start:function(e,t){if(void 0===e)throw new Error("playClip: element must not be undefined");void 0===t&&(t=30);var n=(0,i.getToolState)(e,"timeSeries");if(void 0!==n&&void 0!==n.data&&0!==n.data.length){var r=(0,i.getToolState)(e,o),s=void 0;void 0===r||0===r.data.length?(s={intervalId:void 0,framesPerSecond:t,lastFrameTimeStamp:void 0,frameRate:0},(0,i.addToolState)(e,o,s)):(s=r.data[0]).framesPerSecond=t,void 0===s.intervalId&&(s.intervalId=setInterval(function(){s.framesPerSecond>0?(0,a.default)(e,1,!0):(0,a.default)(e,-1,!0)},1e3/Math.abs(s.framesPerSecond)))}},stop:function(e){var t=(0,i.getToolState)(e,o);if(t&&t.data&&t.data.length){var n=t.data[0];clearInterval(n.intervalId),n.intervalId=void 0}}};t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=i.default.cornerstone,t=this;t.samples=[],this.set=function(n){t.samples=n,(0,a.default)(e.events,r.default.LINE_SAMPLE_UPDATED)}};var r=o(n(1)),i=o(n(0)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(0)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}var s=new function(){var e=i.default.cornerstone,t=this;t.measurements=[],this.add=function(n){var i={index:t.measurements.push(n),measurement:n};(0,a.default)(e.events,r.default.MEASUREMENT_ADDED,i)},this.remove=function(n){var i=t.measurements[n];t.measurements.splice(n,1);var o={index:n,measurement:i};(0,a.default)(e.events,r.default.MEASUREMENT_REMOVED,o)}};t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),i=c(n(10)),a=c(n(9)),o=n(2),s=c(n(135)),l=c(n(134)),u=c(n(11)),d=n(3);function c(e){return e&&e.__esModule?e:{default:e}}var f="probe4D",h=(0,i.default)({createNewMeasurement:function(e){var t=(0,o.getToolState)(e.element,"timeSeries");if(void 0!==t&&void 0!==t.data&&0!==t.data.length){var n=t.data[0],i={timeSeries:n,lineSample:new l.default,imageIdIndex:n.stacks[n.currentStackIndex].currentImageIdIndex,visible:!0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}};return function(e){var t=r.default.cornerstone,n=[];e.timeSeries.stacks.forEach(function(r){(!0===r.preventCache?t.loadImage(r.imageIds[e.imageIdIndex]):t.loadAndCacheImage(r.imageIds[e.imageIdIndex])).then(function(t){var r=Math.round(e.handles.end.x)+Math.round(e.handles.end.y)*t.width,i=t.getPixelData()[r];n.push(i)})}),e.lineSample.set(n)}(i),s.default.add(i),i}},onImageRendered:function(e){var t=r.default.cornerstone,n=e.detail,i=(0,o.getToolState)(e.currentTarget,f);if(i){var s=n.canvasContext;s.setTransform(1,0,0,1,0,0);for(var l=function(e){(0,d.draw)(s,function(r){var o=i.data[e];(0,a.default)(r,n,o.handles,"white");var s={x:o.handles.end.x+3,y:o.handles.end.y-3},l=t.pixelToCanvas(n.element,s);(0,u.default)(r,o.handles.end.x+", "+o.handles.end.y,l.x,l.y,"white")})},c=0;c<i.data.length;c++)l(c)}},toolType:f});t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){var a={color:n,lineWidth:i};(0,r.drawCircle)(e,void 0,t,6,a,"canvas")};var r=n(3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,a){var o={x:t,y:n},s={x:t+i,y:n+a};(0,r.drawEllipse)(e,void 0,o,s,{},"canvas")};var r=n(3)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.style.webkitUserSelect="none",e.style.webkitTouchCallout="none",e.style.mozUserSelect="none",e.style.msUserSelect="none",e.style.oUserSelect="none",e.style.khtmlUserSelect="none",e.style.userSelect="none",e.unselectable="on",e.oncontextmenu=function(){return!1},!0===t&&(e.style.pointerEvents="none")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return i.default.cornerstone.setToPixelCoordinateSystem(e,t,.1),{fontSize:n/e.viewport.scale/.1,lineHeight:n/e.viewport.scale/.1,fontScale:.1}};var r,i=(r=n(0))&&r.__esModule?r:{default:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.replace("H","f");return(t=(t=(t=(t=(t=t.replace("F","h")).replace("R","l")).replace("L","r")).replace("A","p")).replace("P","a")).toUpperCase()}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=(0,i.default)(e),n="",a=t.x<0?"R":"L",o=t.y<0?"A":"P",s=t.z<0?"F":"H",l=new r.default.cornerstoneMath.Vector3(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z)),u=0;u<3;u++)if(l.x>1e-4&&l.x>l.y&&l.x>l.z)n+=a,l.x=0;else if(l.y>1e-4&&l.y>l.x&&l.y>l.z)n+=o,l.y=0;else{if(!(l.z>1e-4&&l.z>l.x&&l.z>l.y))break;n+=s,l.z=0}return n};var r=a(n(0)),i=a(n(19));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=n(2),a=o(n(67));function o(e){return e&&e.__esModule?e:{default:e}}var s="referenceLines";function l(e){var t=e.detail,n=(0,i.getToolState)(e.currentTarget,s);if(void 0!==n){var a=n.data[0].synchronizationContext.getSourceElements(),o=n.data[0].renderer,l=t.canvasContext.canvas.getContext("2d");r.default.cornerstone.setToPixelCoordinateSystem(t.enabledElement,l),a.forEach(function(n){n!==e.currentTarget&&o(l,t,e.currentTarget,n)})}}var u={enable:function(e,t,n){n=n||a.default,(0,i.addToolState)(e,s,{synchronizationContext:t,renderer:n}),e.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,l),e.addEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,l),r.default.cornerstone.updateImage(e)},disable:function(e){e.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,l),r.default.cornerstone.updateImage(e)}};t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(68)),i=o(n(143)),a=o(n(67));function o(e){return e&&e.__esModule?e:{default:e}}var s={calculateReferenceLine:r.default,tool:i.default,renderActiveReferenceLine:a.default};t.default=s}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(1)(e))},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(a,o,s,l){var u,d=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),f="function",h=Math.round,p=Math.abs,g=Date.now;function v(e,t,n){return setTimeout(T(e,n),t)}function m(e,t,n){return!!Array.isArray(e)&&(y(e,n[t],n),!0)}function y(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==l)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function b(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=a.console&&(a.console.warn||a.console.log);return i&&i.call(a.console,r,n),e.apply(this,arguments)}}u="function"!=typeof Object.assign?function(e){if(e===l||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==l&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var _=b(function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===l)&&(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),w=b(function(e,t){return _(e,t,!0)},"merge","Use `assign`.");function E(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&u(r,n)}function T(e,t){return function(){return e.apply(t,arguments)}}function x(e,t){return(void 0===e?"undefined":i(e))==f?e.apply(t&&t[0]||l,t):e}function S(e,t){return e===l?t:e}function C(e,t,n){y(M(t),function(t){e.addEventListener(t,n,!1)})}function O(e,t,n){y(M(t),function(t){e.removeEventListener(t,n,!1)})}function P(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function I(e,t){return e.indexOf(t)>-1}function M(e){return e.trim().split(/\s+/g)}function A(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function L(e){return Array.prototype.slice.call(e,0)}function D(e,t,n){for(var r=[],i=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];A(i,o)<0&&r.push(e[a]),i[a]=o,a++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function k(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),a=0;a<d.length;){if((r=(n=d[a])?n+i:t)in e)return r;a++}return l}var j=1;function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var N="ontouchstart"in a,U=k(a,"PointerEvent")!==l,B=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),H=25,F=1,V=4,z=8,W=1,q=2,G=4,$=8,Y=16,Z=q|G,K=$|Y,X=Z|K,Q=["x","y"],J=["clientX","clientY"];function ee(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){x(e.options.enable,[e])&&n.handler(t)},this.init()}function te(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,a=t&F&&r-i==0,o=t&(V|z)&&r-i==0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=ne(t)),i>1&&!n.firstMultiple?n.firstMultiple=ne(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,s=o?o.center:a.center,u=t.center=re(r);t.timeStamp=g(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=se(s,u),t.distance=oe(s,u),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};t.eventType!==F&&a.eventType!==V||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=ae(t.deltaX,t.deltaY);var d,c,f=ie(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=f.x,t.overallVelocityY=f.y,t.overallVelocity=p(f.x)>p(f.y)?f.x:f.y,t.scale=o?(d=o.pointers,oe((c=r)[0],c[1],J)/oe(d[0],d[1],J)):1,t.rotation=o?function(e,t){return se(t[1],t[0],J)+se(e[1],e[0],J)}(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;if(t.eventType!=z&&(s>H||o.velocity===l)){var u=t.deltaX-o.deltaX,d=t.deltaY-o.deltaY,c=ie(s,u,d);r=c.x,i=c.y,n=p(c.x)>p(c.y)?c.x:c.y,a=ae(u,d),e.lastInterval=t}else n=o.velocity,r=o.velocityX,i=o.velocityY,a=o.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=a}(n,t);var h=e.element;P(t.srcEvent.target,h)&&(h=t.srcEvent.target),t.target=h}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function ne(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:g(),pointers:t,center:re(t),deltaX:e.deltaX,deltaY:e.deltaY}}function re(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:h(n/t),y:h(r/t)}}function ie(e,t,n){return{x:t/e||0,y:n/e||0}}function ae(e,t){return e===t?W:p(e)>=p(t)?e<0?q:G:t<0?$:Y}function oe(e,t,n){n||(n=Q);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function se(e,t,n){n||(n=Q);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}ee.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(R(this.element),this.evWin,this.domHandler)}};var le={mousedown:F,mousemove:2,mouseup:V},ue="mousedown",de="mousemove mouseup";function ce(){this.evEl=ue,this.evWin=de,this.pressed=!1,ee.apply(this,arguments)}E(ce,ee,{handler:function(e){var t=le[e.type];t&F&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=V),this.pressed&&(t&V&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var fe={pointerdown:F,pointermove:2,pointerup:V,pointercancel:z,pointerout:z},he={2:"touch",3:"pen",4:"mouse",5:"kinect"},pe="pointerdown",ge="pointermove pointerup pointercancel";function ve(){this.evEl=pe,this.evWin=ge,ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(pe="MSPointerDown",ge="MSPointerMove MSPointerUp MSPointerCancel"),E(ve,ee,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=fe[r],a=he[e.pointerType]||e.pointerType,o="touch"==a,s=A(t,e.pointerId,"pointerId");i&F&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):i&(V|z)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var me={touchstart:F,touchmove:2,touchend:V,touchcancel:z},ye="touchstart",be="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=ye,this.evWin=be,this.started=!1,ee.apply(this,arguments)}E(_e,ee,{handler:function(e){var t=me[e.type];if(t===F&&(this.started=!0),this.started){var n=function(e,t){var n=L(e.touches),r=L(e.changedTouches);return t&(V|z)&&(n=D(n.concat(r),"identifier",!0)),[n,r]}.call(this,e,t);t&(V|z)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var we={touchstart:F,touchmove:2,touchend:V,touchcancel:z},Ee="touchstart touchmove touchend touchcancel";function Te(){this.evTarget=Ee,this.targetIds={},ee.apply(this,arguments)}E(Te,ee,{handler:function(e){var t=we[e.type],n=function(e,t){var n=L(e.touches),r=this.targetIds;if(t&(2|F)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=L(e.changedTouches),s=[],l=this.target;if(a=n.filter(function(e){return P(e.target,l)}),t===F)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),t&(V|z)&&delete r[o[i].identifier],i++;return s.length?[D(a.concat(s),"identifier",!0),s]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var xe=2500;function Se(){ee.apply(this,arguments);var e=T(this.handler,this);this.touch=new Te(this.manager,e),this.mouse=new ce(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Ce(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},xe)}}E(Se,ee,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(e,t){e&F?(this.primaryTouch=t.changedPointers[0].identifier,Ce.call(this,t)):e&(V|z)&&Ce.call(this,t)}).call(this,t,n);else if(i&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(t-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Oe=k(c.style,"touchAction"),Pe=Oe!==l,Ie="manipulation",Me="none",Ae="pan-x",Le="pan-y",De=function(){if(!Pe)return!1;var e={},t=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||a.CSS.supports("touch-action",n)}),e}();function ke(e,t){this.manager=e,this.set(t)}ke.prototype={set:function(e){"compute"==e&&(e=this.compute()),Pe&&this.manager.element.style&&De[e]&&(this.manager.element.style[Oe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return y(this.manager.recognizers,function(t){x(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(I(e,Me))return Me;var t=I(e,Ae),n=I(e,Le);return t&&n?Me:t||n?t?Ae:Le:I(e,Ie)?Ie:"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=I(r,Me)&&!De[Me],a=I(r,Le)&&!De[Le],o=I(r,Ae)&&!De[Ae];if(i){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!o||!a)return i||a&&n&Z||o&&n&K?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var je=1,Re=2,Ne=4,Ue=8,Be=Ue,He=16;function Fe(e){this.options=u({},this.defaults,e||{}),this.id=j++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=je,this.simultaneous={},this.requireFail=[]}function Ve(e){return e&He?"cancel":e&Ue?"end":e&Ne?"move":e&Re?"start":""}function ze(e){return e==Y?"down":e==$?"up":e==q?"left":e==G?"right":""}function We(e,t){var n=t.manager;return n?n.get(e):e}function qe(){Fe.apply(this,arguments)}function Ge(){qe.apply(this,arguments),this.pX=null,this.pY=null}function $e(){qe.apply(this,arguments)}function Ye(){Fe.apply(this,arguments),this._timer=null,this._input=null}function Ze(){qe.apply(this,arguments)}function Ke(){qe.apply(this,arguments)}function Xe(){Fe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Qe(e,t){return(t=t||{}).recognizers=S(t.recognizers,Qe.defaults.preset),new Je(e,t)}function Je(e,t){var n;this.options=u({},Qe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(U?ve:B?Te:N?Se:ce))(n,te),this.touchAction=new ke(this,this.options.touchAction),et(this,!0),y(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function et(e,t){var n,r=e.element;r.style&&(y(e.options.cssProps,function(i,a){n=k(r.style,a),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}Fe.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=We(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)?this:(e=We(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===A(t,e=We(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=We(e,this);var t=A(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<Ue&&r(t.options.event+Ve(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=Ue&&r(t.options.event+Ve(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|je)))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!x(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(Be|He|32)&&(this.state=je),this.state=this.process(t),this.state&(Re|Ne|Ue|He)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},E(qe,Fe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Re|Ne),i=this.attrTest(e);return r&&(n&z||!i)?t|He:r||i?n&V?t|Ue:t&Re?t|Ne:Re:32}}),E(Ge,qe,{defaults:{event:"pan",threshold:10,pointers:1,direction:X},getTouchAction:function(){var e=this.options.direction,t=[];return e&Z&&t.push(Le),e&K&&t.push(Ae),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&Z?(i=0===a?W:a<0?q:G,n=a!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?W:o<0?$:Y,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return qe.prototype.attrTest.call(this,e)&&(this.state&Re||!(this.state&Re)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ze(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),E($e,qe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Me]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Re)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),E(Ye,Fe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(V|z)&&!i)this.reset();else if(e.eventType&F)this.reset(),this._timer=v(function(){this.state=Be,this.tryEmit()},t.time,this);else if(e.eventType&V)return Be;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Be&&(e&&e.eventType&V?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=g(),this.manager.emit(this.options.event,this._input)))}}),E(Ze,qe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Me]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Re)}}),E(Ke,qe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|K,pointers:1},getTouchAction:function(){return Ge.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Z|K)?t=e.overallVelocity:n&Z?t=e.overallVelocityX:n&K&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&e.eventType&V},emit:function(e){var t=ze(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),E(Xe,Fe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ie]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&F&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=V)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||oe(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=v(function(){this.state=Be,this.tryEmit()},t.interval,this),Re):Be}return 32},failTimeout:function(){return this._timer=v(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Be&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Qe.VERSION="2.0.7",Qe.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ze,{enable:!1}],[$e,{enable:!1},["rotate"]],[Ke,{direction:Z}],[Ge,{direction:Z},["swipe"]],[Xe],[Xe,{event:"doubletap",taps:2},["tap"]],[Ye]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Je.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&Be)&&(i=t.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(Re|Ne|Ue)&&(i=t.curRecognizer=n),a++}},get:function(e){if(e instanceof Fe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=A(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==l&&t!==l){var n=this.handlers;return y(M(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==l){var n=this.handlers;return y(M(e),function(e){t?n[e]&&n[e].splice(A(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&et(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Qe,{INPUT_START:F,INPUT_MOVE:2,INPUT_END:V,INPUT_CANCEL:z,STATE_POSSIBLE:je,STATE_BEGAN:Re,STATE_CHANGED:Ne,STATE_ENDED:Ue,STATE_RECOGNIZED:Be,STATE_CANCELLED:He,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:q,DIRECTION_RIGHT:G,DIRECTION_UP:$,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:K,DIRECTION_ALL:X,Manager:Je,Input:ee,TouchAction:ke,TouchInput:Te,MouseInput:ce,PointerEventInput:ve,TouchMouseInput:Se,SingleTouchInput:_e,Recognizer:Fe,AttrRecognizer:qe,Tap:Xe,Pan:Ge,Swipe:Ke,Pinch:$e,Rotate:Ze,Press:Ye,on:C,off:O,each:y,merge:w,extend:_,assign:u,inherit:E,bindFn:T,prefixed:k}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=Qe,(r=function(){return Qe}.call(t,n,t,e))===l||(e.exports=r)}(window,document)},,,function(e,t){},,,,,function(e,t){}]]);